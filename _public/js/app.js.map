{"version":3,"sources":["app/scripts/app.coffee","app/scripts/initializers/routes.coffee","app/scripts/initializers/auth.coffee","app/scripts/initializers/navigation.coffee","app/partials/add.html","app/partials/dashboard.html","app/partials/events.html","app/partials/generators/lemmatizer.html","app/partials/info.html","app/partials/itemsAdd.html","app/partials/itemsDetail.html","app/partials/libraries.html","app/partials/librariesAdd.html","app/partials/librariesDetail.html","app/partials/librariesInformationEdit.html","app/partials/metadata/metadata.html","app/partials/metadata/metadataAuthorAdd.html","app/partials/metadata/metadataAuthorEdit.html","app/partials/metadata/metadataCustomAdd.html","app/partials/metadata/metadataCustomEdit.html","app/partials/metadata/metadataDescriptionAdd.html","app/partials/metadata/metadataDescriptionEdit.html","app/partials/metadata/metadataKeywordsAdd.html","app/partials/metadata/metadataKeywordsEdit.html","app/partials/metadata/metadataLanguageAdd.html","app/partials/metadata/metadataLanguageEdit.html","app/partials/metadata/metadataLocationAdd.html","app/partials/metadata/metadataLocationEdit.html","app/partials/metadata/metadataOrganizationsAdd.html","app/partials/metadata/metadataOrganizationsEdit.html","app/partials/metadata/metadataPeopleAdd.html","app/partials/metadata/metadataPeopleEdit.html","app/partials/metadata/metadataShotTypeAdd.html","app/partials/metadata/metadataShotTypeEdit.html","app/partials/metadata/metadataSummaryAdd.html","app/partials/metadata/metadataSummaryEdit.html","app/partials/projects.html","app/partials/projectsAdd.html","app/partials/projectsDetail.html","app/partials/projectsInformationEdit.html","app/partials/search.html","app/partials/sequencesAdd.html","app/partials/sequencesDetail.html","app/partials/sequencesInformationEdit.html","app/partials/synthesizers/sequence.html","app/partials/users.html","app/partials/usersEdit.html","app/partials/version.html","app/partials/viewer.html","app/partials/visualizations.html","app/partials/visualizations/generic.html","app/partials/visualizationsAdd.html","app/partials/visualizationsDetail.html","app/partials/visualizationsInformationEdit.html","app/scripts/api/auth.coffee","app/scripts/api/event.coffee","app/scripts/api/generators.coffee","app/scripts/api/item.coffee","app/scripts/api/library.coffee","app/scripts/api/project.coffee","app/scripts/api/settings.coffee","app/scripts/api/synthesizers.coffee","app/scripts/api/system.coffee","app/scripts/api/user.coffee","app/scripts/api/visualization.coffee","app/scripts/controllers/add.coffee","app/scripts/controllers/dashboard.coffee","app/scripts/controllers/events.coffee","app/scripts/controllers/info.coffee","app/scripts/controllers/items/itemsAdd.coffee","app/scripts/controllers/items/itemsDetail.coffee","app/scripts/controllers/libraries/libraries.coffee","app/scripts/controllers/libraries/librariesAdd.coffee","app/scripts/controllers/libraries/librariesDetail.coffee","app/scripts/controllers/libraries/librariesInformationEdit.coffee","app/scripts/controllers/metadata/metadata.coffee","app/scripts/controllers/metadata/metadataAuthor.coffee","app/scripts/controllers/metadata/metadataCustom.coffee","app/scripts/controllers/metadata/metadataDescription.coffee","app/scripts/controllers/metadata/metadataKeywords.coffee","app/scripts/controllers/metadata/metadataLanguage.coffee","app/scripts/controllers/metadata/metadataLocation.coffee","app/scripts/controllers/metadata/metadataOrganizations.coffee","app/scripts/controllers/metadata/metadataPeople.coffee","app/scripts/controllers/metadata/metadataShotType.coffee","app/scripts/controllers/metadata/metadataSummary.coffee","app/scripts/controllers/projects/projects.coffee","app/scripts/controllers/projects/projectsAdd.coffee","app/scripts/controllers/projects/projectsDetail.coffee","app/scripts/controllers/projects/projectsInformationEdit.coffee","app/scripts/controllers/search.coffee","app/scripts/controllers/sequences/sequencesAdd.coffee","app/scripts/controllers/sequences/sequencesDetail.coffee","app/scripts/controllers/sequences/sequencesInformationEdit.coffee","app/scripts/controllers/users/users.coffee","app/scripts/controllers/users/usersEdit.coffee","app/scripts/controllers/version.coffee","app/scripts/controllers/viewer.coffee","app/scripts/controllers/visualizations/visualizations.coffee","app/scripts/controllers/visualizations/visualizationsAdd.coffee","app/scripts/controllers/visualizations/visualizationsDetail.coffee","app/scripts/controllers/visualizations/visualizationsInformationEdit.coffee","app/scripts/directives/add.coffee","app/scripts/directives/events.coffee","app/scripts/directives/filtervalue.coffee","app/scripts/directives/holder.coffee","app/scripts/directives/metadata.coffee","app/scripts/directives/onRenderFinished.coffee","app/scripts/directives/p5.coffee","app/scripts/directives/processing.coffee","app/scripts/directives/search.coffee","app/scripts/directives/uiSelectRequired.coffee","app/scripts/directives/version.coffee","app/scripts/filters/capitalize.coffee","app/scripts/filters/generator.coffee","app/scripts/filters/guest.coffee","app/scripts/filters/metadata.coffee","app/scripts/filters/projectname.coffee","app/scripts/filters/propertyname.coffee","app/scripts/filters/trimunderscore.coffee","app/scripts/filters/unescape.coffee","app/scripts/initializers/google.coffee","app/scripts/initializers/listeners.coffee","app/scripts/initializers/loadingBar.coffee","app/scripts/initializers/metadata.coffee","app/scripts/initializers/promises.coffee","app/scripts/services/p5Factory.coffee","app/scripts/services/server.coffee","app/scripts/services/thumbnail.coffee","app/scripts/services/token.coffee","app/scripts/services/version.coffee"],"names":[],"mappings":"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","file":"_public/js/app.js","sourcesContent":["#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui', [\n  'ngRoute',\n  'ngResource',\n  'ngSanitize',\n  'ngCookies',\n  'ngAnimate',\n  'ui.bootstrap',\n  'ui.event',\n  'ui.validate',\n  'ui.scrollpoint',\n  'ui.select',\n  'ui.ace',\n  'ui.map',\n  'ui.tree',\n  'dialogs.main',\n  'dialogs.default-translations',\n  'elzoido.auth',\n  'elzoido.navigation',\n  'elzoido.messages',\n  'elzoido.promises',\n  'wu.masonry',\n  'duScroll',\n  'com.2fdevs.videogular',\n  'com.2fdevs.videogular.plugins.controls',\n  'com.2fdevs.videogular.plugins.overlayplay',\n  'com.2fdevs.videogular.plugins.poster',\n  'com.2fdevs.videogular.plugins.buffering',\n  'uiGmapgoogle-maps',\n  'angularFileUpload',\n  'angularLoad',\n  'angular-loading-bar'\n])","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').config ($routeProvider, $locationProvider) ->\n  # set up of the html5 mode\n  $locationProvider.html5Mode true\n\n  # routing defaults\n  $routeProvider\n  .when '/',\n    templateUrl: 'partials/dashboard.html'\n    controller: 'DashboardCtrl'\n  .when '/viewer/:project',\n    templateUrl: 'partials/viewer.html'\n    controller: 'ViewerCtrl'\n  .when '/projects',\n    templateUrl: 'partials/projects.html'\n    controller: 'ProjectsCtrl'\n  .when '/projects/:project',\n    templateUrl: 'partials/projectsDetail.html'\n    controller: 'ProjectsDetailCtrl'\n  .when '/sequences/:sequence',\n    templateUrl: 'partials/sequencesDetail.html'\n    controller: 'SequencesDetailCtrl'\n  .when '/visualizations',\n    templateUrl: 'partials/visualizations.html'\n    controller: 'VisualizationsCtrl'\n  .when '/visualizations/:visualization',\n    templateUrl: 'partials/visualizationsDetail.html'\n    controller: 'VisualizationsDetailCtrl'\n  .when '/libraries',\n    templateUrl: 'partials/libraries.html'\n    controller: 'LibrariesCtrl'\n  .when '/libraries/:library',\n    templateUrl: 'partials/librariesDetail.html'\n    controller: 'LibrariesDetailCtrl'\n  .when '/items/:item',\n    templateUrl: 'partials/itemsDetail.html'\n    controller: 'ItemsDetailCtrl'\n  .when '/users',\n    templateUrl: 'partials/users.html'\n    controller: 'UsersCtrl'\n  .when '/system/info',\n    templateUrl: 'partials/info.html'\n    controller: 'InfoCtrl'\n  .otherwise\n      redirectTo: '/'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').config(($httpProvider, elzoidoAuthModule) ->\n  # install elzoido auth into the application\n  $httpProvider.interceptors.push('elzoidoAuthInterceptor')\n\n  # static configuration elzoido auth plugin\n  elzoidoAuthModule.config.userProvider = 'apiUser'\n  elzoidoAuthModule.config.providersProvider = 'apiAuth'\n).run ($rootScope, $q, $window, $cookies, dialogs, elzoidoAuthModule, elzoidoAuthUser, elzoidoAuthAPI, elzoidoPromises, serviceToken, serviceServer, apiUser) ->\n  # dynamic configuration elzoido auth plugin\n  elzoidoAuthModule.config.functionProfile = ->\n    confirm = dialogs.create('partials/usersEdit.html', 'UsersEditCtrl', {user: elzoidoAuthUser.get()},\n      {size: 'lg', keyboard: false})\n    # result\n    confirm.result.then (wait) ->\n      wait.result.then ->\n        # fire event\n        $rootScope.$broadcast 'event:narra-user-updated'\n        # signin again to refresh current user data\n        elzoidoAuthAPI.signin()\n\n  elzoidoAuthModule.config.functionSignin = (provider) ->\n    # get deffered\n    deferred = $q.defer()\n    # token check\n    if !serviceToken.get()\n      # get deffered\n      dialogs.wait('Please wait', 'You are being authenticated right now ...')\n      # signin user\n      $window.location.href = serviceServer.url + '/auth/' + provider\n    # resolve\n    deferred.resolve true\n    # return promise\n    deferred.promise\n\n  elzoidoAuthModule.config.functionSignout = ->\n    # get deffered\n    deferred = $q.defer()\n    # signout user\n    apiUser.signout ->\n      # delete token\n      $cookies.remove('_narra_ui_token')\n      # redirect to root\n      $window.location.href = '/'\n      # resolve\n      deferred.resolve true\n    # return promise\n    deferred.promise\n\n  # create deffered object\n  authentication = $q.defer()\n\n  # register listener\n  $rootScope.$on 'event:elzoido-auth-user', ->\n    authentication.resolve true\n\n  # autosign check\n  if serviceToken.get()\n    elzoidoAuthAPI.signin()\n\n  elzoidoPromises.register('authentication', authentication.promise)","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').config (elzoidoNavigationModule) ->\n  # configuration elzoido navigation plugin\n  elzoidoNavigationModule.config.navigationTree = [\n    {\n      name: 'projects'\n      title: 'Projects'\n      url: '/projects'\n      access: 'admin,author'\n      items: []},\n    {\n      name: 'libraries'\n      title: 'Libraries'\n      url: '/libraries'\n      access: 'admin,author'\n      items: []},\n    {\n      name: 'visualizations'\n      title: 'Visualizations'\n      url: '/visualizations'\n      access: 'admin,author'\n      items: []},\n    {\n      name: 'system'\n      title: 'System'\n      access: 'admin'\n      url: '#'\n      items: [\n        {\n          name: 'information'\n          title: 'Information'\n          url: '/system/info'\n        },\n        {\n          name: 'users'\n          title: 'Users'\n          url: '/users'\n        }\n      ]}\n  ]","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/add.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<button class=\\\"btn btn-danger btn-xs navbar-btn dropdown-toggle\\\" type=\\\"button\\\" data-toggle=\\\"dropdown\\\"\\n        aria-expanded=\\\"false\\\">\\n    <span class=\\\"fa fa-plus\\\"></span> Add New <span class=\\\"caret\\\"></span>\\n</button>\\n<ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n    <li><a href=\\\"#\\\" ng-click=\\\"addItem()\\\">Add Item</a></li>\\n    <li class=\\\"divider\\\"></li>\\n    <li><a href=\\\"#\\\" ng-click=\\\"addLibrary()\\\">Add Library</a></li>\\n    <li><a href=\\\"#\\\" ng-click=\\\"addProject()\\\">Add Project</a></li>\\n    <li><a href=\\\"#\\\" ng-click=\\\"addSequence()\\\">Add Sequence</a></li>\\n    <li><a href=\\\"#\\\" ng-click=\\\"addVisualization()\\\">Add Visualization</a></li>\\n</ul>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/dashboard.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\" style=\\\"margin-top: 60px;\\\">\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\">\\n\\n            <div ng-hide=\\\"projects.length\\\" class=\\\"col-md-12 dashboard-item-empty\\\"><img src=\\\"/images/logo_header.png\\\"></div>\\n\\n            <div ng-repeat=\\\"project in projects\\\" class=\\\"col-md-12 dashboard-item pointer-hand\\\" style=\\\"width: 100%; height: 150px;\\\"\\n                 ng-mouseover=\\\"hover$index=true\\\" ng-mouseleave=\\\"hover$index=false\\\" ng-click=\\\"view(project)\\\">\\n                <div ng-repeat=\\\"thumbnail in project.thumbnails track by $index\\\"\\n                     ng-class=\\\"{'dashboard-item-image': hover$index}\\\"\\n                     class=\\\"background-cover\\\"\\n                     style=\\\"background-image: url('{{thumbnail}}'); width: 20%; height: 150px; float: left\\\"></div>\\n                <div class=\\\"dashboard-item-title\\\" ng-class=\\\"{'dashboard-item-title-anim': hover$index}\\\">\\n                    <h1>{{project.title}}</h1>\\n\\n                    <p>by {{project.author.name}}</p>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/events.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div ng-show=\\\"events.length\\\">\\n    <ul class=\\\"nav navbar-nav nav-pills dropdown-toggle\\\" data-toggle=\\\"dropdown\\\"\\n        role=\\\"tablist\\\">\\n        <li role=\\\"presentation\\\"><a href=\\\"#\\\">Queue <span class=\\\"badge\\\">{{events.length}}</span></a></li>\\n    </ul>\\n    <ul class=\\\"dropdown-menu queue\\\" role=\\\"menu\\\" style=\\\"width: 300px;\\\">\\n        <li ng-repeat=\\\"event in events\\\" ng-if=\\\"event.status == 'running'\\\">\\n            <p ng-if=\\\"event.item\\\">{{event.item.type | capitalize}} {{event.item.name}} is being processed</p>\\n            <p ng-if=\\\"event.library\\\">Library {{event.library.name}} is being purged</p>\\n            <p ng-if=\\\"event.project\\\">Project {{event.project.name}} is being synthesized</p>\\n\\n            <div ng-if=\\\"(event.item || event.project) && event.progress > 0\\\" class=\\\"progress\\\">\\n                <div class=\\\"progress-bar progress-bar-striped progress-bar-danger active\\\" role=\\\"progressbar\\\"\\n                     aria-valuenow=\\\"{{event.progress}}\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"\\n                     ng-style=\\\"{width: event.progress + '%'}\\\">\\n                    <span>{{event.message}}</span>\\n                </div>\\n            </div>\\n\\n            <div ng-if=\\\"event.library\\\" class=\\\"progress\\\">\\n                <div class=\\\"progress-bar progress-bar-striped progress-bar-danger active\\\" role=\\\"progressbar\\\"\\n                     aria-valuenow=\\\"100\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\"\\n                     style=\\\"width: 100%\\\">\\n                    <span>Please wait ...</span>\\n                </div>\\n            </div>\\n        </li>\\n        <li>\\n            <h1>\\n                <ng-pluralize count=\\\"events.length\\\"\\n                              when=\\\"{'one': 'There is 1 job in queue.', 'other': 'There are {} jobs in queue.'}\\\">\\n                </ng-pluralize>\\n            </h1>\\n        </li>\\n    </ul>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/generators/lemmatizer.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"text-center\\\">{{generator.description}}</div>\\n\\n<div style=\\\"margin-top: 20px;\\\" ng-repeat=\\\"(key, value) in generator.options\\\">\\n    <div class=\\\"form-group\\\">\\n        <label class=\\\"col-sm-6 control-label\\\">{{key|propertyname}}</label>\\n\\n        <div class=\\\"col-sm-6\\\">\\n            <input name=\\\"name\\\" ng-model=\\\"generator.options[key]\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                   type=\\\"text\\\"/>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/info.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\">\\n            <div class=\\\"bs-docs-section\\\" id=\\\"version\\\">\\n                <h5 class=\\\"page-header\\\">System Version</h5>\\n\\n                <div class=\\\"well\\\">\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt class=\\\"block-header\\\">narra-api</dt>\\n                        <dd>{{coreVersion}}</dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt class=\\\"block-header\\\">narra-ui</dt>\\n                        <dd>{{uiVersion}}</dd>\\n                    </dl>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"bs-docs-section\\\" id=\\\"modules\\\">\\n                <h5 class=\\\"page-header\\\">Modules</h5>\\n\\n                <div ng-repeat=\\\"module in coreModules\\\" class=\\\"well\\\">\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt class=\\\"block-header\\\">{{module.name}}</dt>\\n                        <dd></dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>version</dt>\\n                        <dd>{{module.version}}</dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>summary</dt>\\n                        <dd>{{module.summary}}</dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>description</dt>\\n                        <dd>{{module.description}}</dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>homepage</dt>\\n                        <dd><a href=\\\"{{module.homepage}}\\\" target=\\\"_blank\\\">{{module.homepage}}</a></dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>contact</dt>\\n                        <dd><a ng-repeat=\\\"email in module.email\\\" href=\\\"mailto: {{email}}\\\" target=\\\"_blank\\\">{{email}}<span\\n                                ng-hide=\\\"$last\\\">, </span></a></dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>authors</dt>\\n                        <dd><span ng-repeat=\\\"author in module.authors\\\">{{author}}<span ng-hide=\\\"$last\\\">, </span></span>\\n                        </dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>license</dt>\\n                        <dd>{{module.license}}</dd>\\n                    </dl>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/itemsAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new items</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newItem\\\" class=\\\"form-horizontal\\\">\\n        <div ng-if=\\\"!second && !third\\\">\\n            <textarea name=\\\"url\\\" ng-model=\\\"item.url\\\" class=\\\"form-control\\\" placeholder=\\\"Drop a list of URLs here\\\"\\n                      rows=\\\"10\\\" required></textarea>\\n        </div>\\n\\n        <div ng-if=\\\"second\\\">\\n            <div style=\\\"max-height: 400px; overflow-y: scroll; margin-bottom: 20px;\\\">\\n                <div ng-repeat=\\\"item in items\\\">\\n                    <div class=\\\"well well-sm\\\">\\n                        <div class=\\\"pull-left\\\">\\n                            <img src=\\\"{{item.thumbnail}}\\\" style=\\\"height: 70px;\\\">\\n                        </div>\\n                        <div style=\\\"margin-left: 120px;\\\">\\n                            <h4>{{item.name}}</h4>\\n\\n                            <p><span class=\\\"label label-danger\\\">{{item.type}}</span> <span\\n                                    class=\\\"label label-danger\\\">{{item.connector}}</span></p>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div ng-if=\\\"third\\\">\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n                <div class=\\\"col-sm-10\\\" ng-show=\\\"!author\\\">\\n                    <ui-select ng-model=\\\"item.author\\\" required>\\n                        <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                        <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}\\n                        </ui-select-choices>\\n                    </ui-select>\\n                </div>\\n\\n                <div class=\\\"col-sm-10\\\" style=\\\"margin-top: 7px;\\\" ng-show=\\\"author\\\">\\n                    <span class=\\\"text-muted\\\">Author is provided by all items.</span>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Library</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <ui-select ng-model=\\\"item.library\\\" required>\\n                        <ui-select-match placeholder=\\\"Pick a library\\\">{{$select.selected.name}}</ui-select-match>\\n                        <ui-select-choices repeat=\\\"library in libraries | filter:$select.search\\\">{{library.name}}\\n                        </ui-select-choices>\\n                    </ui-select>\\n                </div>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <span ng-if=\\\"second || third\\\" class=\\\"btn btn-default\\\" ng-click=\\\"back()\\\">Back</span>\\n    <span ng-if=\\\"!third\\\" class=\\\"btn btn-danger\\\" ng-click=\\\"next()\\\" ng-disabled=\\\"!newItem.$valid\\\">Next</span>\\n    <button ng-if=\\\"third\\\" class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newItem.$valid\\\"\\n            ng-click=\\\"new()\\\">Add Items\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/itemsDetail.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\">\\n            <h5 class=\\\"page-header\\\">\\n                <span ng-show=\\\"project\\\"><a href=\\\"/projects/{{project.name}}?tab=libraries\\\">{{project.title}}</a> / </span>\\n                <span ng-show=\\\"library\\\"><a href=\\\"/libraries/{{library.id}}?tab=items&project={{project.name}}\\\">{{library.name}}</a> / </span>\\n                {{item.name}}</h5>\\n\\n            <div ui-scrollpoint=\\\"+30\\\">\\n                <div class=\\\"pull-right\\\" ng-if=\\\"isAuthor() || isContributor()\\\">\\n                    <div class=\\\"btn-group\\\" uib-dropdown>\\n                        <button id=\\\"metadata\\\" class=\\\"btn btn-danger\\\" type=\\\"button\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-plus\\\"></span> Add Metadata <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"metadata\\\">\\n                            <li ng-repeat=\\\"provider in metadataProviders | orderBy:'name'\\\">\\n                                <a href=\\\"#\\\" ng-click=\\\"itemMetadata.add(provider)\\\">{{provider.name}}</a>\\n                            </li>\\n                        </ul>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" ng-show=\\\"generators.length\\\" uib-dropdown>\\n                        <button id=\\\"regenerate\\\" class=\\\"btn btn-danger\\\" type=\\\"button\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-repeat\\\"></span> Regenerate <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"regenerate\\\">\\n                            <li ng-repeat=\\\"generator in generators\\\">\\n                                <a href=\\\"#\\\"\\n                                   ng-click=\\\"itemMetadata.regenerate(generator.identifier)\\\">{{generator.title}}</a>\\n                            </li>\\n                        </ul>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" uib-dropdown>\\n                        <button id=\\\"actions\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-cog\\\"></span> <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"actions\\\">\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"delete()\\\">Delete</a></li>\\n                        </ul>\\n                    </div>\\n                </div>\\n\\n                <div ng-if=\\\"player.ready\\\"\\n                     ng-class=\\\"{'videogular-container': tabs.player.active, 'videogular-container-floating': !tabs.player.active}\\\">\\n                    <videogular vg-player-ready=\\\"onPlayerReady($API)\\\" vg-responsive=\\\"true\\\"\\n                                vg-cue-points=\\\"player.cuePoints\\\">\\n                        <vg-media vg-src=\\\"player.sources\\\"\\n                                  vg-tracks=\\\"player.tracks\\\" vg-preload=\\\"player.preload\\\">\\n                        </vg-media>\\n\\n                        <vg-controls vg-autohide=\\\"player.autoHide\\\" vg-autohide-time=\\\"player.autoHideTime\\\">\\n                            <vg-scrub-bar>\\n                                <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\\n                                <vg-scrub-bar-cue-points class=\\\"metadata\\\"\\n                                                         vg-cue-points=\\\"player.cuePoints.metadata\\\"></vg-scrub-bar-cue-points>\\n                            </vg-scrub-bar>\\n                            <vg-time-display>{{ timeLeft | date:'mm:ss' }}</vg-time-display>\\n                            <vg-volume>\\n                                <vg-mute-button></vg-mute-button>\\n                                <vg-volume-bar></vg-volume-bar>\\n                            </vg-volume>\\n                            <vg-fullscreen-button></vg-fullscreen-button>\\n                        </vg-controls>\\n\\n                        <vg-overlay-play></vg-overlay-play>\\n                        <vg-buffering></vg-buffering>\\n\\n                        <div ng-show=\\\"live\\\" class=\\\"my-logo-layer\\\">\\n                            <div class=\\\"alert alert-danger\\\" role=\\\"alert\\\"><strong>{{live.name}}</strong></br>\\n                                {{live.value}}\\n                            </div>\\n                        </div>\\n                    </videogular>\\n                </div>\\n            </div>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"Metadata\\\" active=\\\"tabs.metadata.active\\\">\\n                    <div narra-metadata-api=\\\"itemMetadata\\\" narra-metadata-type=\\\"item\\\" narra-metadata-data=\\\"item\\\"\\n                         narra-metadata-player=\\\"player.api\\\" narra-metadata-search=\\\"search\\\" narra-metadata-ui=\\\"true\\\"\\n                         narra-metadata></div>\\n                </uib-tab>\\n                <uib-tab ng-if=\\\"text\\\" heading=\\\"Text\\\" active=\\\"tabs.text.active\\\">\\n                    <div ui-ace=\\\"editorOption\\\" ng-model=\\\"text\\\"></div>\\n                </uib-tab>\\n                <uib-tab ng-if=\\\"player.ready\\\" heading=\\\"Player\\\" active=\\\"tabs.player.active\\\">\\n                    <div style=\\\"height: 500px;\\\"></div>\\n                </uib-tab>\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/libraries.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n\\n        <div ng-hide=\\\"myLibraries.length > 0 || contribLibraries.length > 0 || sharedLibraries.length > 0\\\"\\n             class=\\\"col-md-12 item-empty\\\">\\n            Create a new library clicking the red button.\\n        </div>\\n\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\" ng-show=\\\"myLibraries.length > 0 || contribLibraries.length > 0 || sharedLibraries.length > 0\\\">\\n\\n            <h5 class=\\\"page-header\\\">LIBRARIES</h5>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"My Libraries\\\" active=\\\"tabs.myLibraries.active\\\" ng-show=\\\"myLibraries.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\" ng-class=\\\"{'well-hover': !library.purged, 'pointer-hand': !library.purged, 'preparing': library.purged}\\\"\\n                                    ng-repeat=\\\"library in myLibraries | orderBy:'name'\\\">\\n                                    <span ng-if=\\\"!library.purged\\\">\\n                                        <span ng-show=\\\"library.shared\\\" class=\\\"label label-success narra-badge\\\">shared</span>\\n                                        <span ng-hide=\\\"library.shared\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    </span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-if=\\\"!library.purged\\\" ng-click=\\\"detail(library)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                        </div>\\n\\n                                        <div ng-if=\\\"library.purged\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                            <span style=\\\"font-size: 35px; position: absolute; right: 0px; opacity: 0.5;\\\">PURGED</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"My Contributions\\\" active=\\\"tabs.contribLibraries.active\\\"\\n                         ng-show=\\\"contribLibraries.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\" ng-class=\\\"{'well-hover': !library.purged, 'pointer-hand': !library.purged, 'preparing': library.purged}\\\"\\n                                    ng-repeat=\\\"library in contribLibraries | orderBy:'name'\\\">\\n                                    <span ng-if=\\\"!library.purged\\\">\\n                                        <span ng-show=\\\"library.shared\\\" class=\\\"label label-success narra-badge\\\">shared</span>\\n                                        <span ng-hide=\\\"library.shared\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    </span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-if=\\\"!library.purged\\\" ng-click=\\\"detail(library)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                        </div>\\n\\n                                        <div ng-if=\\\"library.purged\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                            <span style=\\\"font-size: 35px; position: absolute; right: 0px; opacity: 0.5;\\\">PURGED</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Shared Libraries\\\" active=\\\"tabs.sharedLibraries.active\\\"\\n                         ng-show=\\\"sharedLibraries.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\" ng-class=\\\"{'well-hover': !library.purged, 'pointer-hand': !library.purged, 'preparing': library.purged}\\\"\\n                                    ng-repeat=\\\"library in sharedLibraries | orderBy:'name'\\\">\\n                                    <span ng-if=\\\"!library.purged\\\">\\n                                        <span ng-show=\\\"library.shared\\\" class=\\\"label label-success narra-badge\\\">shared</span>\\n                                        <span ng-hide=\\\"library.shared\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    </span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-if=\\\"!library.purged\\\" ng-click=\\\"detail(library)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                        </div>\\n\\n                                        <div ng-if=\\\"library.purged\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                            <span style=\\\"font-size: 35px; position: absolute; right: 0px; opacity: 0.5;\\\">PURGED</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/librariesAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add a\\n    new library</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newLibrary\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input name=\\\"name\\\" ng-model=\\\"library.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                       ui-validate-async=\\\"{exists: 'validateName($value)' }\\\"\\n                       type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" required/>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newLibrary.name.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Already exists!</strong>\\n                <small>Library already exists.</small>\\n            </p>\\n        </div>\\n\\n        <div ng-show=\\\"newLibrary.name.$dirty && newLibrary.name.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Library name is required.</small>\\n            </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select ng-model=\\\"library.author\\\" ng-disabled=\\\"!user.isAdmin()\\\" ng-change=\\\"filter()\\\" required>\\n                    <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}</ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Project</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select ng-model=\\\"library.project\\\">\\n                    <ui-select-match placeholder=\\\"Pick a project (Optional)\\\">{{$select.selected.title}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"project in projects | filter:$select.search\\\">{{project.title}}</ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"library.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here (Optional)\\\" rows=\\\"5\\\"></textarea>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newLibrary.$valid\\\"\\n            ng-click=\\\"new()\\\">Add Library\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/librariesDetail.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\">\\n            <h5 class=\\\"page-header\\\">\\n                <span ng-show=\\\"project\\\"><a\\n                        href=\\\"/projects/{{project.name}}?tab=libraries\\\">{{project.title}}</a> / </span>\\n                {{library.name}}\\n            </h5>\\n\\n            <div ng-if=\\\"isAuthor() || isContributor()\\\" ui-scrollpoint=\\\"+30\\\">\\n                <div class=\\\"pull-right\\\">\\n                    <div class=\\\"btn-group\\\" ng-show=\\\"isSelected()\\\" uib-dropdown>\\n                        <button id=\\\"metadata\\\" class=\\\"btn btn-danger\\\" type=\\\"button\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-plus\\\"></span> Add Metadata To Selected <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu pull-right\\\" role=\\\"menu\\\" aria-labelledby=\\\"metadata\\\">\\n                            <li ng-repeat=\\\"provider in metadataProviders | orderBy:'name'\\\">\\n                                <a href=\\\"#\\\" ng-click=\\\"itemsMetadata.add(provider)\\\">{{provider.name}}</a>\\n                            </li>\\n                        </ul>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" ng-show=\\\"isSelected()\\\">\\n                        <button class=\\\"btn btn-danger\\\" ng-click=\\\"deleteItems()\\\">Delete Selected</button>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" ng-show=\\\"tabs.items.active\\\" uib-dropdown>\\n                        <button id=\\\"select\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" uib-dropdown-toggle>\\n                            Select <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu pull-right\\\" role=\\\"menu\\\" aria-labelledby=\\\"select\\\">\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"select(true)\\\">All</a></li>\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"select()\\\">None</a></li>\\n                        </ul>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" ng-show=\\\"library.generators.length > 0\\\" uib-dropdown>\\n                        <button id=\\\"regenerate\\\" class=\\\"btn btn-danger\\\" type=\\\"button\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-repeat\\\"></span> Regenerate <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu pull-right\\\" role=\\\"menu\\\" ng-controller=\\\"AddCtrl\\\"\\n                            aria-labelledby=\\\"regenerate\\\">\\n                            <li ng-repeat=\\\"generator in library.generators\\\">\\n                                <a href=\\\"#\\\" ng-click=\\\"libraryMetadata.regenerate(generator.identifier)\\\">{{generator.title}}</a>\\n                            </li>\\n                        </ul>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" uib-dropdown>\\n                        <button id=\\\"settings\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-cog\\\"></span> <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu pull-right\\\" role=\\\"menu\\\" aria-labelledby=\\\"settings\\\">\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"libraryMetadata.add()\\\">Add Metadata</a></li>\\n                            <li class=\\\"divider\\\"></li>\\n                            <li role=\\\"menuitem\\\" ng-show=\\\"isAuthor() || isContributor()\\\"><a href=\\\"#\\\" ng-click=\\\"edit()\\\">Settings</a>\\n                            </li>\\n                            <li role=\\\"menuitem\\\" ng-show=\\\"isAuthor()\\\"><a href=\\\"#\\\" ng-click=\\\"deleteLibrary()\\\">Delete</a>\\n                            </li>\\n                        </ul>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"Library\\\" active=\\\"tabs.library.active\\\">\\n                    <div>\\n                        <span ng-show=\\\"library.shared\\\" class=\\\"label label-success narra-badge\\\">shared</span>\\n                        <span ng-hide=\\\"library.shared\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n\\n                        <div ng-repeat=\\\"thumbnail in library.thumbnails track by $index\\\"\\n                             class=\\\"background-cover\\\"\\n                             style=\\\"background-image: url('{{thumbnail}}'); background-size: contain; width: 20%; height: 100px; float: left; margin-bottom: 10px;\\\"></div>\\n                        <div class=\\\"well\\\">\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt class=\\\"block-header\\\">{{library.name}}</dt>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>description</dt>\\n                                <dd>{{library.description}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>author</dt>\\n                                <dd>{{library.author.name}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>contributors</dt>\\n                                <dd><span ng-repeat=\\\"contributor in library.contributors\\\">{{contributor.name}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span ng-show=\\\"library.contributors.length == 0\\\"\\n                                                                              class=\\\"text-muted\\\">There is no contributors in this library.</span>\\n                                </dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>generators</dt>\\n                                <dd><span ng-repeat=\\\"generator in library.generators\\\">{{generator.title}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span ng-show=\\\"library.generators.length == 0\\\"\\n                                                                              class=\\\"text-muted\\\">There is no generators assigned to this library.</span>\\n                                </dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\" ng-hide=\\\"project\\\">\\n                                <dt>projects</dt>\\n                                <dd><span ng-repeat=\\\"project in library.projects\\\">{{project.title}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span ng-show=\\\"library.projects.length == 0\\\"\\n                                                                              class=\\\"text-muted\\\">There is no projects using this library.</span>\\n                                </dd>\\n                            </dl>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Items\\\" active=\\\"tabs.items.active\\\" disable=\\\"items.length == 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\" ng-class=\\\"{'well-hover': item.prepared, 'pointer-hand': item.prepared, 'preparing': !item.prepared}\\\"\\n                                    ng-repeat=\\\"item in filtered = (items | filter:global.search) | orderBy:'name'\\\">\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <input ng-if=\\\"(isAuthor() || isContributor()) && item.prepared\\\" type=\\\"checkbox\\\"\\n                                               ng-model=\\\"item.selected\\\">\\n\\n                                        <div ng-if=\\\"item.prepared\\\" ng-click=\\\"detail(item)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 30px;\\\">\\n                                            <img src=\\\"{{thumbnail[item.name]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{item.name|uppercase}}</span>\\n                                            <small ng-show=\\\"item.keywords\\\">{{item.keywords}}</small>\\n                                        </div>\\n\\n                                        <div ng-if=\\\"!item.prepared\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 30px;\\\">\\n                                            <img src=\\\"{{thumbnail[item.name]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{item.name|uppercase}}</span>\\n                                            <span style=\\\"font-size: 35px; position: absolute; right: 0px; opacity: 0.5;\\\">PREPARING</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Metadata\\\" active=\\\"tabs.metadata.active\\\" disable=\\\"library.metadata.length == 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div narra-metadata-api=\\\"libraryMetadata\\\" narra-metadata-type=\\\"library\\\"\\n                             narra-metadata-data=\\\"library\\\" narra-metadata-ui=\\\"true\\\"\\n                             narra-metadata></div>\\n                        <span narra-metadata-api=\\\"itemsMetadata\\\" narra-metadata-type=\\\"items\\\"\\n                              narra-metadata-data=\\\"selectedItems\\\"\\n                              narra-metadata></span>\\n                    </div>\\n                </uib-tab>\\n\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/librariesInformationEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-edit\\\"></span> {{initial.name}}</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editLibrary\\\" class=\\\"form-horizontal\\\">\\n        <uib-tabset type=\\\"pills\\\">\\n            <uib-tab heading=\\\"Library\\\">\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input name=\\\"name\\\" ng-model=\\\"library.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                               ui-validate=\\\"{exists: 'validateName($value)' }\\\"\\n                               type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" required/>\\n                    </div>\\n                </div>\\n\\n                <div ng-show=\\\"editLibrary.name.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Already exists!</strong>\\n                        <small>Library already exists.</small>\\n                    </p>\\n                </div>\\n\\n                <div ng-show=\\\"editLibrary.name.$dirty && editLibrary.name.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Required!</strong>\\n                        <small>Library name is required.</small>\\n                    </p>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"library.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here\\\" rows=\\\"5\\\"></textarea>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <ui-select ng-model=\\\"library.author\\\" ng-disabled=\\\"!isAuthor()\\\" ng-change=\\\"filter()\\\"\\n                                   required>\\n                            <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Shared</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"library.shared\\\" ng-disabled=\\\"!isAuthor()\\\"><span class=\\\"text-muted\\\"\\n                                                                               style=\\\"margin-left: 10px;\\\">Turn this library into the shared mode</span>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Contributors\\\" disable=\\\"(contributors.length == 0 && library.contributors == 0) || !isAuthor()\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <ui-select ng-model=\\\"contributor.selected\\\"\\n                                   theme=\\\"bootstrap\\\"\\n                                   reset-search-input=\\\"true\\\"\\n                                   on-select=\\\"addContribution($select.selected)\\\"\\n                                   style=\\\"width: 300px;\\\">\\n                            <ui-select-match placeholder=\\\"Select a contributor...\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"contributor in contributors\\\"\\n                                               refresh-delay=\\\"0\\\">\\n                                <div ng-bind-html=\\\"contributor.name | highlight: $select.search\\\"></div>\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-show=\\\"library.contributors.length == 0\\\" style=\\\"text-align: center; color: grey;\\\">Select\\n                                a user you would like to be a part of the project.\\n                            </div>\\n                            <div ng-hide=\\\"library.contributors.length == 0\\\">\\n                                <ul class=\\\"list-group\\\">\\n                                    <li class=\\\"list-group-item\\\" ng-repeat=\\\"contributor in library.contributors\\\">\\n                                        {{contributor.name}} <span class=\\\"fa fa-times pull-right pointer-hand\\\" ng-click=\\\"removeContribution(contributor)\\\"></span>\\n                                    </li>\\n                                </ul>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Generators\\\" disable=\\\"generators.length == 0\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\"\\n                                    ng-class=\\\"{'plugin-selected': isSelected(g), 'pointer-hand': g.active}\\\"\\n                                    ng-repeat=\\\"g in generators\\\"\\n                                    ng-click=\\\"select(g)\\\">\\n                                    <input type=\\\"checkbox\\\" ng-model=\\\"g.active\\\" ng-change=\\\"activate(g)\\\"> {{g.title}}\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-if=\\\"!generator\\\" style=\\\"text-align: center; color: grey;\\\">Select generator you\\n                                would like to set up.\\n                            </div>\\n                            <div ng-if=\\\"generator\\\"\\n                                 ng-include=\\\"'partials/generators/' + generator.identifier + '.html'\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n        </uib-tabset>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editLibrary.$valid\\\"\\n            ng-click=\\\"edit()\\\">Save Library\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadata.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div ng-if=\\\"ui\\\">\\n    <div ng-switch=\\\"type\\\">\\n        <div ng-switch-when=\\\"item\\\">\\n            <div ng-show=\\\"(generators | filter:search | orderBy:'name').length == 0\\\" class=\\\"dashboard-item-empty\\\">Any\\n                library meets you search criteria.\\n            </div>\\n\\n            <div ng-hide=\\\"filtered.length == 0\\\" class=\\\"well\\\" ng-repeat=\\\"generator in meta | orderBy:'name'\\\"\\n                 id=\\\"meta-{{generator.name}}\\\">\\n                <dl class=\\\"dl-horizontal\\\">\\n                    <dt class=\\\"block-header\\\">{{generator.name | generator}}</dt>\\n                    <dd></dd>\\n                </dl>\\n                <dl class=\\\"dl-horizontal\\\"\\n                    ng-repeat=\\\"entry in filtered = (generator.data | filter:search | orderBy:'name')\\\"\\n                    ng-mouseover=\\\"hover$index=true\\\" ng-mouseleave=\\\"hover$index=false\\\">\\n                    <dt>{{ entry.name | metadata }}</dt>\\n                    <dd><span ng-show=\\\"isLink(entry.value)\\\"><a href=\\\"{{entry.value}}\\\"\\n                                                               target=\\\"_blank\\\">{{entry.value}}</a></span><span\\n                            ng-hide=\\\"isLink(entry.value)\\\">{{entry.value}}</span>\\n                        <div class=\\\"btn-group\\\" ng-show=\\\"hover$index && generator.name != 'source' && (isAuthor() || isContributor())\\\">\\n                        <button\\n                                class=\\\"btn btn-danger btn-xs\\\"\\n                                ng-click=\\\"edit(entry)\\\">Edit\\n                        </button>\\n                        </div>\\n                    <span ng-repeat=\\\"mark in entry.marks\\\" class=\\\"fa fa-bookmark bookmark-hover\\\"\\n                          ng-click=\\\"seek(mark.in)\\\"></span></dd>\\n                </dl>\\n            </div>\\n        </div>\\n        <div ng-switch-when=\\\"library\\\">\\n            <div ng-hide=\\\"filtered.length == 0\\\" class=\\\"well\\\">\\n                <dl class=\\\"dl-horizontal\\\" ng-repeat=\\\"entry in filtered = (meta | filter:search | orderBy:'name')\\\"\\n                    ng-mouseover=\\\"hover$index=true\\\" ng-mouseleave=\\\"hover$index=false\\\">\\n                    <dt>{{ entry.name | metadata }}</dt>\\n                    <dd>\\n                    <span ng-show=\\\"isLink(entry.value)\\\">\\n                        <a href=\\\"{{entry.value}}\\\" target=\\\"_blank\\\">{{entry.value}}</a>\\n                    </span>\\n                        <span ng-hide=\\\"isLink(entry.value)\\\">{{entry.value}}</span>\\n                        <button ng-show=\\\"hover$index\\\" class=\\\"btn btn-danger btn-xs\\\" ng-click=\\\"edit(entry)\\\">Edit</button>\\n                    </dd>\\n                </dl>\\n            </div>\\n        </div>\\n        <div ng-switch-when=\\\"project\\\">\\n            <div ng-hide=\\\"filtered.length == 0\\\" class=\\\"well\\\">\\n                <dl class=\\\"dl-horizontal\\\" ng-repeat=\\\"entry in filtered = (meta | filter:search | orderBy:'name')\\\"\\n                    ng-mouseover=\\\"hover$index=true\\\" ng-mouseleave=\\\"hover$index=false\\\">\\n                    <dt>{{ entry.name | metadata }}</dt>\\n                    <dd>\\n                    <span ng-show=\\\"isLink(entry.value)\\\">\\n                        <a href=\\\"{{entry.value}}\\\" target=\\\"_blank\\\">{{entry.value}}</a>\\n                    </span>\\n                        <span ng-hide=\\\"isLink(entry.value)\\\">{{entry.value}}</span>\\n                        <button ng-show=\\\"hover$index\\\" class=\\\"btn btn-danger btn-xs\\\" ng-click=\\\"edit(entry)\\\">Edit</button>\\n                    </dd>\\n                </dl>\\n            </div>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataAuthorAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Author Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type author...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"author in authors | filter:$select.search\\\">\\n                      {{author}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataAuthorEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Author Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type author...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"author in authors | filter:$select.search\\\">\\n                      {{author}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataCustomAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Custom Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input name=\\\"name\\\" ng-model=\\\"meta.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\" ui-validate=\\\"{exists: 'validateName($value)' }\\\"\\n                       type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" required/>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newMeta.name.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Already exists!</strong>\\n                <small>Metadata with same name already exists.</small>\\n            </p>\\n        </div>\\n\\n        <div ng-show=\\\"newMeta.name.$dirty && newMeta.name.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Name is required.</small>\\n            </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Value</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"value\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a value here\\\" rows=\\\"5\\\" required></textarea>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newMeta.value.$dirty && newMeta.value.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Value is required.</small>\\n            </p>\\n        </div>\\n\\n        <div ng-show=\\\"mark\\\" class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Marks</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <div class=\\\"checkbox\\\">\\n                    <label>\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"mark.use\\\">\\n                        Use marks to restrict area\\n                    </label>\\n                </div>\\n\\n                <span ng-class=\\\"{'text-muted': !mark.use}\\\">Mark in <input ng-disabled=\\\"!mark.use\\\" type=\\\"number\\\" ng-model=\\\"mark.in\\\" min=\\\"0\\\" max=\\\"{{mark.out || mark.max}}\\\" style=\\\"width: 50px;\\\"/>\\n                Mark out <input ng-disabled=\\\"!mark.use\\\" type=\\\"number\\\" ng-model=\\\"mark.out\\\" min=\\\"{{mark.in}}\\\" max=\\\"{{mark.max}}\\\" style=\\\"width: 50px;\\\"/></span>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataCustomEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Custom Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input name=\\\"name\\\" ng-model=\\\"meta.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                       type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" disabled/>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Value</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"value\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter an url here\\\" rows=\\\"5\\\" required></textarea>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"editMeta.value.$dirty && editMeta.value.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Value is required.</small>\\n            </p>\\n        </div>\\n\\n        <div ng-show=\\\"mark\\\" class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Marks</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <div class=\\\"checkbox\\\">\\n                    <label>\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"mark.use\\\"/>\\n                        Use marks to restrict area\\n                    </label>\\n                </div>\\n\\n                <span ng-class=\\\"{'text-muted': !mark.use}\\\">Mark in <input ng-disabled=\\\"!mark.use\\\" type=\\\"number\\\" ng-model=\\\"mark.in\\\" min=\\\"0\\\" max=\\\"{{mark.out || mark.max}}\\\" style=\\\"width: 50px;\\\"/>\\n                Mark out <input ng-disabled=\\\"!mark.use\\\" type=\\\"number\\\" ng-model=\\\"mark.out\\\" min=\\\"{{mark.in}}\\\" max=\\\"{{mark.max}}\\\" style=\\\"width: 50px;\\\"/></span>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataDescriptionAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Description Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"value\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here\\\" rows=\\\"5\\\" required></textarea>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newMeta.value.$dirty && newMeta.value.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Value is required.</small>\\n            </p>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataDescriptionEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Description Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"value\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here\\\" rows=\\\"5\\\" required></textarea>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"editMeta.value.$dirty && editMeta.value.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Value is required.</small>\\n            </p>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataKeywordsAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Keywords Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Keywords</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type keyword...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"keyword in keywords | filter:$select.search\\\">\\n                      {{keyword}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataKeywordsEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Keywords Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Keywords</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type keyword...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"keyword in keywords | filter:$select.search\\\">\\n                      {{keyword}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataLanguageAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Language Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Language</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select name=\\\"value\\\" ng-model=\\\"meta.value\\\" required>\\n                    <ui-select-match placeholder=\\\"Select language...\\\">{{languages[$select.selected].name}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"code in codes | filter:$select.search\\\">\\n                        <div ng-bind-html=\\\"code | highlight: $select.search\\\"></div>\\n                          <small><span ng-bind-html=\\\"languages[code].name | highlight: $select.search\\\"></span> (<span ng-bind-html=\\\"languages[code].nativeName | highlight: $select.search\\\"></span>)</small>\\n                    </ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataLanguageEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Language Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Language</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select name=\\\"value\\\" ng-model=\\\"meta.value\\\" required>\\n                    <ui-select-match placeholder=\\\"Select language...\\\">{{languages[$select.selected].name}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"code in codes | filter:$select.search\\\">\\n                        <div ng-bind-html=\\\"code | highlight: $select.search\\\"></div>\\n                          <small><span ng-bind-html=\\\"languages[code].name | highlight: $select.search\\\"></span> (<span ng-bind-html=\\\"languages[code].nativeName | highlight: $select.search\\\"></span>)</small>\\n                    </ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataLocationAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Location Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\" ng-if=\\\"ready\\\">\\n            <div id=\\\"map_canvas\\\" ui-map=\\\"map\\\" class=\\\"map-canvas\\\" ui-event=\\\"{'map-click': 'setMarkerPosition($event, $params)', 'map-tilesloaded': 'mapTilesLoaded(map)'}\\\"\\n                ui-options=\\\"mapOptions\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Location</label>\\n\\n            <div class=\\\"col-sm-9\\\">\\n                <input name=\\\"location\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                       type=\\\"text\\\" placeholder=\\\"Enter a coordinates here\\\" disabled required/>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataLocationEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Location Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\" ng-if=\\\"ready\\\">\\n            <div id=\\\"map_canvas\\\" ui-map=\\\"map\\\" class=\\\"map-canvas\\\" ui-event=\\\"{'map-click': 'setMarkerPosition($event, $params)', 'map-tilesloaded': 'mapTilesLoaded(map)'}\\\"\\n                ui-options=\\\"mapOptions\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Location</label>\\n\\n            <div class=\\\"col-sm-9\\\">\\n                <input name=\\\"location\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                       type=\\\"text\\\" placeholder=\\\"Enter a coordinates here\\\" disabled required/>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataOrganizationsAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Organizations Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Organizations</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type organization...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"organization in organizations | filter:$select.search\\\">\\n                      {{organization}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataOrganizationsEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Organizations Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Organizations</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type organization...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"organization in organizations track by $index | filter:$select.search\\\">\\n                      {{organization}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataPeopleAdd.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new People Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">People</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type people...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"person in people | filter:$select.search\\\">\\n                      {{person}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataPeopleEdit.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit People Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">People</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"meta.value\\\" sortable=\\\"true\\\" style=\\\"width: 100%;\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select or type people...\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"person in people | filter:$select.search\\\">\\n                      {{person}}\\n                    </ui-select-choices>\\n                 </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataShotTypeAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Shot Type Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Shot Type</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select name=\\\"value\\\" multiple ng-model=\\\"meta.value\\\" style=\\\"width: 100%;\\\" rows=\\\"5\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select shot types\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"shot in shots | filter:$select.search\\\">{{shot}}</ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataShotTypeEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Shot Type Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Shot Type</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select name=\\\"value\\\" multiple ng-model=\\\"meta.value\\\" style=\\\"width: 100%;\\\" rows=\\\"5\\\" ui-validate=\\\" '$value.length' \\\">\\n                    <ui-select-match placeholder=\\\"Select shot types\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"shot in shots | filter:$select.search\\\">{{shot}}</ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataSummaryAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new Summary Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Summary</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"value\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a summary here\\\" rows=\\\"2\\\" required></textarea>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newMeta.value.$dirty && newMeta.value.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Value is required.</small>\\n            </p>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newMeta.$valid\\\"\\n            ng-click=\\\"add()\\\">Add Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/metadata/metadataSummaryEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Edit Summary Metadata</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editMeta\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Summary</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"value\\\" ng-model=\\\"meta.value\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a summary here\\\" rows=\\\"2\\\" required></textarea>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"editMeta.value.$dirty && editMeta.value.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Value is required.</small>\\n            </p>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-click=\\\"delete()\\\">Delete</button>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editMeta.$valid\\\"\\n            ng-click=\\\"edit()\\\">Update Meta\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/projects.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n\\n        <div ng-hide=\\\"projects.length > 0 || contributions.length > 0\\\" class=\\\"col-md-12 item-empty\\\">\\n            Create a new project clicking the red button.\\n        </div>\\n\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\" ng-show=\\\"projects.length > 0 || contributions.length > 0\\\">\\n\\n            <h5 class=\\\"page-header\\\">PROJECTS</h5>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"My Projects\\\" active=\\\"tabs.myProjects.active\\\" ng-show=\\\"projects.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item pointer-hand well-hover\\\"\\n                                    ng-repeat=\\\"project in projects | orderBy:'name'\\\">\\n                                    <span ng-show=\\\"project.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                                    <span ng-hide=\\\"project.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-click=\\\"detail(project)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{project.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{project.title|uppercase}}</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"My Contributions\\\" active=\\\"tabs.contribProjects.active\\\" ng-show=\\\"contributions.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item pointer-hand well-hover\\\"\\n                                    ng-repeat=\\\"project in contributions | orderBy:'name'\\\">\\n                                    <span ng-show=\\\"project.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                                    <span ng-hide=\\\"project.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-click=\\\"detail(project)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{project.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{project.title|uppercase}}</span>\\n                                            <small>by <strong>{{project.author.name}}</strong></small>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/projectsAdd.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add a\\n    new project</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newProject\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Title</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input name=\\\"title\\\" ng-model=\\\"project.title\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                       ui-validate-async=\\\"{exists: 'validateTitle($value)' }\\\"\\n                       type=\\\"text\\\" placeholder=\\\"Enter a title here\\\" required/>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newProject.title.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Already exists!</strong>\\n                <small>Project with same title already exists.</small>\\n            </p>\\n        </div>\\n\\n        <div ng-show=\\\"newProject.title.$dirty && newProject.title.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Project title is required.</small>\\n            </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input name=\\\"name\\\" ng-model=\\\"project.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                       ui-validate-async=\\\"{exists: 'validateName($value)' }\\\"\\n                       type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" filtervalue=\\\"projectname\\\" required/>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newProject.name.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Already exists!</strong>\\n                <small>Project already exists.</small>\\n            </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select ng-model=\\\"project.author\\\" ng-disabled=\\\"!user.isAdmin()\\\" ng-change=\\\"filter()\\\" required>\\n                    <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}</ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"newProject.name.$dirty && newProject.name.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Project name is required.</small>\\n            </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"project.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here (Optional)\\\" rows=\\\"5\\\"></textarea>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newProject.$valid\\\"\\n            ng-click=\\\"new()\\\">Add Project\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/projectsDetail.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\">\\n\\n            <h5 class=\\\"page-header\\\">{{project.title}}</h5>\\n\\n            <div ui-scrollpoint=\\\"+30\\\">\\n                <div class=\\\"pull-right\\\">\\n                    <div class=\\\"btn-group\\\" uib-dropdown>\\n                        <button id=\\\"single-button\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-cog\\\"></span> <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"single-button\\\">\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"projectMetadata.add()\\\">Add Metadata</a></li>\\n                            <li class=\\\"divider\\\"></li>\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"edit()\\\">Settings</a></li>\\n                            <li role=\\\"menuitem\\\" ng-show=\\\"isAuthor()\\\"><a href=\\\"#\\\" ng-click=\\\"delete()\\\">Delete</a></li>\\n                        </ul>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"Project\\\" active=\\\"tabs.project.active\\\">\\n                    <div>\\n                        <span ng-show=\\\"project.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                        <span ng-hide=\\\"project.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n\\n                        <div ng-repeat=\\\"thumbnail in project.thumbnails track by $index\\\"\\n                             class=\\\"background-cover\\\"\\n                             style=\\\"background-image: url('{{thumbnail}}'); background-size: contain; width: 20%; height: 100px; float: left; margin-bottom: 10px;\\\"></div>\\n                        <div class=\\\"well\\\">\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>description</dt>\\n                                <dd>{{project.description}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>author</dt>\\n                                <dd>{{project.author.name}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>contributors</dt>\\n                                <dd><span ng-repeat=\\\"contributor in project.contributors\\\">{{contributor.name}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span ng-show=\\\"project.contributors.length == 0\\\"\\n                                                                              class=\\\"text-muted\\\">There is no contributors in this project.</span>\\n                                </dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>synthesizers</dt>\\n                                <dd><span ng-repeat=\\\"synthesizer in project.synthesizers\\\">{{synthesizer.title}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span ng-show=\\\"project.synthesizers.length == 0\\\"\\n                                                                              class=\\\"text-muted\\\">There is no synthesizers assigned to this project.</span>\\n                                </dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>visualizations</dt>\\n                                <dd><span\\n                                        ng-repeat=\\\"visualization in project.visualizations\\\">{{visualization.name}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span\\n                                        ng-show=\\\"project.visualizations.length == 0\\\"\\n                                        class=\\\"text-muted\\\">There is no visualizations assigned to this project.</span>\\n                                </dd>\\n                            </dl>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Libraries\\\" active=\\\"tabs.libraries.active\\\" disable=\\\"project.libraries.length == 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\" ng-class=\\\"{'well-hover': !library.purged, 'pointer-hand': !library.purged, 'preparing': library.purged}\\\"\\n                                    ng-repeat=\\\"library in project.libraries | orderBy:'name'\\\">\\n                                    <span ng-if=\\\"!library.purged\\\">\\n                                        <span ng-show=\\\"library.shared\\\" class=\\\"label label-success narra-badge\\\">shared</span>\\n                                        <span ng-hide=\\\"library.shared\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    </span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-if=\\\"!library.purged\\\" ng-click=\\\"detailLibrary(library)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                        </div>\\n\\n                                        <div ng-if=\\\"library.purged\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{library.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{library.name|uppercase}}</span>\\n                                            <span style=\\\"font-size: 35px; position: absolute; right: 0px; opacity: 0.5;\\\">PURGED</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Sequences\\\" active=\\\"tabs.sequences.active\\\" disable=\\\"sequences.length == 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\" ng-class=\\\"{'well-hover': sequence.prepared, 'pointer-hand': sequence.prepared, 'preparing': !sequence.prepared}\\\"\\n                                    ng-repeat=\\\"sequence in sequences | orderBy:'name'\\\">\\n                                    <span ng-if=\\\"sequence.prepared\\\">\\n                                        <span ng-show=\\\"sequence.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                                        <span ng-hide=\\\"sequence.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    </span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-if=\\\"sequence.prepared\\\" ng-click=\\\"detailSequence(sequence)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{sequence.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{sequence.name|uppercase}}</span>\\n                                        </div>\\n\\n                                        <div ng-if=\\\"!sequence.prepared\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{sequence.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{sequence.name|uppercase}}</span>\\n                                            <span style=\\\"font-size: 35px; position: absolute; right: 0px; opacity: 0.5;\\\">PREPARING</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Visualizations\\\" active=\\\"tabs.visualizations.active\\\" disable=\\\"visualizations.length == 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item pointer-hand well-hover\\\"\\n                                    ng-repeat=\\\"visualization in visualizations | orderBy:'name'\\\">\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-click=\\\"preview(visualization)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{visualization.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{visualization.name|uppercase}}</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Junctions\\\" active=\\\"tabs.junctions.active\\\" disable=\\\"isEmpty(junctions)\\\">\\n                    <uib-tabset type=\\\"pills\\\">\\n                        <uib-tab ng-repeat=\\\"synthesizer in project.synthesizers\\\" heading=\\\"{{synthesizer.title}}\\\">\\n                            <div class=\\\"tab-content\\\">\\n                                <div class=\\\"row\\\">\\n                                    <ul class=\\\"list-group\\\">\\n                                        <li class=\\\"list-group-item\\\" style=\\\"background-color: rgb({{getColor(junction.weight)}},{{getColor(junction.weight)}},{{getColor(junction.weight)}});\\\"\\n                                            ng-repeat=\\\"junction in junctions[synthesizer.identifier] | orderBy:'name'\\\">\\n                                            <div class=\\\"input-item-overlay\\\">\\n                                                <div class=\\\"small-item-overlay\\\"\\n                                                     style=\\\"margin-left: 10px;\\\">\\n                                                    <img ng-repeat=\\\"item in junction.items\\\" src=\\\"{{item.thumbnail}}\\\" height=\\\"50\\\">\\n                                                    <span style=\\\"margin-left: 20px;\\\"><strong>{{getItem(junction.direction.from, junction.items).name}}</strong> => <strong>{{getItem(junction.direction.to, junction.items).name}}</strong></span><small class=\\\"pull-right\\\">weight <strong>{{junction.weight}}</strong></small>\\n                                                </div>\\n                                            </div>\\n                                        </li>\\n                                    </ul>\\n                                </div>\\n                            </div>\\n                        </uib-tab>\\n                    </uib-tabset>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Metadata\\\" active=\\\"tabs.metadata.active\\\" disable=\\\"project.metadata.length == 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div narra-metadata-api=\\\"projectMetadata\\\" narra-metadata-type=\\\"project\\\"\\n                             narra-metadata-data=\\\"project\\\" narra-metadata-ui=\\\"true\\\" narra-metadata></div>\\n                    </div>\\n                </uib-tab>\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/projectsInformationEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-edit\\\"></span> {{initial.title}}</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editProject\\\" class=\\\"form-horizontal\\\">\\n        <uib-tabset type=\\\"pills\\\">\\n            <uib-tab heading=\\\"Project\\\">\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Title</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input name=\\\"title\\\" ng-model=\\\"project.title\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                               ui-validate=\\\"{exists: 'validateTitle($value)' }\\\"\\n                               type=\\\"text\\\" placeholder=\\\"Enter a title here\\\" required/>\\n                    </div>\\n                </div>\\n\\n                <div ng-show=\\\"editProject.title.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Already exists!</strong>\\n                        <small>Project with same title already exists.</small>\\n                    </p>\\n                </div>\\n\\n                <div ng-show=\\\"editProject.title.$dirty && editProject.title.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Required!</strong>\\n                        <small>Project title is required.</small>\\n                    </p>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input name=\\\"name\\\" ng-model=\\\"project.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                               ui-validate=\\\"{exists: 'validateName($value)' }\\\"\\n                               type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" filtervalue=\\\"projectname\\\" required/>\\n                    </div>\\n                </div>\\n\\n                <div ng-show=\\\"editProject.name.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Already exists!</strong>\\n                        <small>Project already exists.</small>\\n                    </p>\\n                </div>\\n\\n                <div ng-show=\\\"editProject.name.$dirty && editProject.name.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Required!</strong>\\n                        <small>Project name is required.</small>\\n                    </p>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"project.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here\\\" rows=\\\"5\\\"></textarea>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <ui-select ng-model=\\\"project.author\\\" ng-disabled=\\\"!isAuthor()\\\" ng-change=\\\"filter()\\\"\\n                                   required>\\n                            <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Public</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"project.public\\\" ng-disabled=\\\"!isAuthor()\\\"><span class=\\\"text-muted\\\"\\n                                                                               style=\\\"margin-left: 10px;\\\">Turn this project into the public mode</span>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Contributors\\\" disable=\\\"(contributors.length == 0 && project.contributors == 0) || !isAuthor()\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <ui-select ng-model=\\\"contributor.selected\\\"\\n                                   theme=\\\"bootstrap\\\"\\n                                   reset-search-input=\\\"true\\\"\\n                                   on-select=\\\"addContribution($select.selected)\\\"\\n                                   style=\\\"width: 300px;\\\">\\n                            <ui-select-match placeholder=\\\"Select a contributor...\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"contributor in contributors\\\"\\n                                               refresh-delay=\\\"0\\\">\\n                                <div ng-bind-html=\\\"contributor.name | highlight: $select.search\\\"></div>\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-show=\\\"project.contributors.length == 0\\\" style=\\\"text-align: center; color: grey;\\\">Select\\n                                a user you would like to be a part of the project.\\n                            </div>\\n                            <div ng-hide=\\\"project.contributors.length == 0\\\">\\n                                <ul class=\\\"list-group\\\">\\n                                    <li class=\\\"list-group-item\\\" ng-repeat=\\\"contributor in project.contributors\\\">\\n                                        {{contributor.name}} <span class=\\\"fa fa-times pull-right pointer-hand\\\" ng-click=\\\"removeContribution(contributor)\\\"></span>\\n                                    </li>\\n                                </ul>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Libraries\\\" disable=\\\"(libraries.length == 0 && project.libraries == 0) || !isAuthor()\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <ui-select ng-model=\\\"library.selected\\\"\\n                                   theme=\\\"bootstrap\\\"\\n                                   reset-search-input=\\\"true\\\"\\n                                   on-select=\\\"addLibrary($select.selected)\\\"\\n                                   style=\\\"width: 300px;\\\">\\n                            <ui-select-match placeholder=\\\"Select a library...\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"library in libraries\\\"\\n                                               refresh-delay=\\\"0\\\">\\n                                <div ng-bind-html=\\\"library.name | highlight: $select.search\\\"></div>\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-show=\\\"project.libraries.length == 0\\\" style=\\\"text-align: center; color: grey;\\\">Select\\n                                a library you would like to add to the project.\\n                            </div>\\n                            <div ng-hide=\\\"project.libraries.length == 0\\\">\\n                                <ul class=\\\"list-group\\\">\\n                                    <li class=\\\"list-group-item\\\" ng-repeat=\\\"library in project.libraries\\\">\\n                                        {{library.name}} <span class=\\\"fa fa-times pull-right pointer-hand\\\" ng-click=\\\"removeLibrary(library)\\\"></span>\\n                                    </li>\\n                                </ul>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Synthesizers\\\" disable=\\\"synthesizers.length == 0\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\"\\n                                    ng-class=\\\"{'plugin-selected': isSelectedSynthesizer(s), 'pointer-hand': s.active}\\\"\\n                                    ng-repeat=\\\"s in synthesizers\\\"\\n                                    ng-click=\\\"selectSynthesizer(s)\\\">\\n                                    <input type=\\\"checkbox\\\" ng-model=\\\"s.active\\\" ng-change=\\\"activateSynthesizer(s)\\\"> {{s.title}}\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-if=\\\"!synthesizer\\\" style=\\\"text-align: center; color: grey;\\\">Select synthesizer you\\n                                would like to set up.\\n                            </div>\\n                            <div ng-if=\\\"synthesizer\\\"\\n                                 ng-include=\\\"'partials/synthesizers/' + synthesizer.identifier + '.html'\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Visualizations\\\" disable=\\\"visualizations.length == 0\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item\\\"\\n                                    ng-class=\\\"{'plugin-selected': isSelectedVisualization(v), 'pointer-hand': s.active}\\\"\\n                                    ng-repeat=\\\"v in visualizations\\\"\\n                                    ng-click=\\\"selectVisualization(v)\\\">\\n                                    <input type=\\\"checkbox\\\" ng-model=\\\"v.active\\\" ng-change=\\\"activateVisualization(v)\\\"> {{v.name}}\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-if=\\\"!visualization\\\" style=\\\"text-align: center; color: grey;\\\">Select visualization you\\n                                would like to set up.\\n                            </div>\\n                            <div ng-if=\\\"visualization\\\"\\n                                 ng-include=\\\"'partials/visualizations/generic.html'\\\"></div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n        </uib-tabset>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editProject.$valid\\\"\\n            ng-click=\\\"edit()\\\">Save Project\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/search.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"input-group input-group-sm navbar-right\\\" style=\\\"width: 200px; margin-top: 10px; margin-right: 10px;\\\">\\n    <span class=\\\"input-group-addon\\\"><span class=\\\"fa fa-search\\\"></span></span>\\n    <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"global.search\\\" placeholder=\\\"Search\\\">\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/sequencesAdd.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new sequence</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newSequence\\\" class=\\\"form-horizontal\\\">\\n        <div ng-if=\\\"!second\\\">\\n            <div class=\\\"text-center\\\">\\n                Create an empty <span class=\\\"btn btn-danger\\\" ng-click=\\\"select('narra')\\\">Sequence</span>\\n            </div>\\n\\n            <br/>\\n\\n            <div nv-file-drop=\\\"\\\" uploader=\\\"uploader\\\">\\n                <div nv-file-over=\\\"\\\" uploader=\\\"uploader\\\" over-class=\\\"drop-zone-over\\\"\\n                     class=\\\"well drop-zone\\\">\\n                    or drop your sequence script here\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div ng-if=\\\"second\\\">\\n            <div ng-show=\\\"sequence.file\\\" class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Script</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <input name=\\\"file\\\" ng-model=\\\"sequence.file.name\\\" class=\\\"form-control\\\" type=\\\"text\\\" disabled/>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <input name=\\\"name\\\" ng-model=\\\"sequence.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                           type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" required/>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Type</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <input name=\\\"type\\\" ng-model=\\\"sequence.type\\\" class=\\\"form-control\\\" type=\\\"text\\\" disabled/>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Framerate</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <ui-select ng-model=\\\"sequence.fps\\\" required>\\n                        <ui-select-match placeholder=\\\"Pick an framerate\\\">{{$select.selected}}</ui-select-match>\\n                        <ui-select-choices repeat=\\\"framerate in framerates | filter:$select.search\\\">\\n                            {{framerate}}\\n                        </ui-select-choices>\\n                    </ui-select>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Project</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <ui-select ng-model=\\\"sequence.project\\\" required>\\n                        <ui-select-match placeholder=\\\"Pick a project\\\">{{$select.selected.title}}</ui-select-match>\\n                        <ui-select-choices repeat=\\\"project in projects | filter:$select.search\\\">{{project.title}}</ui-select-choices>\\n                    </ui-select>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <ui-select ng-model=\\\"sequence.author\\\" required>\\n                        <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                        <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}\\n                        </ui-select-choices>\\n                    </ui-select>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"sequence.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here (Optional)\\\" rows=\\\"5\\\"></textarea>\\n                </div>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <span ng-if=\\\"second\\\" class=\\\"btn btn-default\\\" ng-click=\\\"back()\\\">Back</span>\\n    <button ng-if=\\\"second\\\" class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newSequence.$valid\\\"\\n            ng-click=\\\"new()\\\">Add Sequence\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/sequencesDetail.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\">\\n            <h5 class=\\\"page-header\\\">\\n                <span><a href=\\\"/projects/{{sequence.project.name}}?tab=sequences\\\">{{sequence.project.title}}</a> / </span>{{sequence.name}}\\n            </h5>\\n\\n            <div ui-scrollpoint=\\\"+30\\\">\\n                <div class=\\\"pull-right\\\" ng-if=\\\"isAuthor() || isContributor()\\\">\\n                    <div class=\\\"btn-group\\\" uib-dropdown>\\n                        <button id=\\\"settings\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-cog\\\"></span> <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu pull-right\\\" role=\\\"menu\\\" aria-labelledby=\\\"settings\\\">\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"edit()\\\">Settings</a></li>\\n                            <li role=\\\"menuitem\\\" ng-show=\\\"isAuthor()\\\"><a href=\\\"#\\\" ng-click=\\\"delete()\\\">Delete</a></li>\\n                        </ul>\\n                    </div>\\n                </div>\\n\\n                <div ng-if=\\\"player.ready\\\" ng-class=\\\"{'videogular-container': tabs.player.active, 'videogular-container-floating': !tabs.player.active, 'videogular-container-none': tabs.sequence.active}\\\">\\n                    <videogular vg-player-ready=\\\"onPlayerReady($API)\\\" vg-responsive=\\\"true\\\"\\n                                vg-cue-points=\\\"player.cuePoints\\\" vg-update-time=\\\"playlistHandler($currentTime)\\\">\\n                        <vg-media vg-src=\\\"player.sources\\\"\\n                                  vg-tracks=\\\"player.tracks\\\" vg-preload=\\\"player.preload\\\">\\n                        </vg-media>\\n\\n                        <vg-controls vg-autohide=\\\"player.autoHide\\\" vg-autohide-time=\\\"player.autoHideTime\\\">\\n                            <vg-play-pause-button></vg-play-pause-button>\\n                            <vg-scrub-bar>\\n                                <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\\n                            </vg-scrub-bar>\\n                            <vg-time-display>{{ timeLeft | date:'mm:ss' }}</vg-time-display>\\n                            <vg-volume>\\n                                <vg-mute-button></vg-mute-button>\\n                                <vg-volume-bar></vg-volume-bar>\\n                            </vg-volume>\\n                            <vg-fullscreen-button></vg-fullscreen-button>\\n                        </vg-controls>\\n\\n                        <vg-overlay-play></vg-overlay-play>\\n                        <vg-buffering></vg-buffering>\\n                    </videogular>\\n                </div>\\n            </div>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"Sequence\\\" active=\\\"tabs.sequence.active\\\">\\n                    <div>\\n                        <span ng-show=\\\"sequence.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                        <span ng-hide=\\\"sequence.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n\\n                        <div ng-repeat=\\\"thumbnail in sequence.thumbnails track by $index\\\"\\n                             class=\\\"background-cover\\\"\\n                             style=\\\"background-image: url('{{thumbnail}}'); background-size: contain; width: 20%; height: 100px; float: left; margin-bottom: 10px;\\\"></div>\\n                        <div class=\\\"well\\\">\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt class=\\\"block-header\\\">{{sequence.name}}</dt>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>description</dt>\\n                                <dd>{{sequence.description}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>author</dt>\\n                                <dd>{{sequence.author.name}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>contributors</dt>\\n                                <dd><span\\n                                        ng-repeat=\\\"contributor in sequence.contributors\\\">{{contributor.name}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span\\n                                        ng-show=\\\"sequence.contributors.length == 0\\\"\\n                                        class=\\\"text-muted\\\">There is no contributors in this library.</span>\\n                                </dd>\\n                            </dl>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Player\\\" active=\\\"tabs.player.active\\\">\\n                    <div style=\\\"height: 500px;\\\"></div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Items\\\" active=\\\"tabs.editor.active\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item pointer-hand well-hover\\\" ng-class=\\\"{'well-active': isActive($index)}\\\"\\n                                    ng-repeat=\\\"mark in sequence.marks | orderBy:'row'\\\">\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-click=\\\"seek($index)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{mark.clip.thumbnail}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{mark.clip.name|uppercase}}</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/sequencesInformationEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-edit\\\"></span> {{initial.name}}</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editSequence\\\" class=\\\"form-horizontal\\\">\\n        <uib-tabset type=\\\"pills\\\">\\n            <uib-tab heading=\\\"Sequence\\\">\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input name=\\\"name\\\" ng-model=\\\"sequence.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                               ui-validate=\\\"{exists: 'validateName($value)' }\\\"\\n                               type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" required/>\\n                    </div>\\n                </div>\\n\\n                <div ng-show=\\\"editSequence.name.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Already exists!</strong>\\n                        <small>Sequence already exists.</small>\\n                    </p>\\n                </div>\\n\\n                <div ng-show=\\\"editSequence.name.$dirty && editSequence.name.$error.required\\\"\\n                     class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Required!</strong>\\n                        <small>Sequence name is required.</small>\\n                    </p>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"sequence.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here\\\" rows=\\\"5\\\"></textarea>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <ui-select ng-model=\\\"sequence.author\\\" ng-disabled=\\\"!isAuthor()\\\" ng-change=\\\"filter()\\\"\\n                                   required>\\n                            <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Public</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"sequence.public\\\" ng-disabled=\\\"!isAuthor()\\\"><span class=\\\"text-muted\\\"\\n                                                                                     style=\\\"margin-left: 10px;\\\">Turn this visualization into the public mode</span>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Contributors\\\" disable=\\\"(contributors.length == 0 && sequence.contributors == 0) || !isAuthor()\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <ui-select ng-model=\\\"contributor.selected\\\"\\n                                   theme=\\\"bootstrap\\\"\\n                                   reset-search-input=\\\"true\\\"\\n                                   on-select=\\\"addContribution($select.selected)\\\"\\n                                   style=\\\"width: 300px;\\\">\\n                            <ui-select-match placeholder=\\\"Select a contributor...\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"contributor in contributors\\\"\\n                                               refresh-delay=\\\"0\\\">\\n                                <div ng-bind-html=\\\"contributor.name | highlight: $select.search\\\"></div>\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-show=\\\"sequence.contributors.length == 0\\\" style=\\\"text-align: center; color: grey;\\\">Select\\n                                a user you would like to be a part of the project.\\n                            </div>\\n                            <div ng-hide=\\\"sequence.contributors.length == 0\\\">\\n                                <ul class=\\\"list-group\\\">\\n                                    <li class=\\\"list-group-item\\\" ng-repeat=\\\"contributor in sequence.contributors\\\">\\n                                        {{contributor.name}} <span class=\\\"fa fa-times pull-right pointer-hand\\\" ng-click=\\\"removeContribution(contributor)\\\"></span>\\n                                    </li>\\n                                </ul>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n        </uib-tabset>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editSequence.$valid\\\"\\n            ng-click=\\\"edit()\\\">Save Sequence\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/synthesizers/sequence.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"text-center\\\">{{synthesizer.description}}</div>\\n\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/users.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\">\\n            <div class=\\\"bs-docs-section\\\" id=\\\"users\\\">\\n                <h5 class=\\\"page-header\\\">Users</h5>\\n\\n                <div ng-hide=\\\"filtered.length > 0\\\" class=\\\"col-md-12 item-empty\\\">Any user meets you search\\n                    criteria..\\n                </div>\\n\\n                <div ng-repeat=\\\"user in filtered = (users | filter:search) | orderBy:'name'\\\"\\n                     class=\\\"well well-hover\\\" ng-click=\\\"edit(user)\\\">\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt class=\\\"block-header\\\">{{user.name}}</dt>\\n                        <dd></dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>username</dt>\\n                        <dd>{{user.username}}</dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>email</dt>\\n                        <dd>{{user.email}}</dd>\\n                    </dl>\\n                    <dl class=\\\"dl-horizontal\\\">\\n                        <dt>roles</dt>\\n                        <dd><span ng-repeat=\\\"role in user.roles\\\"\\n                                  ng-class=\\\"{label:true, 'label-danger':role=='admin', 'label-default':role!='admin'}\\\"\\n                                  style=\\\"display: inline-block; margin-right: 10px;\\\">{{role}}</span></dd>\\n                    </dl>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/usersEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-edit\\\"></span> {{user.name}}</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editUser\\\" class=\\\"form-horizontal\\\">\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Username</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input name=\\\"username\\\" ng-model=\\\"user.username\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                       ui-validate=\\\"{exists: 'validateUsername($value)' }\\\" type=\\\"text\\\" placeholder=\\\"Enter a username here\\\"\\n                       filtervalue=\\\"projectname\\\" required/>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"editUser.username.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Already exists!</strong>\\n                <small>User with same username already exists.</small>\\n            </p>\\n        </div>\\n\\n        <div ng-show=\\\"editUser.username.$dirty && editUser.username.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>Username is required.</small>\\n            </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Email</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input name=\\\"email\\\" ng-model=\\\"user.email\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\" type=\\\"text\\\" placeholder=\\\"Optional\\\"/>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <label class=\\\"col-sm-2 control-label\\\">Roles</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <ui-select name=\\\"roles\\\" multiple ng-model=\\\"user.roles\\\" style=\\\"width: 100%;\\\" ng-disabled=\\\"!admin\\\" ui-validate=\\\"{required: 'validateRolesRequired($value)', admin: 'validateRolesAdmin($value)'}\\\">\\n                    <ui-select-match placeholder=\\\"Select roles\\\">{{$item}}</ui-select-match>\\n                    <ui-select-choices repeat=\\\"role in roles | filter:$select.search\\\">{{role}}</ui-select-choices>\\n                </ui-select>\\n            </div>\\n        </div>\\n\\n        <div ng-show=\\\"editUser.roles.$error.admin\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Error!</strong>\\n                <small>At least one user has to be an admin.</small>\\n            </p>\\n        </div>\\n\\n        <div ng-show=\\\"editUser.roles.$error.required\\\" class=\\\"col-md-offset-2\\\">\\n            <p class=\\\"text-danger left-buffer-10\\\">\\n                <strong>Required!</strong>\\n                <small>At least one role is required.</small>\\n            </p>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editUser.$valid\\\"\\n            ng-click=\\\"edit()\\\">Save Profile\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/version.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<span>Currently version <span style=\\\"font-weight: bolder\\\">ui<span class=\\\"fa fa-at\\\"></span>{{uiVersion}}</span> and <span style=\\\"font-weight: bolder\\\">core<span class=\\\"fa fa-at\\\"></span>{{coreVersion}}</span></span>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/viewer.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n<div ng-if=\\\"visualization.type == 'p5js'\\\">\\n    <p5 sketch=\\\"sketch\\\"></p5>\\n</div>\\n\\n<div ng-if=\\\"visualization.type == 'processing' && ready\\\">\\n    <canvas processing=\\\"{{visualization.script}}\\\"></canvas>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/visualizations.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n\\n        <div ng-hide=\\\"myVisualizations.length > 0 || publicVisualizations.length > 0 || contribVisualizations.length > 0\\\" class=\\\"col-md-12 item-empty\\\">\\n            Create a new visualization clicking the red button.\\n        </div>\\n\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\" ng-show=\\\"myVisualizations.length > 0 || contribVisualizations.length > 0 || publicVisualizations.length > 0\\\">\\n\\n            <h5 class=\\\"page-header\\\">VISUALIZATION</h5>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"My Visualizations\\\" active=\\\"tabs.myVisualizations.active\\\" ng-show=\\\"myVisualizations.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item pointer-hand well-hover\\\"\\n                                    ng-repeat=\\\"visualization in myVisualizations | orderBy:'name'\\\">\\n                                    <span ng-show=\\\"visualization.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                                    <span ng-hide=\\\"visualization.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-click=\\\"detail(visualization)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{visualization.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{visualization.name|uppercase}}</span>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"My Contributions\\\" active=\\\"tabs.contribVisualizations.active\\\" ng-show=\\\"contribVisualizations.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item pointer-hand well-hover\\\"\\n                                    ng-repeat=\\\"visualization in contribVisualizations | orderBy:'name'\\\">\\n                                    <span ng-show=\\\"visualization.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                                    <span ng-hide=\\\"visualization.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-click=\\\"detail(visualization)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{visualization.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{visualization.name|uppercase}}</span>\\n                                            <small>by <strong>{{visualization.author.name}}</strong></small>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Public Visualizations\\\" active=\\\"tabs.publicVisualizations.active\\\" ng-show=\\\"publicVisualizations.length > 0\\\">\\n                    <div class=\\\"tab-content\\\">\\n                        <div class=\\\"row\\\">\\n                            <ul class=\\\"list-group\\\">\\n                                <li class=\\\"list-group-item pointer-hand well-hover\\\"\\n                                    ng-repeat=\\\"visualization in publicVisualizations | orderBy:'name'\\\">\\n                                    <span ng-show=\\\"visualization.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                                    <span ng-hide=\\\"visualization.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n                                    <div class=\\\"input-item-overlay\\\">\\n                                        <div ng-click=\\\"detail(visualization)\\\" class=\\\"small-item-overlay\\\"\\n                                             style=\\\"margin-left: 10px;\\\">\\n                                            <img src=\\\"{{visualization.thumbnails[0]}}\\\" height=\\\"50\\\">\\n                                            <span style=\\\"margin-left: 15px; font-weight: bold; font-size: 12px;\\\">{{visualization.name|uppercase}}</span>\\n                                            <small>by <strong>{{visualization.author.name}}</strong></small>\\n                                        </div>\\n                                    </div>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/visualizations/generic.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n<div class=\\\"text-center\\\">{{visualization.description}}</div>\\n\\n<div style=\\\"margin-top: 20px;\\\" ng-repeat=\\\"(key, value) in visualization.options\\\">\\n    <div class=\\\"form-group\\\">\\n        <label class=\\\"col-sm-6 control-label\\\">{{key|propertyname}}</label>\\n\\n        <div class=\\\"col-sm-6\\\">\\n            <input name=\\\"name\\\" ng-model=\\\"visualization.options[key]\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                   type=\\\"text\\\"/>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/visualizationsAdd.html\", \"<!--\\n#\\n# Copyright (C) 2015 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-plus\\\"></span> Add new visualization</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"newVisualization\\\" class=\\\"form-horizontal\\\">\\n            <div ng-if=\\\"!second\\\">\\n                <div class=\\\"text-center\\\">Select visualization type</div>\\n\\n                <div class=\\\"text-center\\\">\\n                    <span class=\\\"btn btn-danger\\\" ng-click=\\\"select('processing')\\\">Processing</span>\\n                    <span class=\\\"btn btn-danger\\\" ng-click=\\\"select('p5js')\\\">p5.js</span>\\n                </div>\\n\\n                <br/>\\n\\n                <div nv-file-drop=\\\"\\\" uploader=\\\"uploader\\\">\\n                    <div nv-file-over=\\\"\\\" uploader=\\\"uploader\\\" over-class=\\\"drop-zone-over\\\"\\n                         class=\\\"well drop-zone\\\">\\n                        or drop your visualization script here\\n                    </div>\\n                </div>\\n            </div>\\n\\n        <div ng-if=\\\"second\\\">\\n            <div ng-show=\\\"visualization.file\\\" class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Script</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <input name=\\\"file\\\" ng-model=\\\"visualization.file.name\\\" class=\\\"form-control\\\" type=\\\"text\\\" disabled/>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <input name=\\\"name\\\" ng-model=\\\"visualization.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                           type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" required/>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Type</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <input name=\\\"type\\\" ng-model=\\\"visualization.type\\\" class=\\\"form-control\\\" type=\\\"text\\\" disabled/>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                    <ui-select ng-model=\\\"visualization.author\\\" required>\\n                        <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                        <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}\\n                        </ui-select-choices>\\n                    </ui-select>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n                <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"visualization.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here (Optional)\\\" rows=\\\"5\\\"></textarea>\\n                </div>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <span ng-if=\\\"second\\\" class=\\\"btn btn-default\\\" ng-click=\\\"back()\\\">Back</span>\\n    <button ng-if=\\\"second\\\" class=\\\"btn btn-danger\\\" ng-disabled=\\\"!newVisualization.$valid\\\"\\n            ng-click=\\\"new()\\\">Add Visualization\\n    </button>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/visualizationsDetail.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"container bs-docs-container\\\">\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\" role=\\\"main\\\">\\n            <h5 class=\\\"page-header\\\">{{visualization.name}}</h5>\\n\\n            <div ng-if=\\\"isAuthor() || isContributor()\\\" ui-scrollpoint=\\\"+30\\\">\\n                <div class=\\\"pull-right\\\">\\n                    <div class=\\\"btn-group\\\" ng-show=\\\"tabs.code.active\\\">\\n                        <button class=\\\"btn btn-danger\\\" ng-click=\\\"save()\\\">Save Script</button>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" uib-dropdown>\\n                        <button id=\\\"preview\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" uib-dropdown-toggle>\\n                            Preview <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu pull-right\\\" role=\\\"menu\\\" aria-labelledby=\\\"preview\\\">\\n                            <li ng-repeat=\\\"project in projects\\\" role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"preview(project)\\\">{{project.title}}</a>\\n                            </li>\\n                        </ul>\\n                    </div>\\n                    <div class=\\\"btn-group\\\" uib-dropdown>\\n                        <button id=\\\"settings\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\" uib-dropdown-toggle>\\n                            <span class=\\\"fa fa-cog\\\"></span> <span class=\\\"caret\\\"></span>\\n                        </button>\\n                        <ul class=\\\"uib-dropdown-menu pull-right\\\" role=\\\"menu\\\" aria-labelledby=\\\"settings\\\">\\n                            <li role=\\\"menuitem\\\"><a href=\\\"#\\\" ng-click=\\\"edit()\\\">Settings</a></li>\\n                            <li role=\\\"menuitem\\\" ng-show=\\\"isAuthor()\\\"><a href=\\\"#\\\" ng-click=\\\"delete()\\\">Delete</a></li>\\n                        </ul>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <uib-tabset type=\\\"pills\\\">\\n                <uib-tab heading=\\\"Visualization\\\" active=\\\"tabs.visualization.active\\\">\\n                    <div>\\n                        <span ng-show=\\\"visualization.public\\\" class=\\\"label label-success narra-badge\\\">public</span>\\n                        <span ng-hide=\\\"visualization.public\\\" class=\\\"label label-danger narra-badge\\\">private</span>\\n\\n                        <div ng-repeat=\\\"thumbnail in visualization.thumbnails track by $index\\\"\\n                             class=\\\"background-cover\\\"\\n                             style=\\\"background-image: url('{{thumbnail}}'); background-size: contain; width: 20%; height: 100px; float: left; margin-bottom: 10px;\\\"></div>\\n                        <div class=\\\"well\\\">\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt class=\\\"block-header\\\">{{visualization.name}}</dt>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>description</dt>\\n                                <dd>{{visualization.description}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>author</dt>\\n                                <dd>{{visualization.author.name}}</dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>contributors</dt>\\n                                <dd><span\\n                                        ng-repeat=\\\"contributor in visualization.contributors\\\">{{contributor.name}}<span\\n                                        ng-hide=\\\"$last\\\">, </span></span><span\\n                                        ng-show=\\\"visualization.contributors.length == 0\\\"\\n                                        class=\\\"text-muted\\\">There is no contributors in this library.</span>\\n                                </dd>\\n                            </dl>\\n                            <dl class=\\\"dl-horizontal\\\">\\n                                <dt>type</dt>\\n                                <dd>{{visualization.type}}</dd>\\n                            </dl>\\n                        </div>\\n                    </div>\\n                </uib-tab>\\n                <uib-tab heading=\\\"Code\\\" active=\\\"tabs.code.active\\\">\\n                    <div ng-if=\\\"ready\\\" ui-ace=\\\"editorOption\\\" ng-model=\\\"content\\\"></div>\\n                </uib-tab>\\n            </uib-tabset>\\n        </div>\\n    </div>\\n</div>\");\n}]);","angular.module(\"narra.ui\").run([\"$templateCache\", function($templateCache) {\n  $templateCache.put(\"partials/visualizationsInformationEdit.html\", \"<!--\\n#\\n# Copyright (C) 2014 CAS / FAMU\\n#\\n# This file is part of Narra Core.\\n#\\n# Narra Core is free software: you can redistribute it and/or modify\\n# it under the terms of the GNU General Public License as published by\\n# the Free Software Foundation, either version 3 of the License, or\\n# (at your option) any later version.\\n#\\n# Narra Core is distributed in the hope that it will be useful,\\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n# GNU General Public License for more details.\\n#\\n# You should have received a copy of the GNU General Public License\\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\\n#\\n# Authors: Michal Mocnak <michal@marigan.net>\\n#\\n-->\\n\\n<div class=\\\"modal-header\\\"><h4 class=\\\"modal-title\\\"><span class=\\\"fa fa-edit\\\"></span> {{initial.name}}</h4></div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"editVisualization\\\" class=\\\"form-horizontal\\\">\\n        <uib-tabset type=\\\"pills\\\">\\n            <uib-tab heading=\\\"Visualization\\\">\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Name</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input name=\\\"name\\\" ng-model=\\\"visualization.name\\\" class=\\\"form-control\\\" ng-trim=\\\"false\\\"\\n                               ui-validate=\\\"{exists: 'validateName($value)' }\\\"\\n                               type=\\\"text\\\" placeholder=\\\"Enter a name here\\\" required/>\\n                    </div>\\n                </div>\\n\\n                <div ng-show=\\\"editVisualization.name.$error.exists\\\" class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Already exists!</strong>\\n                        <small>Visualization already exists.</small>\\n                    </p>\\n                </div>\\n\\n                <div ng-show=\\\"editVisualization.name.$dirty && editVisualization.name.$error.required\\\"\\n                     class=\\\"col-md-offset-2\\\">\\n                    <p class=\\\"text-danger left-buffer-10\\\">\\n                        <strong>Required!</strong>\\n                        <small>Visualization name is required.</small>\\n                    </p>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Description</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                <textarea name=\\\"description\\\" ng-model=\\\"visualization.description\\\" class=\\\"form-control\\\"\\n                          placeholder=\\\"Enter a description here\\\" rows=\\\"5\\\"></textarea>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Author</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <ui-select ng-model=\\\"visualization.author\\\" ng-disabled=\\\"!isAuthor()\\\" ng-change=\\\"filter()\\\"\\n                                   required>\\n                            <ui-select-match placeholder=\\\"Pick an author\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"user in users | filter:$select.search\\\">{{user.name}}\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n                </div>\\n\\n                <div class=\\\"form-group\\\">\\n                    <label class=\\\"col-sm-2 control-label\\\">Public</label>\\n\\n                    <div class=\\\"col-sm-10\\\">\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"visualization.public\\\" ng-disabled=\\\"!isAuthor()\\\"><span class=\\\"text-muted\\\"\\n                                                                                     style=\\\"margin-left: 10px;\\\">Turn this visualization into the public mode</span>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n            <uib-tab heading=\\\"Contributors\\\" disable=\\\"(contributors.length == 0 && visualization.contributors == 0) || !isAuthor()\\\">\\n                <div class=\\\"form-group\\\">\\n                    <div class=\\\"col-sm-5\\\">\\n                        <ui-select ng-model=\\\"contributor.selected\\\"\\n                                   theme=\\\"bootstrap\\\"\\n                                   reset-search-input=\\\"true\\\"\\n                                   on-select=\\\"addContribution($select.selected)\\\"\\n                                   style=\\\"width: 300px;\\\">\\n                            <ui-select-match placeholder=\\\"Select a contributor...\\\">{{$select.selected.name}}</ui-select-match>\\n                            <ui-select-choices repeat=\\\"contributor in contributors\\\"\\n                                               refresh-delay=\\\"0\\\">\\n                                <div ng-bind-html=\\\"contributor.name | highlight: $select.search\\\"></div>\\n                            </ui-select-choices>\\n                        </ui-select>\\n                    </div>\\n\\n                    <div class=\\\"col-sm-7\\\">\\n                        <div class=\\\"well\\\" style=\\\"max-height: 300px; overflow: auto;\\\">\\n                            <div ng-show=\\\"visualization.contributors.length == 0\\\" style=\\\"text-align: center; color: grey;\\\">Select\\n                                a user you would like to be a part of the project.\\n                            </div>\\n                            <div ng-hide=\\\"visualization.contributors.length == 0\\\">\\n                                <ul class=\\\"list-group\\\">\\n                                    <li class=\\\"list-group-item\\\" ng-repeat=\\\"contributor in visualization.contributors\\\">\\n                                        {{contributor.name}} <span class=\\\"fa fa-times pull-right pointer-hand\\\" ng-click=\\\"removeContribution(contributor)\\\"></span>\\n                                    </li>\\n                                </ul>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </uib-tab>\\n        </uib-tabset>\\n    </form>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <span class=\\\"btn btn-default\\\" ng-click=\\\"close()\\\">Cancel</span>\\n    <button class=\\\"btn btn-danger\\\" ng-disabled=\\\"!editVisualization.$valid\\\"\\n            ng-click=\\\"edit()\\\">Save Visualization\\n    </button>\\n</div>\");\n}]);","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiAuth\", ($resource, serviceServer) ->\n  $resource serviceServer.url + \"/auth/:action\", {}\n  ,\n    providers:\n      method: 'GET'\n      params:\n        action: 'providers'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiEvent\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/events/:scope\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'\n\n    me:\n      method: 'GET'\n      params:\n        scope: 'me'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiGenerator\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/generators\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiItem\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/items/:id/:action0/:param/:action1\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'\n\n    get:\n      method: 'GET'\n\n    check:\n      method: 'POST'\n      params:\n        action0: 'check'\n\n    new:\n      method: 'POST'\n      params:\n        action0: 'new'\n\n    delete:\n      method: 'GET'\n      params:\n        action0: 'delete'\n\n    events:\n      method: 'GET'\n      params:\n        action0: 'events'\n\n    thumbnails:\n      method: 'GET'\n      params:\n        id: 'thumbnails'\n\n    regenerate:\n      method: 'GET'\n      params:\n        action0: 'regenerate'\n\n    metadata:\n      method: 'GET'\n      params:\n        id: '@id'\n        action0: 'metadata'\n\n    metadataNew:\n      method: 'POST'\n      params:\n        id: '@id'\n        action0: 'metadata'\n        action1: 'new'\n\n    metadataUpdate:\n      method: 'POST'\n      params:\n        id: '@id'\n        param: '@meta'\n        action0: 'metadata'\n        action1: 'update'\n\n    metadataDelete:\n      method: 'GET'\n      params:\n        action0: 'metadata'\n        action1: 'delete'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiLibrary\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/libraries/:id/:action0/:param/:action1/:name\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'\n\n    get:\n      method: 'GET'\n\n    new:\n      method: 'POST'\n      params:\n        action0: 'new'\n\n    delete:\n      method: 'GET'\n      params:\n        action0: 'delete'\n\n    validate:\n      method: 'POST'\n      params:\n        action0: 'validate'\n\n    items:\n      method: 'GET'\n      params:\n        action0: 'items'\n        \n    metaValues:\n      method: 'GET'\n      params:\n        action0: 'items'\n        param: 'metadata'\n\n    update:\n      method: 'POST'\n      params:\n        id: '@id'\n        action0: 'update'\n\n    regenerate:\n      method: 'GET'\n      params:\n        action0: 'regenerate'\n\n    metadataNew:\n      method: 'POST'\n      params:\n        id: '@id'\n        action0: 'metadata'\n        action1: 'new'\n\n    metadataUpdate:\n      method: 'POST'\n      params:\n        id: '@id'\n        param: '@meta'\n        action0: 'metadata'\n        action1: 'update'\n\n    metadataDelete:\n      method: 'GET'\n      params:\n        action0: 'metadata'\n        action1: 'delete'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiProject\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/projects/:action0/:name/:action1/:param/:action2\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'\n\n    get:\n      method: 'GET'\n\n    new:\n      method: 'POST'\n      params:\n        action1: 'new'\n\n    delete:\n      method: 'GET'\n      params:\n        action1: 'delete'\n\n    validate:\n      method: 'POST'\n      params:\n        action0: 'validate'\n\n    update:\n      method: 'POST'\n      params:\n        name: '@name'\n        action1: 'update'\n\n    items:\n      method: 'GET'\n      params:\n        action1: 'items'\n\n    junctions:\n      method: 'GET'\n      params:\n        action1: 'junctions'\n\n    junctionsItems:\n      method: 'GET'\n      params:\n       action1: 'junctions'\n       action2: 'items'\n\n    sequences:\n      method: 'GET'\n      params:\n        action1: 'sequences'\n\n    sequencesNew:\n      method: 'POST'\n      headers: {'Content-Type': undefined}\n      params:\n        name: '@name'\n        action1: 'sequences'\n        action2: 'new'\n\n    sequencesDelete:\n      method: 'GET'\n      params:\n        action1: 'sequences'\n        action2: 'delete'\n\n    sequencesUpdate:\n      method: 'POST'\n      params:\n        name: '@name'\n        param: '@sequence'\n        action1: 'sequences'\n        action2: 'update'\n\n    metadataNew:\n      method: 'POST'\n      params:\n        name: '@name'\n        action1: 'metadata'\n        action2: 'new'\n\n    metadataUpdate:\n      method: 'POST'\n      params:\n        name: '@name'\n        param: '@meta'\n        action1: 'metadata'\n        action2: 'update'\n\n    metadataDelete:\n      method: 'GET'\n      params:\n        action1: 'metadata'\n        action2: 'delete'\n\n    visualizationsAction:\n      method: 'POST'\n      params:\n        name: '@name'\n        action1: 'visualizations'\n        action2: '@action'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').factory \"apiSettings\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/settings/:name/:action\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'\n\n    get:\n      method: 'GET'\n\n    defaults:\n      method: 'GET'\n      params:\n        name: 'defaults'\n\n    update:\n      method: 'POST'\n      params:\n        name: '@name'\n        action: 'update'","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiSynthesizers\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/synthesizers\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').factory \"apiSystem\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/system/:action\",\n    token: serviceToken.get()\n  ,\n    version:\n      method: 'GET'\n      params:\n        action: 'version'\n\n    modules:\n      method: 'GET'\n      params:\n        action: 'modules'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').factory \"apiUser\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/users/:username/:action\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'\n\n    get:\n      method: 'GET'\n\n    profile:\n      method: 'GET'\n      params:\n        username: 'me'\n\n    signout:\n      method: 'GET'\n      params:\n        username: 'me'\n        action: 'signout'\n\n    roles:\n      method: 'GET'\n      params:\n        username: 'roles'\n\n    delete:\n      method: 'GET'\n      params:\n        action: 'delete'\n\n    update:\n      method: 'POST'\n      params:\n        username: '@username'\n        action: 'update'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\n\nangular.module('narra.ui').factory \"apiVisualization\", ($resource, serviceServer, serviceToken) ->\n  $resource serviceServer.url + \"/v1/visualizations/:id/:action0\",\n    token: serviceToken.get()\n  ,\n    all:\n      method: 'GET'\n\n    get:\n      method: 'GET'\n\n    new:\n      method: 'POST'\n      headers: {'Content-Type': undefined}\n      params:\n        action0: 'new'\n\n    delete:\n      method: 'GET'\n      params:\n        action0: 'delete'\n\n    update:\n      method: 'POST'\n      headers: {'Content-Type': undefined}\n      params:\n        id: '@id'\n        action0: 'update'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'AddCtrl', ($scope, $rootScope, dialogs) ->\n  $scope.addProject = ->\n    confirm = dialogs.create('partials/projectsAdd.html', 'ProjectsAddCtrl', {},\n      {size: 'lg', keyboard: false})\n    # result\n    confirm.result.then (wait) ->\n      wait.result.then (project) ->\n        $rootScope.$broadcast 'event:narra-project-created'\n\n  $scope.addLibrary = ->\n    confirm = dialogs.create('partials/librariesAdd.html', 'LibrariesAddCtrl', {},\n      {size: 'lg', keyboard: false})\n    # result\n    confirm.result.then (wait) ->\n      wait.result.then (library) ->\n        $rootScope.$broadcast 'event:narra-library-created'\n\n  $scope.addItem = ->\n    confirm = dialogs.create('partials/itemsAdd.html', 'ItemsAddCtrl', {},\n      {size: 'lg', keyboard: false})\n    # result\n    confirm.result.then (wait) ->\n      wait.result.then ->\n        $rootScope.$broadcast 'event:narra-item-created'\n\n  $scope.addSequence = ->\n    confirm = dialogs.create('partials/sequencesAdd.html', 'SequencesAddCtrl', {},\n      {size: 'lg', keyboard: false})\n    # result\n    confirm.result.then (wait) ->\n      wait.result.then ->\n        $rootScope.$broadcast 'event:narra-sequence-created'\n\n  $scope.addVisualization = ->\n    confirm = dialogs.create('partials/visualizationsAdd.html', 'VisualizationsAddCtrl', {},\n      {size: 'lg', keyboard: false})\n    # result\n    confirm.result.then (wait) ->\n      wait.result.then ->\n        $rootScope.$broadcast 'event:narra-visualization-created'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'DashboardCtrl', ($scope, $rootScope, $location, $q, apiProject, apiItem, elzoidoPromises) ->\n  $scope.refresh = ->\n    # get deffered\n    thumbnails = $q.defer()\n    projects = $q.defer()\n\n    # data\n    apiItem.thumbnails { param: 10 }, (data) ->\n      $scope.thumbnails = if _.isEmpty(data.thumbnails) then ['/images/empty_carousel.png'] else data.thumbnails\n      thumbnails.resolve true\n    apiProject.all (data) ->\n      $scope.projects = _.where(data.projects, { public: true })\n      projects.resolve true\n\n    # register promises into one queue\n    elzoidoPromises.register('dashboard', [projects.promise, thumbnails.promise])\n\n  # shwo in viewer\n  $scope.view = (project) ->\n    $location.path('/viewer/' + project.name)\n\n  # refresh when new project is added\n  $rootScope.$on 'event:narra-project-created', (event, status) ->\n    $scope.refresh()\n\n  # initial data\n  $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'EventsCtrl', ($scope, $rootScope, $interval, dialogs, apiEvent) ->\n  $scope.refresh = ->\n    apiEvent.me {}, (data) ->\n      _.forEach(data.events, (event) ->\n        event.progress = Math.floor(event.progress * 100))\n      $scope.events = data.events\n\n  $scope.startRefreshInterval = ->\n    # don't start new refresh when it is already on\n    if angular.isDefined($scope.refreshInterval) then return\n    # reload data\n    $scope.refresh()\n    # create refresh\n    $scope.refreshInterval = $interval(->\n      # reload data\n      $scope.refresh()\n    , 20000)\n\n  $scope.stopRefreshInterval = ->\n    # don't start new refresh when it is already on\n    if angular.isDefined($scope.refreshInterval)\n      $interval.cancel($scope.refreshInterval)\n      $scope.refreshInterval = undefined\n\n  # refresh when user is logged\n  $scope.$on 'event:elzoido-auth-user', ->\n    # refresh\n    $scope.startRefreshInterval()\n\n  $scope.$on '$destroy', ->\n    # stop current refresh\n    $scope.stopRefreshInterval()\n\n  $scope.$watch 'events', (newEvents, oldEvents) ->\n    # get finished events\n    finished = _.difference(_.pluck(oldEvents, 'id'), _.pluck(newEvents, 'id'))\n    # check\n    if finished.length > 0\n      _.forEach(finished, (id) ->\n        # find event\n        event = _.find(oldEvents, {id: id})\n        # check for the item or project\n        if !_.isUndefined(event.item)\n          $rootScope.$broadcast 'event:narra-item-updated', event.item.id\n        if !_.isUndefined(event.project)\n          $rootScope.$broadcast 'event:narra-project-updated', event.project.name\n        if !_.isUndefined(event.library)\n          $rootScope.$broadcast 'event:narra-library-purged', event.library.id\n      )","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'InfoCtrl', ($scope, serviceVersion, apiSystem) ->\n  serviceVersion.version (data) ->\n    $scope.uiVersion = data.version\n  apiSystem.version (data) ->\n    $scope.coreVersion = data.version\n  apiSystem.modules (data) ->\n    $scope.coreModules = data.modules","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'ItemsAddCtrl', ($scope, $rootScope, $q, $timeout, $filter, $modalInstance, dialogs, apiItem, apiLibrary, apiUser, elzoidoMessages, elzoidoAuthUser, elzoidoPromises, serviceThumbnail) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.item = {url: '', library: '', author: $scope.user}\n\n  apiLibrary.all (data) ->\n    temporary = angular.copy(data.libraries)\n    if !$scope.user.isAdmin()\n      _.remove(temporary, (library) ->\n        !_.contains(_.pluck(library.contributors, 'username').concat([library.author.username]), $scope.user.username))\n    $scope.libraries = temporary\n  apiUser.all (data) ->\n    $scope.users = data.users\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # next action\n  $scope.next = ->\n    if $scope.second\n      $scope.third = true\n      $scope.second = false\n    else\n      # author is provided\n      $scope.author = true\n      # setup collections\n      $scope.items = []\n      # open waiting\n      waiting = dialogs.wait('Please Wait', 'Checking new items ...')\n      # promises\n      promises = []\n      # parse items\n      items = $scope.item.url.split(\"\\n\")\n      # iterate over\n      _.forEach(items, (item) ->\n        # get deffered\n        wait = $q.defer()\n        # register promise\n        promises.push(wait.promise)\n        # add item\n        $timeout(->\n          apiItem.check({ url: item }, (data) ->\n            # thumbnail check\n            _.forEach(data.items, (x) ->\n              x.thumbnail = serviceThumbnail.thumbnail(x.type) if _.isNull(x.thumbnail)\n              # push into collection\n              $scope.items.push(x)\n              # author is provided\n              $scope.author = $scope.author && x.author\n            )\n            # resolve\n            wait.resolve true\n          , (error) ->\n            wait.resolve true\n          )\n        , 100)\n      )\n\n      # register promises into one queue\n      elzoidoPromises.register('check-items', promises)\n      # close dialog\n      elzoidoPromises.promise('check-items').then ->\n        # close\n        waiting.close()\n        # and setup for the next slide\n        $scope.second = true if !_.isEmpty($scope.items)\n\n  # back action\n  $scope.back = ->\n    # move back according to level\n    if $scope.third\n      $scope.third = false\n      $scope.second = true\n    else if $scope.second\n      # setup collections\n      $scope.items = []\n      # back to the first slide\n      $scope.second = false\n\n  # save action\n  $scope.new = ->\n    # open waiting\n    waiting = dialogs.wait('Please Wait', 'Registering new items ...')\n    # close dialog\n    $modalInstance.close(waiting)\n    # promises\n    container = []\n    # iterate over\n    _.forEach($scope.items, (item) ->\n      # prepare item\n      container.push({\n        url: item.url\n        author: $scope.item.author.name\n        library: $scope.item.library.id\n        connector: item.connector\n        options: item[item.connector]\n      })\n    )\n    # add items\n    apiItem.new { items: container}, (data) ->\n      # fire message\n      elzoidoMessages.send('success', 'Success!', 'Items were successfully created.')\n      # close dialog\n      waiting.close()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'ItemsDetailCtrl', ($scope, $rootScope, $routeParams, $location, $sce, $document, $interval, $timeout, $filter, $q, dialogs, apiProject, apiLibrary, apiItem, apiUser, uiGmapGoogleMapApi, constantMetadata, elzoidoPromises, elzoidoMessages, elzoidoAuthUser) ->\n  # set up context\n  $scope.itemMetadata = {}\n  # get current user\n  $scope.tabs = { player: { }, text: { }, metadata: { active: true } }\n  # player\n  $scope.player =\n    api: undefined\n    ready: false\n    preload: true\n    autoHide: false\n    autoHideTime: 2000\n    autoPlay: false\n    sources: []\n    tracks: []\n    cuePoints: {}\n    plugins: {}\n\n  $scope.editorOption =\n    theme: 'chrome',\n    require: ['ace/ext/language_tools', 'ace/ext/static_highlight', 'ace/ext/error_marker', 'ace/ext/searchbox'],\n    useWrapMode: true,\n    showGutter: false,\n    showPrintMargin: false,\n    advanced: {},\n    onLoad: (editor) ->\n  # read only\n      editor.setReadOnly(true)\n      # get session\n      session = editor.getSession()\n      # resolve mode\n      session.setMode('ace/mode/text')\n      editor.setAutoScrollEditorIntoView(true)\n      editor.setOption(\"maxLines\", 120)\n      editor.setFontSize('14px')\n\n  elzoidoPromises.promise('authentication').then ->\n    # refresh data\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      item = $q.defer()\n      library = $q.defer()\n\n      # get library\n      apiLibrary.get {id: $routeParams.library}, (data) ->\n        $scope.generators = data.library.generators\n        $scope.library = data.library\n        # get project informations\n        if !_.isUndefined($routeParams.project)\n          $scope.project = _.find($scope.library.projects, { name: $routeParams.project })\n        library.resolve true\n\n      # get item\n      apiItem.get {id: $routeParams.item}, (data) ->\n        switch(data.item.type)\n          when 'video'\n            # set video\n            $scope.player.sources = [{src: $sce.trustAsResourceUrl(data.item.video_proxy_hq), type: \"video/webm\"}]\n            # get duration\n            $scope.duration = _.where(data.item.metadata, {name: 'duration'})[0].value\n            # get cuepoints\n            $scope.cuepoints = _.reduce(data.item.metadata, (result, meta) ->\n              if !_.isUndefined(meta.marks) && meta.marks.length > 0 && !_.isEqual(meta.generator,\n                'thumbnail') && !_.isEqual(meta.generator, 'transcoder')\n                cuepoint = {\n                  timeLapse: {\n                    start: meta.marks[0].in\n                  }\n                  onUpdate: () ->\n                    $scope.active = true\n                    $scope.live = meta\n                  onComplete: () ->\n                    $scope.active = false\n                    $timeout ->\n                      if !$scope.active\n                        $scope.live = undefined\n                    , 2000\n                }\n                if !_.isUndefined(meta.marks[0].out)\n                  cuepoint.timeLapse.end = meta.marks[0].out\n                else\n                  cuepoint.timeLapse.end = meta.marks[0].in + 0.3\n                result.push(cuepoint)\n              return result\n            , [])\n            # set up cuepoint\n            $scope.player.cuePoints = {\n              metadata: $scope.cuepoints\n            }\n            $scope.player.ready = true\n          when 'text'\n            $scope.text = _.where(data.item.metadata, {name: 'text'})[0].value\n            data.item.metadata = _.filter(data.item.metadata, (meta) ->\n              !_.isEqual(meta.name, 'text')\n            )\n        # assign\n        $scope.item = data.item\n        # item's used generators\n        generators = _.uniq(_.pluck($scope.item.metadata, 'generator'))\n        # resolve metadata providers\n        $scope.metadataProviders = _.filter(constantMetadata.providers, (provider) ->\n          !_.include(generators, provider.id) || _.isEqual(provider.id, 'user_custom')\n        )\n        # resolve\n        item.resolve true\n\n      # register promises into one queue\n      elzoidoPromises.register('item', [item.promise, library.promise])\n\n    $scope.refreshMetadata = ->\n      apiItem.get {id: $routeParams.item}, (data) ->\n        $scope.item = data.item\n        # item's used generators\n        names = _.uniq(_.pluck($scope.item.metadata, 'name'))\n        # resolve metadata providers\n        $scope.metadataProviders = _.filter(constantMetadata.providers, (provider) ->\n          !_.include(names, provider.id) || _.isEqual(provider.id, 'custom')\n        )\n\n    $scope.isAuthor = ->\n      !_.isUndefined($scope.library) && _.isEqual($scope.library.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n    $scope.isContributor = ->\n      !_.isUndefined($scope.library) && _.include(_.pluck($scope.library.contributors, 'username'), $scope.user.username)\n\n    $scope.delete = ->\n      # open confirmation dialog\n      confirm = dialogs.confirm('Please Confirm',\n        'You are about to delete the item ' + $scope.item.name + ', this procedure is irreversible. Do you want to continue ?')\n\n      # result\n      confirm.result.then ->\n        # delete storage and its projects\n        apiItem.delete {id: $scope.item.id}, ->\n          # redirect back to library\n          $location.url('/libraries/' + $scope.library + '#' + $scope.from)\n          # send message\n          elzoidoMessages.send('success', 'Success!', 'Item ' + $scope.item.name + ' was successfully deleted.')\n\n    $scope.onPlayerReady = (api) ->\n      $scope.player.api = api\n\n    $scope.seek = (position) ->\n      $scope.api.seekTime(position)\n\n    $scope.$on 'event:narra-item-updated', (event, item) ->\n      if _.isEqual($routeParams.item, item)\n        $scope.refreshMetadata()\n\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'LibrariesCtrl', ($scope, $rootScope, $location, $interval, $filter, $q, dialogs, apiProject, apiLibrary, apiUser, elzoidoPromises, elzoidoAuthUser, elzoidoMessages) ->\n  # initialization\n  $scope.rotation = {}\n  $scope.thumbnail = {}\n  $scope.tabs = { myLibraries: { }, contribLibraries: { }, sharedLibraries: { } }\n\n  elzoidoPromises.promise('authentication').then ->\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      libraries = $q.defer()\n\n      apiLibrary.all (data) ->\n        _.forEach(data.libraries, (library) ->\n          $scope.thumbnail[library.name] = library.thumbnails[0])\n        $scope.myLibraries = _.filter(data.libraries, (library) ->\n          _.isEqual(library.author.username, $scope.user.username))\n        $scope.contribLibraries = _.filter(data.libraries, (library) ->\n          _.contains(_.pluck(library.contributors, 'username'), $scope.user.username))\n        $scope.sharedLibraries = _.filter(data.libraries, (library) ->\n          library.shared && !_.contains(_.pluck($scope.myLibraries, 'id'),\n            library.id) && !_.contains(_.pluck($scope.contribLibraries, 'id'), library.id))\n        if $scope.myLibraries.length == 0\n          if $scope.contribLibraries.length == 0\n            $scope.tabs.sharedLibraries = { active: true }\n          else\n            $scope.tabs.contribLibraries = { active: true }\n        else\n          $scope.tabs.myLibraries = { active: true }\n        libraries.resolve true\n\n      # register promises into one queue\n      elzoidoPromises.register('libraries', [libraries.promise])\n\n    # refresh when new library is added\n    $rootScope.$on 'event:narra-library-created', (event, status) ->\n      $scope.refresh()\n\n    # refresh when new library is added\n    $rootScope.$on 'event:narra-library-purged', (event, status) ->\n      $scope.refresh()\n\n    # click function for detail view\n    $scope.detail = (library) ->\n      $location.path('/libraries/' + library.id)\n\n    # initial data\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'LibrariesAddCtrl', ($q, $scope, $filter, $modalInstance, dialogs, apiLibrary, apiProject, apiUser, apiGenerator, elzoidoMessages, elzoidoAuthUser) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.library = { name: '', description: '', author: $scope.user, project: undefined }\n\n  apiLibrary.all (data) ->\n    $scope.libraries = data.libraries\n  apiProject.all (data) ->\n    temporary = angular.copy(data.projects)\n    if !$scope.user.isAdmin()\n      _.remove(temporary, (project) ->\n        !_.contains(_.pluck(project.contributors, 'username').concat([project.author.username]), $scope.user.username))\n    $scope.projects = temporary\n  apiUser.all (data) ->\n    $scope.users = data.users\n  apiGenerator.all (data) ->\n    $scope.generators = data.generators\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # save action\n  $scope.new = ->\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Registering new library ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    # prepare project\n    if _.isUndefined($scope.library.project)\n      $scope.library.project = {name: undefined}\n\n    apiLibrary.new({\n      name: $scope.library.name\n      author: $scope.library.author.username\n      description: $scope.library.description\n      generators: []\n      contributors: []\n      project: $scope.library.project.name\n    }, (data) ->\n      # close wait dialog\n      wait.close(data.library.id)\n      # fire message\n      elzoidoMessages.send('success', 'Success!', 'Library ' + data.library.name + ' was successfully created.')\n    )\n\n  $scope.validateName = (value) ->\n# get deffered object\n    validation = $q.defer()\n    # validate\n    apiLibrary.validate {name: value}, (data) ->\n      if data.validation then validation.resolve() else validation.reject()\n    # promise\n    validation.promise","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'LibrariesDetailCtrl', ($timeout, $scope, $rootScope, $routeParams, $location, $document, $interval, $filter, $q, dialogs, apiProject, apiLibrary, apiUser, apiItem, elzoidoPromises, constantMetadata, elzoidoAuthUser, elzoidoMessages) ->\n  # initialization\n  $scope.rotation = {}\n  $scope.thumbnail = {}\n  # init metadata providers\n  $scope.libraryMetadata = {}\n  $scope.itemsMetadata = {}\n  $scope.tabs = { library: { active: true }, items: { }, metadata: { } }\n\n  if !_.isUndefined($routeParams.tab)\n    $scope.tabs[$routeParams.tab].active = true\n\n  elzoidoPromises.promise('authentication').then ->\n    # refresh data\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      library = $q.defer()\n      items = $q.defer()\n\n      apiLibrary.get {id: $routeParams.library}, (data) ->\n        data.library.metadata = _.filter(data.library.metadata, (meta) ->\n          !_.isEqual(meta.name, 'shared')\n        )\n        $scope.library = data.library\n        library.resolve true\n      apiLibrary.items {id: $routeParams.library}, (data) ->\n        _.forEach(data.items, (item) ->\n          $scope.thumbnail[item.name] = item.thumbnails[0])\n        $scope.items = data.items\n        # resolve metadata providers\n        $scope.metadataProviders = constantMetadata.providers\n        items.resolve true\n\n      # set up context\n      library.promise.then ->\n        if !_.isUndefined($routeParams.project)\n          $scope.project = _.find($scope.library.projects, { name: $routeParams.project })\n\n      # register promises into one queue\n      elzoidoPromises.register('library', [library.promise, items.promise])\n\n    $scope.isSelected = ->\n      !_.isEmpty($scope.selectedItems().items)\n\n    $scope.selectedItems = ->\n      {items:_.where($scope.items, { selected: true }), library: $scope.library }\n\n    $scope.select = (selected) ->\n      _.forEach($scope.items, (item) ->\n        item.selected = if selected then true else undefined\n      )\n\n    $scope.isAuthor = ->\n      !_.isUndefined($scope.library) && _.isEqual($scope.library.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n    $scope.isContributor = ->\n      !_.isUndefined($scope.library) && _.include(_.pluck($scope.library.contributors, 'username'), $scope.user.username)\n\n    $scope.edit = ->\n      # check\n      return if !$scope.isAuthor() && !$scope.isContributor()\n      # process\n      confirm = dialogs.create('partials/librariesInformationEdit.html', 'LibrariesInformationEditCtrl',\n        {library: $scope.library},\n        {size: 'lg', keyboard: false})\n      # result\n      confirm.result.then (wait) ->\n        wait.result.then ->\n          # fire event\n          $rootScope.$broadcast 'event:narra-library-updated', $routeParams.library\n\n    $scope.deleteItems = ->\n      # open confirmation dialog\n      confirm = dialogs.confirm('Please Confirm',\n        'You are about to delete selected items, this procedure is irreversible. Do you want to continue ?')\n\n      # prepare items\n      itemsDelete = $scope.selectedItems().items\n\n      # result\n      confirm.result.then ->\n        # open waiting\n        waiting = dialogs.wait('Please Wait', 'Deleting selected items ...')\n        # promises\n        promises = []\n        # delete items\n        _.forEach(itemsDelete, (item) ->\n          # get deffered\n          wait = $q.defer()\n          # register promise\n          promises.push(wait.promise)\n          # delete items\n          $timeout(->\n            apiItem.delete({id: item.id}, (data) ->\n              # remove item from stack\n              $scope.items.remove(item)\n              # resolve\n              wait.resolve true\n            , (error) ->\n              wait.resolve true\n              # fire message\n              elzoidoMessages.send('danger', 'Error!', 'Item ' + item.name + ' encountered problem.')\n            )\n          , 100)\n        )\n        # register promises into one queue\n        elzoidoPromises.register('delete-items', promises)\n        # close dialog\n        elzoidoPromises.promise('delete-items').then ->\n          # fire message\n          elzoidoMessages.send('success', 'Success!', 'Items were successfully deleted.')\n          # close dialog\n          waiting.close()\n\n    $scope.deleteLibrary = ->\n      # open confirmation dialog\n      confirm = dialogs.confirm('Please Confirm',\n        'You are about to delete the library ' + $scope.library.name + ', this procedure is irreversible. Do you want to continue ?')\n\n      # result\n      confirm.result.then ->\n        # delete storage and its projects\n        apiLibrary.delete {id: $scope.library.id}, ->\n          # send message\n          elzoidoMessages.send('success', 'Success!', 'Library ' + $scope.library.name + ' was successfully deleted.')\n          # redirect back to libraries\n          if _.isUndefined($scope.project)\n            $location.url('/libraries')\n          else\n            $location.url('/projects/' + $scope.project + '#' + $scope.from)\n\n    # click function for detail view\n    $scope.detail = (item) ->\n      # define basic url\n      url = '/items/' + item.id + '?library=' + $scope.library.id\n      # when comes from project\n      if !_.isUndefined($scope.project)\n        url = url + '&project=' + $scope.project.name\n      # change location\n      $location.url(url)\n\n    # refresh when new library is added\n    $scope.$on 'event:narra-item-created', (event) ->\n      if !_.isUndefined($routeParams.library)\n        $scope.refresh()\n\n    # refresh when new library is added\n    $scope.$on 'event:narra-item-updated', (event, item) ->\n      #if !_.isUndefined($routeParams.library) && _.find($scope.items, {id: item})\n        #scope.refresh()\n\n    # refresh when new library is added\n    $scope.$on 'event:narra-library-updated', (event, library) ->\n      if !_.isUndefined($routeParams.library) && _.isEqual($routeParams.library, library)\n        $scope.refresh()\n\n    # initial data\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'LibrariesInformationEditCtrl', ($scope, $filter, $modalInstance, dialogs, apiProject, apiLibrary, apiUser, apiGenerator, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.library = data.library\n  $scope.initial = angular.copy(data.library)\n  $scope.contributor = {}\n\n  apiLibrary.all (data) ->\n    $scope.libraries = data.libraries\n  apiProject.all (data) ->\n    $scope.projects = data.projects\n  apiUser.all (data) ->\n    $scope.users = data.users\n    $scope.filter()\n  apiGenerator.all (data) ->\n    # select first generator and activate\n    if !_.isEmpty($scope.library.generators)\n      # activate\n      _.forEach(data.generators, (generator) ->\n        temp = _.find($scope.library.generators, {identifier: generator.identifier})\n        if !_.isUndefined(temp)\n          generator.options = temp.options\n          generator.active = true\n          if _.isUndefined($scope.generator)\n            $scope.generator = generator\n      )\n    # prepare data for session\n    $scope.generators = data.generators\n\n  $scope.select = (generator) ->\n    if generator.active\n      $scope.generator = generator\n\n  $scope.activate = (generator) ->\n    if generator.active\n      $scope.generator = generator\n    else\n      $scope.generator = null\n\n  $scope.addContribution = (user) ->\n    $scope.library.contributors.push(user)\n    $scope.contributor.selected = undefined\n    # refresh\n    $scope.filter()\n\n  $scope.removeContribution = (user) ->\n    _.pull($scope.library.contributors, user)\n    # refresh\n    $scope.filter()\n\n  $scope.isSelected = (generator) ->\n    if $scope.generator\n      $scope.generator.identifier == generator.identifier\n\n  $scope.isAuthor = ->\n    !_.isUndefined($scope.library) && _.isEqual($scope.library.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n  $scope.filter = ->\n    $scope.contributors = _.filter($scope.users, (user) ->\n      !_.isEqual($scope.library.author.username, user.username) && !_.include(_.pluck($scope.library.contributors,\n        'username'), user.username)\n    )\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # save action\n  $scope.edit = ->\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Saving library ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    # process generators\n    $scope.library.generators = _.filter($scope.generators, (generator) ->\n      generator.active\n    )\n\n    apiLibrary.update({\n      id: $scope.library.id\n      name: $scope.library.name\n      author: $scope.library.author.username\n      shared: $scope.library.shared.toString()\n      description: $scope.library.description\n      generators: _.map($scope.library.generators, (g) ->\n        { identifier: g.identifier, options: g.options }\n      )\n      contributors: _.pluck($scope.library.contributors, 'username')\n    }, (data) ->\n      # close wait dialog\n      wait.close(data.library)\n      # fire message\n      elzoidoMessages.send('success', 'Success!', 'Library ' + data.library.name + ' was successfully saved.')\n    )\n\n  $scope.validateName = (value) ->\n    !(_.contains(_.pluck($scope.libraries, 'name'),  value))","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataCtrl', ($scope, $q, $rootScope, $routeParams, dialogs, constantMetadata, elzoidoMessages, elzoidoAuthUser, apiItem, apiLibrary, apiProject) ->\n  # prepare data\n  $scope.refresh = ->\n    # get current user\n    $scope.user = elzoidoAuthUser.get()\n    # init api\n    $scope.api = $scope.api || {}\n    $scope.player = $scope.api || {}\n\n    # init data\n    switch($scope.type)\n      when 'items'\n        # implement add function\n        $scope.api.add = (provider) ->\n          # prepare items\n          input = $scope.data()\n          # meta container\n          metaValues = {}\n          # deffered object\n          values = $q.defer()\n          # get or prepare autocompletion\n          if _.isUndefined(metaValues[provider.id])\n            apiLibrary.metaValues {id: input.library.id, name: provider.id}, (data) ->\n              if !_.isEmpty(data.values)\n                if !_.isArray(data.values)\n                  data.values = [data.values]\n                metaValues[provider.id] = data.values\n              values.resolve true\n          else\n            values.resolve true\n          # open confirmation dialog\n          values.promise.then ->\n            confirm = dialogs.create(provider.templateAdd, provider.controller, { values: metaValues[provider.id] },\n              {size: 'lg', keyboard: false})\n            # result\n            confirm.result.then (meta) ->\n              # open waiting\n              waiting = dialogs.wait('Please Wait', 'Adding new metadata ...')\n              # check for array\n              if _.isArray(meta.value)\n                meta.value = meta.value.join(', ')\n              # add\n              apiItem.metadataNew {items: _.pluck(input.items, 'id'), meta: meta.name, value: meta.value, generator: 'user'}, ->\n                # close dialog\n                waiting.close()\n                # send message\n                elzoidoMessages.send('success', 'Success!', 'New metadata was successfully created.')\n                # broadcast event\n                _.forEach(input.items, (item) ->\n                  $rootScope.$broadcast 'event:narra-item-updated', item.id\n                )\n      when 'item'\n        # assign data\n        $scope.item = $scope.data\n        $scope.auth = $scope.data.library\n        $scope.connector = _.result(_.find($scope.item.metadata, { 'name': 'connector', 'generator': 'source' }), 'value')\n        # temporary meta container\n        meta = {}\n        metaValues = {}\n        generators = []\n        # prepare metadata\n        _.forEach(_.filter(_.uniq(_.pluck($scope.item.metadata, 'generator')), (generator) ->\n            !_.isEqual(generator, 'thumbnail') && !_.isEqual(generator, 'transcoder')\n          ), (generator) ->\n          # assign generator\n          generators.push(generator)\n          # check\n          if generator.indexOf('user') > -1\n            # init\n            meta['user'] = {name: 'user', data: []} if _.isUndefined(meta['user'])\n            # push into\n            meta['user'].data = meta['user'].data.concat(_.where($scope.item.metadata, {'generator': generator}))\n          else\n            meta[generator] = {name: generator, data: _.where($scope.item.metadata, {'generator': generator})}\n        )\n        # assign meta\n        $scope.meta = meta\n        # assign used generators\n        $scope.generators = generators\n        # local methods\n        $scope.edit = (meta) ->\n          # get relevant provider\n          provider = _.find(constantMetadata.providers, { id: meta.name })\n          # switch to custom if there is no appropriate\n          if _.isUndefined(provider)\n            provider = _.find(constantMetadata.providers, { id: 'custom' })\n          # prepare data\n          values = $q.defer()\n          # get or prepare autocompletion\n          if _.isUndefined(metaValues[provider.id])\n            apiLibrary.metaValues {id: $scope.item.library.id, name: provider.id}, (data) ->\n              if !_.isEmpty(data.values)\n                if !_.isArray(data.values)\n                  data.values = [data.values]\n                metaValues[provider.id] = data.values\n              values.resolve true\n          else\n            values.resolve true\n          # prepare data\n          values.promise.then ->\n            data = { meta: meta, item: $scope.item, values: metaValues[provider.id] }\n            # check if it is a video or audio\n            if $scope.player.ready\n              # get mark object\n              mark =\n                use: !_.isEmpty(meta.marks)\n                in: if _.isEmpty(meta.marks) then Math.floor($scope.player.currentTime / 1000) else meta.marks[0].in\n                out: if _.isEmpty(meta.marks) then undefined else meta.marks[0].out\n                max: Math.floor($scope.player.totalTime / 1000)\n              # merge\n              _.merge(data,  { seek: $scope.seek, mark: mark })\n  \n            # open confirmation dialog\n            confirm = dialogs.create(provider.templateEdit, provider.controller, data,\n              {size: 'lg', keyboard: false})\n            # result\n            confirm.result.then (data) ->\n              switch(data.action)\n                when 'update'\n                  # open waiting\n                  waiting = dialogs.wait('Please Wait', 'Updating metadata ...')\n                  # check for array\n                  if _.isArray(data.meta.value)\n                    data.meta.value = data.meta.value.join(', ')\n                  # update\n                  apiItem.metadataUpdate {id: $scope.item.id, meta: data.meta.name, value: data.meta.value, marks: data.meta.marks, generator: meta.generator, new_generator: 'user'}, ->\n                    # close dialog\n                    waiting.close()\n                    # send message\n                    elzoidoMessages.send('success', 'Success!', 'Metadata was successfully updated.')\n                    # broadcast event\n                    $rootScope.$broadcast 'event:narra-item-updated', $scope.item.id\n                when 'delete'\n                # open waiting\n                  waiting = dialogs.wait('Please Wait', 'Deleting metadata ...')\n                  # update\n                  apiItem.metadataDelete {id: $scope.item.id, param: data.meta.name, generator: meta.generator}, ->\n                    # close dialog\n                    waiting.close()\n                    # send message\n                    elzoidoMessages.send('success', 'Success!', 'Metadata was successfully deleted.')\n                    # broadcast event\n                    $rootScope.$broadcast 'event:narra-item-updated', $scope.item.id\n        # API Methods\n        # define methods\n        $scope.api.regenerate = (generator) ->\n          # open confirmation dialog\n          confirm = dialogs.confirm('Please Confirm',\n            'You are about to regenerate the item ' + $scope.item.name + ', this will erase all metadata by the generator. Do you want to continue ?')\n\n          # result\n          confirm.result.then ->\n            # regenerate item for the selected generator\n            apiItem.regenerate {id: $scope.item.id, param: generator}, ->\n              # send message\n              elzoidoMessages.send('success', 'Success!', 'Item ' + $scope.item.name + ' was successfully deleted.')\n              # brodcast event\n              $rootScope.$broadcast 'event:narra-item-updated', $scope.item.id\n\n        $scope.api.add = (provider) ->\n          values = $q.defer()\n          # get or prepare autocompletion\n          if _.isUndefined(metaValues[provider.id])\n            apiLibrary.metaValues {id: $scope.item.library.id, name: provider.id}, (data) ->\n              if !_.isEmpty(data.values)\n                if !_.isArray(data.values)\n                  data.values = [data.values]\n              values.resolve true\n          else\n            values.resolve true\n          # prepare data\n          values.promise.then ->\n            data = { all: _.pluck($scope.item.metadata, 'name'), values: metaValues[provider.id]}\n            # check if it is a video or audio\n            if $scope.player.ready\n              _.merge(data,  { seek: $scope.seek, mark: { use: false, in: Math.floor($scope.player.currentTime / 1000), max: Math.floor($scope.player.totalTime / 1000)}, out: undefined })\n            # open confirmation dialog\n            confirm = dialogs.create(provider.templateAdd, provider.controller, data,\n              {size: 'lg', keyboard: false})\n            # result\n            confirm.result.then (meta) ->\n              # open waiting\n              waiting = dialogs.wait('Please Wait', 'Adding new metadata ...')\n              # check for array\n              if _.isArray(meta.value)\n                meta.value = meta.value.join(', ')\n              # add\n              apiItem.metadataNew {id: $scope.item.id, meta: meta.name, value: meta.value, marks: meta.marks, generator: 'user'}, ->\n                # close dialog\n                waiting.close()\n                # send message\n                elzoidoMessages.send('success', 'Success!', 'New metadata was successfully created.')\n                # broadcast event\n                $rootScope.$broadcast 'event:narra-item-updated', $scope.item.id\n      when 'library'\n        # assign data\n        $scope.library = $scope.data\n        $scope.auth = $scope.data\n        # init metadata\n        $scope.meta = $scope.library.metadata\n        # local methods\n        $scope.edit = (meta) ->\n          # get custom provider\n          provider = _.find(constantMetadata.providers, { id: 'custom' })\n          # open confirmation dialog\n          confirm = dialogs.create(provider.templateEdit, provider.controller, { meta: meta },\n            {size: 'lg', keyboard: false})\n          # result\n          confirm.result.then (data) ->\n            switch(data.action)\n              when 'update'\n                # open waiting\n                waiting = dialogs.wait('Please Wait', 'Updating metadata ...')\n                # update\n                apiLibrary.metadataUpdate {id: $scope.library.id, meta: data.meta.name, value: data.meta.value}, ->\n                  # close dialog\n                  waiting.close()\n                  # send message\n                  elzoidoMessages.send('success', 'Success!', 'Metadata was successfully updated.')\n                  # broadcast event\n                  $rootScope.$broadcast 'event:narra-library-updated', $scope.library.id\n              when 'delete'\n              # open waiting\n                waiting = dialogs.wait('Please Wait', 'Deleting metadata ...')\n                # update\n                apiLibrary.metadataDelete {id: $scope.library.id, param: data.meta.name}, ->\n                  # close dialog\n                  waiting.close()\n                  # send message\n                  elzoidoMessages.send('success', 'Success!', 'Metadata was successfully deleted.')\n                  # broadcast event\n                  $rootScope.$broadcast 'event:narra-library-updated', $scope.library.id\n        # API Methods\n        # define methods\n        $scope.api.regenerate = (generator) ->\n          # open confirmation dialog\n          confirm = dialogs.confirm('Please Confirm',\n            'You are about to regenerate the library ' + $scope.library.name + ', this will erase all metadata by the generator. Do you want to continue ?')\n          # result\n          confirm.result.then ->\n            # regenerate item for the selected generator\n            apiLibrary.regenerate {id: $scope.library.id, param: generator}, ->\n              # send message\n              elzoidoMessages.send('success', 'Success!', 'Library ' + $scope.library.name + ' was successfully regenerated.')\n              # brodcast event\n              $rootScope.$broadcast 'event:narra-library-updated', $scope.library.id\n        $scope.api.add = ->\n          # get custom provider\n          provider = _.find(constantMetadata.providers, { id: 'custom' })\n          # open confirmation dialog\n          confirm = dialogs.create(provider.templateAdd, provider.controller, { all: _.pluck($scope.library.metadata, 'name') },\n            {size: 'lg', keyboard: false})\n          # result\n          confirm.result.then (meta) ->\n            # open waiting\n            waiting = dialogs.wait('Please Wait', 'Adding new metadata ...')\n            # add\n            apiLibrary.metadataNew {id: $scope.library.id, meta: meta.name, value: meta.value}, ->\n              # close dialog\n              waiting.close()\n              # send message\n              elzoidoMessages.send('success', 'Success!', 'New metadata was successfully created.')\n              # broadcast event\n              $rootScope.$broadcast 'event:narra-library-updated', $scope.library.id\n      when 'project'\n        # assign data\n        $scope.project = $scope.data\n        $scope.auth = $scope.data\n        # init metadata\n        $scope.meta = $scope.project.metadata\n        # local methods\n        $scope.edit = (meta) ->\n          # get custom provider\n          provider = _.find(constantMetadata.providers, { id: 'custom' })\n          # open confirmation dialog\n          confirm = dialogs.create(provider.templateEdit, provider.controller, { meta: meta },\n            {size: 'lg', keyboard: false})\n          # result\n          confirm.result.then (data) ->\n            switch(data.action)\n              when 'update'\n              # open waiting\n                waiting = dialogs.wait('Please Wait', 'Updating metadata ...')\n                # update\n                apiProject.metadataUpdate {name: $scope.project.name, meta: data.meta.name, value: data.meta.value}, ->\n                  # close dialog\n                  waiting.close()\n                  # send message\n                  elzoidoMessages.send('success', 'Success!', 'Metadata was successfully updated.')\n                  # broadcast event\n                  $rootScope.$broadcast 'event:narra-project-updated', $scope.project.name\n              when 'delete'\n              # open waiting\n                waiting = dialogs.wait('Please Wait', 'Deleting metadata ...')\n                # update\n                apiProject.metadataDelete {name: $scope.project.name, param: data.meta.name}, ->\n                  # close dialog\n                  waiting.close()\n                  # send message\n                  elzoidoMessages.send('success', 'Success!', 'Metadata was successfully deleted.')\n                  # broadcast event\n                  $rootScope.$broadcast 'event:narra-project-updated', $scope.project.name\n        # API Methods\n        # define methods\n        $scope.api.add = ->\n          # get custom provider\n          provider = _.find(constantMetadata.providers, { id: 'custom' })\n          # open confirmation dialog\n          confirm = dialogs.create(provider.templateAdd, provider.controller, { all: _.pluck($scope.project.metadata, 'name').concat(['public']) },\n            {size: 'lg', keyboard: false})\n          # result\n          confirm.result.then (meta) ->\n            # open waiting\n            waiting = dialogs.wait('Please Wait', 'Adding new metadata ...')\n            # add\n            apiProject.metadataNew {name: $scope.project.name, meta: meta.name, value: meta.value}, ->\n              # close dialog\n              waiting.close()\n              # send message\n              elzoidoMessages.send('success', 'Success!', 'New metadata was successfully created.')\n              # broadcast event\n              $rootScope.$broadcast 'event:narra-project-updated', $scope.project.name\n\n  # check when the data are prepared\n  $scope.$watch 'data', (data) ->\n    $scope.refresh() if !_.isUndefined(data)\n\n  $scope.seek = (position) ->\n    $scope.player.seekTime(position)\n\n  $scope.isAuthor = ->\n    !_.isUndefined($scope.auth) && _.isEqual($scope.auth.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n  $scope.isContributor = ->\n    !_.isUndefined($scope.auth) && _.include(_.pluck($scope.auth.contributors, 'username'), $scope.user.username)\n\n  $scope.isLink = (text) ->\n    text.indexOf('http') == 0\n\n  # LISTENERS\n  # item listener\n  $rootScope.$on 'event:narra-item-updated', (event, item) ->\n    if _.isEqual($scope.type, 'item') && _.isEqual($routeParams.item, item)\n      $scope.refresh()\n  # library listener\n  $rootScope.$on 'event:narra-library-updated', (event, library) ->\n    if _.isEqual($scope.type, 'library') && _.isEqual($routeParams.library, library)\n      $scope.refresh()\n  # library listener\n  $rootScope.$on 'event:narra-project-updated', (event, project) ->\n    if _.isEqual($scope.type, 'project') && _.isEqual($routeParams.project, project)\n      $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataAuthorCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'author', value: ''}\n  else\n    $scope.meta = data.meta\n    $scope.meta.value = _.map(data.meta.value.split(','), (type) ->\n      type.trim()\n    )\n\n  if _.isUndefined(data.values)\n    $scope.authors = []\n  else\n    $scope.authors = data.values\n\n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataCustomCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.all = data.all || []\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: '', value: ''}\n  else\n    $scope.meta = data.meta\n  # init marks\n  if !_.isUndefined(data.mark)\n    $scope.seek = data.seek\n    $scope.mark = data.mark\n    # watch mark changes to seek player\n    $scope.$watch 'mark.in', (value) ->\n      if !_.isUndefined(value)\n        $scope.seek(value)\n    $scope.$watch 'mark.out', (value) ->\n      if !_.isUndefined(value)\n        $scope.seek(value)\n\n  $scope.validateName = (value) ->\n    !_.contains($scope.all, value)\n\n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # append marks\n    if !_.isUndefined($scope.mark) && $scope.mark.use\n      $scope.meta = _.merge($scope.meta, marks: [{in: $scope.mark.in, out: $scope.mark.out}])\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # append marks\n    if !_.isUndefined($scope.mark)\n      if $scope.mark.use\n        $scope.meta = _.merge($scope.meta, marks: [{in: $scope.mark.in, out: $scope.mark.out}])\n      else\n        $scope.meta.marks = []\n    # add meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # add meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataDescriptionCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'description', value: ''}\n  else\n    $scope.meta = data.meta\n  \n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataKeywordsCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'keywords', value: ''}\n  else\n    $scope.meta = data.meta\n    $scope.meta.value = _.map(data.meta.value.split(','), (type) ->\n      type.trim()\n    )\n  \n  if _.isUndefined(data.values)\n    $scope.keywords = []\n  else\n    $scope.keywords = data.values\n\n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataLanguageCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'language', value: ''}\n  else\n    $scope.meta = data.meta\n\n  $scope.languages = {\n    \"ab\":{\n        \"name\":\"Abkhaz\",\n        \"nativeName\":\"аҧсуа\"\n    },\n    \"aa\":{\n        \"name\":\"Afar\",\n        \"nativeName\":\"Afaraf\"\n    },\n    \"af\":{\n        \"name\":\"Afrikaans\",\n        \"nativeName\":\"Afrikaans\"\n    },\n    \"ak\":{\n        \"name\":\"Akan\",\n        \"nativeName\":\"Akan\"\n    },\n    \"sq\":{\n        \"name\":\"Albanian\",\n        \"nativeName\":\"Shqip\"\n    },\n    \"am\":{\n        \"name\":\"Amharic\",\n        \"nativeName\":\"አማርኛ\"\n    },\n    \"ar\":{\n        \"name\":\"Arabic\",\n        \"nativeName\":\"العربية\"\n    },\n    \"an\":{\n        \"name\":\"Aragonese\",\n        \"nativeName\":\"Aragonés\"\n    },\n    \"hy\":{\n        \"name\":\"Armenian\",\n        \"nativeName\":\"Հայերեն\"\n    },\n    \"as\":{\n        \"name\":\"Assamese\",\n        \"nativeName\":\"অসমীয়া\"\n    },\n    \"av\":{\n        \"name\":\"Avaric\",\n        \"nativeName\":\"авар мацӀ, магӀарул мацӀ\"\n    },\n    \"ae\":{\n        \"name\":\"Avestan\",\n        \"nativeName\":\"avesta\"\n    },\n    \"ay\":{\n        \"name\":\"Aymara\",\n        \"nativeName\":\"aymar aru\"\n    },\n    \"az\":{\n        \"name\":\"Azerbaijani\",\n        \"nativeName\":\"azərbaycan dili\"\n    },\n    \"bm\":{\n        \"name\":\"Bambara\",\n        \"nativeName\":\"bamanankan\"\n    },\n    \"ba\":{\n        \"name\":\"Bashkir\",\n        \"nativeName\":\"башҡорт теле\"\n    },\n    \"eu\":{\n        \"name\":\"Basque\",\n        \"nativeName\":\"euskara, euskera\"\n    },\n    \"be\":{\n        \"name\":\"Belarusian\",\n        \"nativeName\":\"Беларуская\"\n    },\n    \"bn\":{\n        \"name\":\"Bengali\",\n        \"nativeName\":\"বাংলা\"\n    },\n    \"bh\":{\n        \"name\":\"Bihari\",\n        \"nativeName\":\"भोजपुरी\"\n    },\n    \"bi\":{\n        \"name\":\"Bislama\",\n        \"nativeName\":\"Bislama\"\n    },\n    \"bs\":{\n        \"name\":\"Bosnian\",\n        \"nativeName\":\"bosanski jezik\"\n    },\n    \"br\":{\n        \"name\":\"Breton\",\n        \"nativeName\":\"brezhoneg\"\n    },\n    \"bg\":{\n        \"name\":\"Bulgarian\",\n        \"nativeName\":\"български език\"\n    },\n    \"my\":{\n        \"name\":\"Burmese\",\n        \"nativeName\":\"ဗမာစာ\"\n    },\n    \"ca\":{\n        \"name\":\"Catalan; Valencian\",\n        \"nativeName\":\"Català\"\n    },\n    \"ch\":{\n        \"name\":\"Chamorro\",\n        \"nativeName\":\"Chamoru\"\n    },\n    \"ce\":{\n        \"name\":\"Chechen\",\n        \"nativeName\":\"нохчийн мотт\"\n    },\n    \"ny\":{\n        \"name\":\"Chichewa; Chewa; Nyanja\",\n        \"nativeName\":\"chiCheŵa, chinyanja\"\n    },\n    \"zh\":{\n        \"name\":\"Chinese\",\n        \"nativeName\":\"中文 (Zhōngwén), 汉语, 漢語\"\n    },\n    \"cv\":{\n        \"name\":\"Chuvash\",\n        \"nativeName\":\"чӑваш чӗлхи\"\n    },\n    \"kw\":{\n        \"name\":\"Cornish\",\n        \"nativeName\":\"Kernewek\"\n    },\n    \"co\":{\n        \"name\":\"Corsican\",\n        \"nativeName\":\"corsu, lingua corsa\"\n    },\n    \"cr\":{\n        \"name\":\"Cree\",\n        \"nativeName\":\"ᓀᐦᐃᔭᐍᐏᐣ\"\n    },\n    \"hr\":{\n        \"name\":\"Croatian\",\n        \"nativeName\":\"hrvatski\"\n    },\n    \"cs\":{\n        \"name\":\"Czech\",\n        \"nativeName\":\"česky, čeština\"\n    },\n    \"da\":{\n        \"name\":\"Danish\",\n        \"nativeName\":\"dansk\"\n    },\n    \"dv\":{\n        \"name\":\"Divehi; Dhivehi; Maldivian;\",\n        \"nativeName\":\"ދިވެހި\"\n    },\n    \"nl\":{\n        \"name\":\"Dutch\",\n        \"nativeName\":\"Nederlands, Vlaams\"\n    },\n    \"en\":{\n        \"name\":\"English\",\n        \"nativeName\":\"English\"\n    },\n    \"eo\":{\n        \"name\":\"Esperanto\",\n        \"nativeName\":\"Esperanto\"\n    },\n    \"et\":{\n        \"name\":\"Estonian\",\n        \"nativeName\":\"eesti, eesti keel\"\n    },\n    \"ee\":{\n        \"name\":\"Ewe\",\n        \"nativeName\":\"Eʋegbe\"\n    },\n    \"fo\":{\n        \"name\":\"Faroese\",\n        \"nativeName\":\"føroyskt\"\n    },\n    \"fj\":{\n        \"name\":\"Fijian\",\n        \"nativeName\":\"vosa Vakaviti\"\n    },\n    \"fi\":{\n        \"name\":\"Finnish\",\n        \"nativeName\":\"suomi, suomen kieli\"\n    },\n    \"fr\":{\n        \"name\":\"French\",\n        \"nativeName\":\"français, langue française\"\n    },\n    \"ff\":{\n        \"name\":\"Fula; Fulah; Pulaar; Pular\",\n        \"nativeName\":\"Fulfulde, Pulaar, Pular\"\n    },\n    \"gl\":{\n        \"name\":\"Galician\",\n        \"nativeName\":\"Galego\"\n    },\n    \"ka\":{\n        \"name\":\"Georgian\",\n        \"nativeName\":\"ქართული\"\n    },\n    \"de\":{\n        \"name\":\"German\",\n        \"nativeName\":\"Deutsch\"\n    },\n    \"el\":{\n        \"name\":\"Greek, Modern\",\n        \"nativeName\":\"Ελληνικά\"\n    },\n    \"gn\":{\n        \"name\":\"Guaraní\",\n        \"nativeName\":\"Avañeẽ\"\n    },\n    \"gu\":{\n        \"name\":\"Gujarati\",\n        \"nativeName\":\"ગુજરાતી\"\n    },\n    \"ht\":{\n        \"name\":\"Haitian; Haitian Creole\",\n        \"nativeName\":\"Kreyòl ayisyen\"\n    },\n    \"ha\":{\n        \"name\":\"Hausa\",\n        \"nativeName\":\"Hausa, هَوُسَ\"\n    },\n    \"he\":{\n        \"name\":\"Hebrew (modern)\",\n        \"nativeName\":\"עברית\"\n    },\n    \"hz\":{\n        \"name\":\"Herero\",\n        \"nativeName\":\"Otjiherero\"\n    },\n    \"hi\":{\n        \"name\":\"Hindi\",\n        \"nativeName\":\"हिन्दी, हिंदी\"\n    },\n    \"ho\":{\n        \"name\":\"Hiri Motu\",\n        \"nativeName\":\"Hiri Motu\"\n    },\n    \"hu\":{\n        \"name\":\"Hungarian\",\n        \"nativeName\":\"Magyar\"\n    },\n    \"ia\":{\n        \"name\":\"Interlingua\",\n        \"nativeName\":\"Interlingua\"\n    },\n    \"id\":{\n        \"name\":\"Indonesian\",\n        \"nativeName\":\"Bahasa Indonesia\"\n    },\n    \"ie\":{\n        \"name\":\"Interlingue\",\n        \"nativeName\":\"Originally called Occidental; then Interlingue after WWII\"\n    },\n    \"ga\":{\n        \"name\":\"Irish\",\n        \"nativeName\":\"Gaeilge\"\n    },\n    \"ig\":{\n        \"name\":\"Igbo\",\n        \"nativeName\":\"Asụsụ Igbo\"\n    },\n    \"ik\":{\n        \"name\":\"Inupiaq\",\n        \"nativeName\":\"Iñupiaq, Iñupiatun\"\n    },\n    \"io\":{\n        \"name\":\"Ido\",\n        \"nativeName\":\"Ido\"\n    },\n    \"is\":{\n        \"name\":\"Icelandic\",\n        \"nativeName\":\"Íslenska\"\n    },\n    \"it\":{\n        \"name\":\"Italian\",\n        \"nativeName\":\"Italiano\"\n    },\n    \"iu\":{\n        \"name\":\"Inuktitut\",\n        \"nativeName\":\"ᐃᓄᒃᑎᑐᑦ\"\n    },\n    \"ja\":{\n        \"name\":\"Japanese\",\n        \"nativeName\":\"日本語 (にほんご／にっぽんご)\"\n    },\n    \"jv\":{\n        \"name\":\"Javanese\",\n        \"nativeName\":\"basa Jawa\"\n    },\n    \"kl\":{\n        \"name\":\"Kalaallisut, Greenlandic\",\n        \"nativeName\":\"kalaallisut, kalaallit oqaasii\"\n    },\n    \"kn\":{\n        \"name\":\"Kannada\",\n        \"nativeName\":\"ಕನ್ನಡ\"\n    },\n    \"kr\":{\n        \"name\":\"Kanuri\",\n        \"nativeName\":\"Kanuri\"\n    },\n    \"ks\":{\n        \"name\":\"Kashmiri\",\n        \"nativeName\":\"कश्मीरी, كشميري‎\"\n    },\n    \"kk\":{\n        \"name\":\"Kazakh\",\n        \"nativeName\":\"Қазақ тілі\"\n    },\n    \"km\":{\n        \"name\":\"Khmer\",\n        \"nativeName\":\"ភាសាខ្មែរ\"\n    },\n    \"ki\":{\n        \"name\":\"Kikuyu, Gikuyu\",\n        \"nativeName\":\"Gĩkũyũ\"\n    },\n    \"rw\":{\n        \"name\":\"Kinyarwanda\",\n        \"nativeName\":\"Ikinyarwanda\"\n    },\n    \"ky\":{\n        \"name\":\"Kirghiz, Kyrgyz\",\n        \"nativeName\":\"кыргыз тили\"\n    },\n    \"kv\":{\n        \"name\":\"Komi\",\n        \"nativeName\":\"коми кыв\"\n    },\n    \"kg\":{\n        \"name\":\"Kongo\",\n        \"nativeName\":\"KiKongo\"\n    },\n    \"ko\":{\n        \"name\":\"Korean\",\n        \"nativeName\":\"한국어 (韓國語), 조선말 (朝鮮語)\"\n    },\n    \"ku\":{\n        \"name\":\"Kurdish\",\n        \"nativeName\":\"Kurdî, كوردی‎\"\n    },\n    \"kj\":{\n        \"name\":\"Kwanyama, Kuanyama\",\n        \"nativeName\":\"Kuanyama\"\n    },\n    \"la\":{\n        \"name\":\"Latin\",\n        \"nativeName\":\"latine, lingua latina\"\n    },\n    \"lb\":{\n        \"name\":\"Luxembourgish, Letzeburgesch\",\n        \"nativeName\":\"Lëtzebuergesch\"\n    },\n    \"lg\":{\n        \"name\":\"Luganda\",\n        \"nativeName\":\"Luganda\"\n    },\n    \"li\":{\n        \"name\":\"Limburgish, Limburgan, Limburger\",\n        \"nativeName\":\"Limburgs\"\n    },\n    \"ln\":{\n        \"name\":\"Lingala\",\n        \"nativeName\":\"Lingála\"\n    },\n    \"lo\":{\n        \"name\":\"Lao\",\n        \"nativeName\":\"ພາສາລາວ\"\n    },\n    \"lt\":{\n        \"name\":\"Lithuanian\",\n        \"nativeName\":\"lietuvių kalba\"\n    },\n    \"lu\":{\n        \"name\":\"Luba-Katanga\",\n        \"nativeName\":\"\"\n    },\n    \"lv\":{\n        \"name\":\"Latvian\",\n        \"nativeName\":\"latviešu valoda\"\n    },\n    \"gv\":{\n        \"name\":\"Manx\",\n        \"nativeName\":\"Gaelg, Gailck\"\n    },\n    \"mk\":{\n        \"name\":\"Macedonian\",\n        \"nativeName\":\"македонски јазик\"\n    },\n    \"mg\":{\n        \"name\":\"Malagasy\",\n        \"nativeName\":\"Malagasy fiteny\"\n    },\n    \"ms\":{\n        \"name\":\"Malay\",\n        \"nativeName\":\"bahasa Melayu, بهاس ملايو‎\"\n    },\n    \"ml\":{\n        \"name\":\"Malayalam\",\n        \"nativeName\":\"മലയാളം\"\n    },\n    \"mt\":{\n        \"name\":\"Maltese\",\n        \"nativeName\":\"Malti\"\n    },\n    \"mi\":{\n        \"name\":\"Māori\",\n        \"nativeName\":\"te reo Māori\"\n    },\n    \"mr\":{\n        \"name\":\"Marathi (Marāṭhī)\",\n        \"nativeName\":\"मराठी\"\n    },\n    \"mh\":{\n        \"name\":\"Marshallese\",\n        \"nativeName\":\"Kajin M̧ajeļ\"\n    },\n    \"mn\":{\n        \"name\":\"Mongolian\",\n        \"nativeName\":\"монгол\"\n    },\n    \"na\":{\n        \"name\":\"Nauru\",\n        \"nativeName\":\"Ekakairũ Naoero\"\n    },\n    \"nv\":{\n        \"name\":\"Navajo, Navaho\",\n        \"nativeName\":\"Diné bizaad, Dinékʼehǰí\"\n    },\n    \"nb\":{\n        \"name\":\"Norwegian Bokmål\",\n        \"nativeName\":\"Norsk bokmål\"\n    },\n    \"nd\":{\n        \"name\":\"North Ndebele\",\n        \"nativeName\":\"isiNdebele\"\n    },\n    \"ne\":{\n        \"name\":\"Nepali\",\n        \"nativeName\":\"नेपाली\"\n    },\n    \"ng\":{\n        \"name\":\"Ndonga\",\n        \"nativeName\":\"Owambo\"\n    },\n    \"nn\":{\n        \"name\":\"Norwegian Nynorsk\",\n        \"nativeName\":\"Norsk nynorsk\"\n    },\n    \"no\":{\n        \"name\":\"Norwegian\",\n        \"nativeName\":\"Norsk\"\n    },\n    \"ii\":{\n        \"name\":\"Nuosu\",\n        \"nativeName\":\"ꆈꌠ꒿ Nuosuhxop\"\n    },\n    \"nr\":{\n        \"name\":\"South Ndebele\",\n        \"nativeName\":\"isiNdebele\"\n    },\n    \"oc\":{\n        \"name\":\"Occitan\",\n        \"nativeName\":\"Occitan\"\n    },\n    \"oj\":{\n        \"name\":\"Ojibwe, Ojibwa\",\n        \"nativeName\":\"ᐊᓂᔑᓈᐯᒧᐎᓐ\"\n    },\n    \"cu\":{\n        \"name\":\"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic\",\n        \"nativeName\":\"ѩзыкъ словѣньскъ\"\n    },\n    \"om\":{\n        \"name\":\"Oromo\",\n        \"nativeName\":\"Afaan Oromoo\"\n    },\n    \"or\":{\n        \"name\":\"Oriya\",\n        \"nativeName\":\"ଓଡ଼ିଆ\"\n    },\n    \"os\":{\n        \"name\":\"Ossetian, Ossetic\",\n        \"nativeName\":\"ирон æвзаг\"\n    },\n    \"pa\":{\n        \"name\":\"Panjabi, Punjabi\",\n        \"nativeName\":\"ਪੰਜਾਬੀ, پنجابی‎\"\n    },\n    \"pi\":{\n        \"name\":\"Pāli\",\n        \"nativeName\":\"पाऴि\"\n    },\n    \"fa\":{\n        \"name\":\"Persian\",\n        \"nativeName\":\"فارسی\"\n    },\n    \"pl\":{\n        \"name\":\"Polish\",\n        \"nativeName\":\"polski\"\n    },\n    \"ps\":{\n        \"name\":\"Pashto, Pushto\",\n        \"nativeName\":\"پښتو\"\n    },\n    \"pt\":{\n        \"name\":\"Portuguese\",\n        \"nativeName\":\"Português\"\n    },\n    \"qu\":{\n        \"name\":\"Quechua\",\n        \"nativeName\":\"Runa Simi, Kichwa\"\n    },\n    \"rm\":{\n        \"name\":\"Romansh\",\n        \"nativeName\":\"rumantsch grischun\"\n    },\n    \"rn\":{\n        \"name\":\"Kirundi\",\n        \"nativeName\":\"kiRundi\"\n    },\n    \"ro\":{\n        \"name\":\"Romanian, Moldavian, Moldovan\",\n        \"nativeName\":\"română\"\n    },\n    \"ru\":{\n        \"name\":\"Russian\",\n        \"nativeName\":\"русский язык\"\n    },\n    \"sa\":{\n        \"name\":\"Sanskrit (Saṁskṛta)\",\n        \"nativeName\":\"संस्कृतम्\"\n    },\n    \"sc\":{\n        \"name\":\"Sardinian\",\n        \"nativeName\":\"sardu\"\n    },\n    \"sd\":{\n        \"name\":\"Sindhi\",\n        \"nativeName\":\"सिन्धी, سنڌي، سندھی‎\"\n    },\n    \"se\":{\n        \"name\":\"Northern Sami\",\n        \"nativeName\":\"Davvisámegiella\"\n    },\n    \"sm\":{\n        \"name\":\"Samoan\",\n        \"nativeName\":\"gagana faa Samoa\"\n    },\n    \"sg\":{\n        \"name\":\"Sango\",\n        \"nativeName\":\"yângâ tî sängö\"\n    },\n    \"sr\":{\n        \"name\":\"Serbian\",\n        \"nativeName\":\"српски језик\"\n    },\n    \"gd\":{\n        \"name\":\"Scottish Gaelic; Gaelic\",\n        \"nativeName\":\"Gàidhlig\"\n    },\n    \"sn\":{\n        \"name\":\"Shona\",\n        \"nativeName\":\"chiShona\"\n    },\n    \"si\":{\n        \"name\":\"Sinhala, Sinhalese\",\n        \"nativeName\":\"සිංහල\"\n    },\n    \"sk\":{\n        \"name\":\"Slovak\",\n        \"nativeName\":\"slovenčina\"\n    },\n    \"sl\":{\n        \"name\":\"Slovene\",\n        \"nativeName\":\"slovenščina\"\n    },\n    \"so\":{\n        \"name\":\"Somali\",\n        \"nativeName\":\"Soomaaliga, af Soomaali\"\n    },\n    \"st\":{\n        \"name\":\"Southern Sotho\",\n        \"nativeName\":\"Sesotho\"\n    },\n    \"es\":{\n        \"name\":\"Spanish; Castilian\",\n        \"nativeName\":\"español, castellano\"\n    },\n    \"su\":{\n        \"name\":\"Sundanese\",\n        \"nativeName\":\"Basa Sunda\"\n    },\n    \"sw\":{\n        \"name\":\"Swahili\",\n        \"nativeName\":\"Kiswahili\"\n    },\n    \"ss\":{\n        \"name\":\"Swati\",\n        \"nativeName\":\"SiSwati\"\n    },\n    \"sv\":{\n        \"name\":\"Swedish\",\n        \"nativeName\":\"svenska\"\n    },\n    \"ta\":{\n        \"name\":\"Tamil\",\n        \"nativeName\":\"தமிழ்\"\n    },\n    \"te\":{\n        \"name\":\"Telugu\",\n        \"nativeName\":\"తెలుగు\"\n    },\n    \"tg\":{\n        \"name\":\"Tajik\",\n        \"nativeName\":\"тоҷикӣ, toğikī, تاجیکی‎\"\n    },\n    \"th\":{\n        \"name\":\"Thai\",\n        \"nativeName\":\"ไทย\"\n    },\n    \"ti\":{\n        \"name\":\"Tigrinya\",\n        \"nativeName\":\"ትግርኛ\"\n    },\n    \"bo\":{\n        \"name\":\"Tibetan Standard, Tibetan, Central\",\n        \"nativeName\":\"བོད་ཡིག\"\n    },\n    \"tk\":{\n        \"name\":\"Turkmen\",\n        \"nativeName\":\"Türkmen, Түркмен\"\n    },\n    \"tl\":{\n        \"name\":\"Tagalog\",\n        \"nativeName\":\"Wikang Tagalog, ᜏᜒᜃᜅ᜔ ᜆᜄᜎᜓᜄ᜔\"\n    },\n    \"tn\":{\n        \"name\":\"Tswana\",\n        \"nativeName\":\"Setswana\"\n    },\n    \"to\":{\n        \"name\":\"Tonga (Tonga Islands)\",\n        \"nativeName\":\"faka Tonga\"\n    },\n    \"tr\":{\n        \"name\":\"Turkish\",\n        \"nativeName\":\"Türkçe\"\n    },\n    \"ts\":{\n        \"name\":\"Tsonga\",\n        \"nativeName\":\"Xitsonga\"\n    },\n    \"tt\":{\n        \"name\":\"Tatar\",\n        \"nativeName\":\"татарча, tatarça, تاتارچا‎\"\n    },\n    \"tw\":{\n        \"name\":\"Twi\",\n        \"nativeName\":\"Twi\"\n    },\n    \"ty\":{\n        \"name\":\"Tahitian\",\n        \"nativeName\":\"Reo Tahiti\"\n    },\n    \"ug\":{\n        \"name\":\"Uighur, Uyghur\",\n        \"nativeName\":\"Uyƣurqə, ئۇيغۇرچە‎\"\n    },\n    \"uk\":{\n        \"name\":\"Ukrainian\",\n        \"nativeName\":\"українська\"\n    },\n    \"ur\":{\n        \"name\":\"Urdu\",\n        \"nativeName\":\"اردو\"\n    },\n    \"uz\":{\n        \"name\":\"Uzbek\",\n        \"nativeName\":\"zbek, Ўзбек, أۇزبېك‎\"\n    },\n    \"ve\":{\n        \"name\":\"Venda\",\n        \"nativeName\":\"Tshivenḓa\"\n    },\n    \"vi\":{\n        \"name\":\"Vietnamese\",\n        \"nativeName\":\"Tiếng Việt\"\n    },\n    \"vo\":{\n        \"name\":\"Volapük\",\n        \"nativeName\":\"Volapük\"\n    },\n    \"wa\":{\n        \"name\":\"Walloon\",\n        \"nativeName\":\"Walon\"\n    },\n    \"cy\":{\n        \"name\":\"Welsh\",\n        \"nativeName\":\"Cymraeg\"\n    },\n    \"wo\":{\n        \"name\":\"Wolof\",\n        \"nativeName\":\"Wollof\"\n    },\n    \"fy\":{\n        \"name\":\"Western Frisian\",\n        \"nativeName\":\"Frysk\"\n    },\n    \"xh\":{\n        \"name\":\"Xhosa\",\n        \"nativeName\":\"isiXhosa\"\n    },\n    \"yi\":{\n        \"name\":\"Yiddish\",\n        \"nativeName\":\"ייִדיש\"\n    },\n    \"yo\":{\n        \"name\":\"Yoruba\",\n        \"nativeName\":\"Yorùbá\"\n    },\n    \"za\":{\n        \"name\":\"Zhuang, Chuang\",\n        \"nativeName\":\"Saɯ cueŋƅ, Saw cuengh\"\n    }\n  }\n  \n  $scope.codes = Object.keys($scope.languages)\n\n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataLocationCtrl', ($scope, $timeout, $modalInstance, dialogs, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  \n  $scope.mapOptions = {\n    center: new google.maps.LatLng(49.873, 15.552),\n    zoom: 7,\n    mapTypeId: google.maps.MapTypeId.ROADMAP\n  }\n\n  # by deafult map is disabled\n  $scope.ready = false\n  \n  # workaround to refresh map everytime\n  $timeout(->\n    $scope.ready = true\n  , 100)\n  \n  $scope.mapTilesLoaded = (map) ->\n    if _.isUndefined($scope.marker)\n      $scope.marker = new google.maps.Marker({map: map})\n      # default values\n      if $scope.meta.value != ''\n        $scope.marker.setPosition(map.center)\n  \n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'location', value: ''}\n  else\n    $scope.meta = data.meta\n    coordinates = $scope.meta.value.split(',')\n    $scope.mapOptions.center = new google.maps.LatLng(coordinates[0], coordinates[1])\n    $scope.mapOptions.zoom = 15\n  \n  $scope.setMarkerPosition = ($event, $params) ->\n    $scope.marker.setPosition(new google.maps.LatLng($params[0].latLng.G, $params[0].latLng.K))\n    $scope.meta.value = $params[0].latLng.G + \", \" + $params[0].latLng.K\n\n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataOrganizationsCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'organizations', value: ''}\n  else\n    $scope.meta = data.meta\n    $scope.meta.value = _.map(data.meta.value.split(','), (type) ->\n      type.trim()\n    )\n  \n  if _.isUndefined(data.values)\n    $scope.organizations = []\n  else\n    $scope.organizations = data.values\n\n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataPeopleCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'people', value: ''}\n  else\n    $scope.meta = data.meta\n    $scope.meta.value = _.map(data.meta.value.split(','), (type) ->\n      type.trim()\n    )\n\n  if _.isUndefined(data.values)\n    $scope.people = []\n  else\n    $scope.people = data.values\n\n  $scope.close = ->\n# cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n# add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n# update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n# delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataShotTypeCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'shot_type', value: ''}\n  else\n    $scope.meta = data.meta\n    $scope.meta.value = _.map(data.meta.value.split(','), (type) ->\n      type.trim()\n    )\n\n  $scope.shots = [\n    'Aerial Shot', 'Arc Shot', 'Bridging Shot', 'Close Up', 'Medium Shot', 'Long Shot', 'Cowboy Shot', 'Deep Focus',\n    'Dolly Zoom', 'Dutch Tilt', 'Establishing Shot', 'Handheld Shot', 'Low Angle Shot', 'High Angle Shot',\n    'Locked-Down Shot', 'Library Shot', 'Matte Shot', 'Money Shot', 'Over-The-Shoulder Shot', 'Pan', 'POV',\n    'The Sequence Shot', 'Steadicam Shot', 'Tilt', 'Top Shot', 'Tracking Shot', 'Two-Shot', 'Whip Pan', 'Zoom',\n    'Crane Shot', 'Static Shot'\n  ]\n\n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'MetadataSummaryCtrl', ($scope, $modalInstance, dialogs, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n\n  # init data\n  if _.isUndefined(data.meta)\n    $scope.meta = {name: 'summary', value: ''}\n  else\n    $scope.meta = data.meta\n  \n  $scope.close = ->\n    # cancel dialog\n    $modalInstance.dismiss('canceled')\n\n  $scope.add = ->\n    # add meta\n    $modalInstance.close($scope.meta)\n\n  $scope.edit = ->\n    # update meta\n    $modalInstance.close({action: 'update', meta: $scope.meta})\n\n  $scope.delete = ->\n    # delete meta\n    $modalInstance.close({action: 'delete', meta: $scope.meta})","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'ProjectsCtrl', ($scope, $rootScope, $location, $filter, $q, dialogs, apiProject, apiUser, elzoidoPromises, elzoidoAuthUser, elzoidoMessages) ->\n  # initialization\n  $scope.tabs = { myProjects: { }, contribProjects: { } }\n\n  elzoidoPromises.promise('authentication').then ->\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      projects = $q.defer()\n\n      apiProject.all (data) ->\n        $scope.projects = _.filter(data.projects, (project) ->\n          _.isEqual(project.author.username, $scope.user.username))\n        $scope.contributions = _.filter(data.projects, (project) ->\n          _.contains(_.pluck(project.contributors, 'username'), $scope.user.username))\n        if  $scope.projects.length == 0\n          $scope.tabs.contribProjects = { active: true }\n        else\n          $scope.tabs.myProjects = { active: true }\n        projects.resolve true\n\n      # register promises into one queue\n      elzoidoPromises.register('dashboard', [projects.promise])\n\n    # click functionfor detail view\n    $scope.detailProject = (project) ->\n      $location.path('/projects/' + project.name)\n\n    # refresh when new project is added\n    $rootScope.$on 'event:narra-project-created', (event, status) ->\n      $scope.refresh()\n\n    # click function for detail view\n    $scope.detail = (project) ->\n      $location.path('/projects/' + project.name)\n\n    # initial data\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'ProjectsAddCtrl', ($q, $scope, $filter, $modalInstance, dialogs, apiProject, apiUser, elzoidoMessages, elzoidoAuthUser) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.project = {name: '', title: '', author: $scope.user, description: ''}\n\n  apiProject.all (data) ->\n    $scope.projects = data.projects\n  apiUser.all (data) ->\n    $scope.users = data.users\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # save action\n  $scope.new = ->\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Registering new project ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    # append date suffix\n    project_name = $filter('projectname')($scope.project.name)\n\n    apiProject.new({\n        name: project_name\n        title: $scope.project.title\n        author: $scope.project.author.username\n        description: $scope.project.description\n        contributors: []\n      }, (data) ->\n        # close wait dialog\n        wait.close(data.project.name)\n        # fire message\n        elzoidoMessages.send('success', 'Success!', 'Project ' + data.project.title + ' was successfully created.')\n    )\n\n  $scope.validateName = (value) ->\n    # get deffered object\n    validation = $q.defer()\n    # validate\n    apiProject.validate {name: $filter('projectname')(value)}, (data) ->\n      if data.validation then validation.resolve() else validation.reject()\n    # promise\n    validation.promise\n\n  $scope.validateTitle = (value) ->\n    # get deffered object\n    validation = $q.defer()\n    # validate\n    apiProject.validate {title: value}, (data) ->\n      if data.validation then validation.resolve() else validation.reject()\n    # promise\n    validation.promise","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'ProjectsDetailCtrl', ($scope, $rootScope, $window, $document, $routeParams, $location, $filter, $q, dialogs, apiProject, apiVisualization, apiUser, elzoidoPromises, elzoidoMessages, elzoidoAuthUser) ->\n  # initialization\n  $scope.tabs = { project: { active: true }, libraries: { }, sequences: { }, visualizations: {}, metadata: { } }\n\n  elzoidoPromises.promise('authentication').then ->\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      project = $q.defer()\n      sequences = $q.defer()\n      junctions = $q.defer()\n      visualizations = $q.defer()\n\n      $scope.projectMetadata = {}\n      $scope.junctions = {}\n\n      if !_.isUndefined($routeParams.tab)\n        $scope.tabs[$routeParams.tab].active = true\n\n      apiProject.get {name: $routeParams.project}, (data) ->\n        data.project.metadata = _.filter(data.project.metadata, (meta) ->\n          !_.isEqual(meta.name, 'public')\n        )\n        $scope.project = data.project\n        project.resolve true\n\n      apiProject.sequences {name: $routeParams.project}, (data) ->\n        $scope.sequences = data.sequences\n        sequences.resolve true\n\n      project.promise.then () ->\n        _.forEach($scope.project.synthesizers, (synthesizer, index) ->\n          apiProject.junctions {name: $routeParams.project, param: synthesizer.identifier}, (data) ->\n            $scope.junctions[synthesizer.identifier] = data.junctions\n            if index + 1 == $scope.project.synthesizers.length\n              junctions.resolve true\n        )\n        if _.isEmpty($scope.project.synthesizers)\n          junctions.resolve true\n        apiVisualization.all (data) ->\n          $scope.visualizations = _.filter(data.visualizations, (visualization) ->\n            _.contains(_.pluck($scope.project.visualizations, 'id'), visualization.id)\n          )\n          visualizations.resolve true\n\n      # register promises into one queue\n      elzoidoPromises.register('project', [project.promise, sequences.promise, visualizations.promise, junctions.promise])\n\n    $scope.getItem = (item, array) ->\n      _.find(array, {id: item})\n\n    $scope.getColor = (weight) ->\n      255 - weight * 50\n\n    $scope.isEmpty = (object) ->\n      Object.keys(object).length == 0\n\n    $scope.edit = ->\n      confirm = dialogs.create('partials/projectsInformationEdit.html', 'ProjectsInformationEditCtrl',\n        {project: $scope.project},\n        {size: 'lg', keyboard: false})\n      # result\n      confirm.result.then (wait) ->\n        wait.result.then (project)->\n          # fire event\n          $rootScope.$broadcast 'event:narra-project-updated', project.name\n\n    $scope.isAuthor = ->\n      !_.isUndefined($scope.project) && _.isEqual($scope.project.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n    $scope.delete = ->\n      # open confirmation dialog\n      confirm = dialogs.confirm('Please Confirm',\n        'You are about to delete the project ' + $scope.project.title + ', this procedure is irreversible. Do you want to continue ?')\n\n      # result\n      confirm.result.then ->\n        # delete storage and its projects\n        apiProject.delete {name: $scope.project.name}, ->\n          # redirect back to libraries\n          $location.url('/projects/')\n          # send message\n          elzoidoMessages.send('success', 'Success!', 'Project ' + $scope.project.name + ' was successfully deleted.')\n\n    # click function for detail view\n    $scope.detailLibrary = (library, index) ->\n      $location.url('/libraries/' + library.id + '?project=' + $scope.project.name)\n\n    # click function for detail view\n    $scope.detailSequence = (sequence, index) ->\n      $location.url('/sequences/' + sequence.id + '?project=' + $scope.project.name)\n\n    $scope.addVisualization = (visualization) ->\n      apiProject.visualizationsAction {name: $scope.project.name, action: 'add', visualizations: [visualization.id]}, ->\n        # send message\n        elzoidoMessages.send('success', 'Success!', 'Visualization ' + visualization.name + ' was successfully added.')\n        # refresh\n        $scope.refresh()\n\n    $scope.removeVisualization = (visualization) ->\n      apiProject.visualizationsAction {name: $scope.project.name, action: 'remove', visualizations: [visualization.id]}, ->\n        # send message\n        elzoidoMessages.send('success', 'Success!', 'Visualization ' + visualization.name + ' was successfully removed.')\n        # refresh\n        $scope.refresh()\n\n    $scope.preview = (visualization) ->\n      $window.open('/viewer/' + $scope.project.name + '?visualization=' + visualization.id, visualization.id, '_blank')\n\n    # refresh when new library is added\n    $scope.$on 'event:narra-library-created', (event) ->\n      if !_.isUndefined($routeParams.project)\n        $scope.refresh()\n\n    # refresh when new library is added\n    $rootScope.$on 'event:narra-library-purged', (event, status) ->\n      $scope.refresh()\n\n    # refresh when new sequence is added\n    $scope.$on 'event:narra-sequence-created', (event) ->\n      if !_.isUndefined($routeParams.project)\n        $scope.refresh()\n\n    # refresh when new library is added\n    $scope.$on 'event:narra-project-updated', (event, project) ->\n      if _.isEqual($routeParams.project, project)\n        $scope.refresh()\n\n    # initial data\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'ProjectsInformationEditCtrl', ($scope, $filter, $modalInstance, dialogs, apiProject, apiLibrary, apiUser, apiSynthesizers, apiVisualization, elzoidoMessages, elzoidoAuthUser, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.project = data.project\n  $scope.initial = angular.copy(data.project)\n  $scope.contributor = {}\n  $scope.library = {}\n\n  apiProject.all (data) ->\n    $scope.projects = data.projects\n  apiLibrary.all (data) ->\n    $scope.allLibraries = data.libraries\n    $scope.filterLibraries()\n  apiUser.all (data) ->\n    $scope.users = data.users\n    $scope.filterUsers()\n  apiSynthesizers.all (data) ->\n    # select first synthesizer and activate\n    if !_.isEmpty($scope.project.synthesizers)\n      # activate\n      _.forEach(data.synthesizers, (synthesizer) ->\n        temp = _.find($scope.project.synthesizers, {identifier: synthesizer.identifier})\n        if !_.isUndefined(temp)\n          synthesizer.options = temp.options\n          synthesizer.active = true\n          if _.isUndefined($scope.synthesizer)\n            $scope.synthesizer = synthesizer\n      )\n    # prepare data for session\n    $scope.synthesizers = data.synthesizers\n  apiVisualization.all (data) ->\n    # select first visualization and activate\n    if !_.isEmpty($scope.project.visualizations)\n      # activate\n      _.forEach(data.visualizations, (visualization) ->\n        temp = _.find($scope.project.visualizations, {id: visualization.id})\n        if !_.isUndefined(temp)\n          visualization.options = temp.options\n          visualization.active = true\n          if _.isUndefined($scope.visualization)\n            $scope.visualization = visualization\n      )\n    # prepare data for session\n    $scope.visualizations = data.visualizations\n\n  $scope.selectSynthesizer = (synthesizer) ->\n    if synthesizer.active\n      $scope.synthesizer = synthesizer\n\n  $scope.activateSynthesizer = (synthesizer) ->\n    if synthesizer.active\n      $scope.synthesizer = synthesizer\n    else\n      $scope.synthesizer = null\n\n  $scope.isSelectedSynthesizer = (synthesizer) ->\n    if $scope.synthesizer\n      $scope.synthesizer.identifier == synthesizer.identifier\n\n  $scope.selectVisualization = (visualization) ->\n    if visualization.active\n      $scope.visualization = visualization\n\n  $scope.activateVisualization = (visualization) ->\n    if visualization.active\n      $scope.visualization = visualization\n    else\n      $scope.visualization = null\n\n  $scope.isSelectedVisualization = (visualization) ->\n    if $scope.visualization\n      $scope.visualization.id == visualization.id\n\n  $scope.addContribution = (user) ->\n    $scope.project.contributors.push(user)\n    $scope.contributor.selected = undefined\n    # refresh\n    $scope.filterUsers()\n\n  $scope.removeContribution = (user) ->\n    _.pull($scope.project.contributors, user)\n    # refresh\n    $scope.filterUsers()\n\n  $scope.addLibrary = (library) ->\n    $scope.project.libraries.push(library)\n    $scope.library.selected = undefined\n    # refresh\n    $scope.filterLibraries()\n\n  $scope.removeLibrary = (library) ->\n    _.pull($scope.project.libraries, library)\n    # refresh\n    $scope.filterLibraries()\n\n  $scope.isAuthor = ->\n    !_.isUndefined($scope.project) && _.isEqual($scope.project.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n  $scope.filterUsers = ->\n    $scope.contributors = _.filter($scope.users, (user) ->\n      !_.isEqual($scope.project.author.username, user.username) && !_.include(_.pluck($scope.project.contributors,\n        'username'), user.username)\n    )\n\n  $scope.filterLibraries = ->\n    $scope.libraries = _.filter($scope.allLibraries, (library) ->\n      !_.include(_.pluck($scope.project.libraries, 'id'), library.id)\n    )\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # save action\n  $scope.edit = ->\n# open waiting\n    wait = dialogs.wait('Please Wait', 'Saving project ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    # append date suffix\n    project_name = $filter('projectname')($scope.project.name)\n\n    # process synthesizers\n    $scope.project.synthesizers = _.filter($scope.synthesizers, (synthesizer) ->\n      synthesizer.active\n    )\n\n    # process visualizations\n    $scope.project.visualizations = _.filter($scope.visualizations, (visualization) ->\n      visualization.active\n    )\n\n    apiProject.update({\n        name: $scope.initial.name\n        new_name: project_name\n        title: $scope.project.title\n        author: $scope.project.author.username\n        description: $scope.project.description\n        synthesizers: _.collect($scope.project.synthesizers, (s) ->\n          {identifier: s.identifier, options: s.options})\n        visualizations: _.collect($scope.project.visualizations, (v) ->\n          { id: v.id, type: v.type, options: v.options})\n        contributors: _.pluck($scope.project.contributors, 'username')\n        libraries: _.pluck($scope.project.libraries, 'id')\n        public: $scope.project.public\n      }, (data) ->\n        # close wait dialog\n        wait.close(data.project)\n        # fire message\n        elzoidoMessages.send('success', 'Success!', 'Project ' + data.project.title + ' was successfully saved.')\n    )\n\n  $scope.validateName = (value) ->\n    !(_.contains(_.pluck($scope.projects, 'name'), $filter('projectname')(value)) && !_.isEqual(value,\n      $scope.initial.name))\n\n  $scope.validateTitle = (value) ->\n    !(_.contains(_.pluck($scope.projects, 'title'), value) && !_.isEqual(value, $scope.initial.title))","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'SearchCtrl', ($scope, $rootScope, $window) ->","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'SequencesAddCtrl', ($scope, $modalInstance, $timeout, dialogs, apiProject, apiUser, elzoidoMessages, elzoidoAuthUser, FileUploader) ->\n# initialize\n  $scope.user = elzoidoAuthUser.get()\n  $scope.sequence = {name: '', project: '', author: $scope.user, description: '', file: undefined, fps: ''}\n  $scope.framerates = [24, 25, 29.97, 30]\n  $scope.uploader = new FileUploader()\n\n  $scope.uploader.onAfterAddingFile = (file) ->\n    type = file._file.name.split('.')[1]\n\n    # check type\n    if _.isEqual(type, 'edl')\n      $scope.sequence.type = 'edl'\n    else if _.isEqual(type, 'xml')\n      $scope.sequence.type = 'xml'\n\n    # save file\n    $scope.sequence.file = file._file\n    $scope.sequence.name = file._file.name.split('.')[0]\n    $scope.second = true\n\n  apiProject.all (data) ->\n    $scope.projects = data.projects\n  apiUser.all (data) ->\n    $scope.users = data.users\n\n  $scope.select = (type) ->\n    $scope.sequence.type = type\n    $scope.second = true\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # back action\n  $scope.back = ->\n# back to the first slide\n    $scope.second = false\n\n  # save action\n  $scope.new = ->\n# create form data object\n    data = new FormData()\n\n    # set up\n    data.append('title', $scope.sequence.name)\n    data.append('type', $scope.sequence.type)\n    data.append('fps', $scope.sequence.fps)\n    data.append('author', $scope.sequence.author.username)\n    data.append('description', $scope.sequence.description)\n\n    # push file only if imported\n    if !_.isUndefined($scope.sequence.file)\n      data.append('file', $scope.sequence.file)\n\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Registering new sequence ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    apiProject.sequencesNew({name: $scope.sequence.project.name}, data, (data) ->\n      # workaround to get sequence processed\n      $timeout(->\n        # close wait dialog\n        wait.close()\n        # fire message\n        elzoidoMessages.send('success', 'Success!', 'Sequence ' + $scope.sequence.name + ' was successfully created.')\n      , 1000)\n    )","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'SequencesDetailCtrl', ($scope, $sce, $timeout, $rootScope, $routeParams, $location, $document, $interval, $filter, $q, dialogs, apiProject, apiUser, elzoidoPromises, elzoidoAuthUser, elzoidoMessages) ->\n  # initializations\n  $scope.tabs = { sequence: { active: true }, player: { }, editor: { } }\n  # player\n  $scope.player =\n    api: undefined\n    ready: false\n    preload: true\n    autoHide: true\n    autoHideTime: 2000\n    autoPlay: false\n    sources: []\n    playlist: []\n    current: 0\n    tracks: []\n    cuePoints: {}\n    plugins: {}\n\n  # refresh data\n  elzoidoPromises.promise('authentication').then ->\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      sequence = $q.defer()\n      items = $q.defer()\n\n      apiProject.items {name: $routeParams.project}, (data) ->\n        $scope.items = data.items\n        items.resolve true\n\n      items.promise.then ->\n        apiProject.sequences {name: $routeParams.project, param: $routeParams.sequence}, (data) ->\n          # get seauence\n          $scope.sequence = data.sequence\n          # set playlist\n          _.forEach($scope.sequence.marks, (mark) ->\n            # get item\n            item = _.find($scope.items, {name: mark.clip.name})\n            # get video source\n            if _.isUndefined(item)\n              if mark.clip.name == 'black'\n                source = 'http://static.rur.cz/narra/black/black.mp4'\n              else\n                source = 'http://static.rur.cz/narra/bars/bars.mp4'\n              source_in = 0\n              source_out = mark.duration\n            else\n              source = item.video_proxy_hq\n              source_in = mark.in\n              source_out = mark.out\n            # create playlist entry\n            $scope.player.playlist.push({in: source_in, out: source_out, src: {src: $sce.trustAsResourceUrl(source), type: \"video/mp4\"}})\n          )\n          # set first video\n          $scope.player.sources = [$scope.player.playlist[0].src]\n          # resolve\n          sequence.resolve true\n\n      # register promises into one queue\n      elzoidoPromises.register('sequence', [sequence.promise, items.promise])\n      elzoidoPromises.promise('sequence').then ->\n        # init player\n        $scope.player.ready = true\n\n    $scope.onPlayerReady = (api) ->\n      # set player's api\n      $scope.player.api = api\n      # set first video seek time\n      $timeout ->\n        $scope.player.api.seekTime($scope.player.playlist[0].in)\n      , 0\n\n    $scope.playlistHandler = (currentTime) ->\n      if currentTime >= $scope.player.playlist[$scope.player.current].out\n        # set next video\n        $scope.player.current += 1\n        # refresh\n        $scope.playerAction()\n\n    $scope.seek = (index) ->\n      # set current video\n      $scope.player.current = index\n      # refresh\n      $scope.playerAction()\n\n    $scope.playerAction = () ->\n      if $scope.player.current != $scope.player.playlist.length\n        $scope.player.sources = [$scope.player.playlist[$scope.player.current].src]\n        $timeout ->\n          $scope.player.api.seekTime($scope.player.playlist[$scope.player.current].in)\n          $scope.player.api.play()\n        , 0\n      else\n        $scope.player.api.stop()\n        $scope.player.current = 0\n        $scope.player.sources = [$scope.player.playlist[$scope.player.current].src]\n        $timeout ->\n          $scope.player.api.seekTime($scope.player.playlist[$scope.player.current].in)\n        , 0\n\n    $scope.isAuthor = ->\n      !_.isUndefined($scope.sequence) && _.isEqual($scope.sequence.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n    $scope.isContributor = ->\n      !_.isUndefined($scope.sequence) && _.include(_.pluck($scope.sequence.contributors, 'username'), $scope.user.username)\n\n    $scope.isActive = (index) ->\n      $scope.player.current == index\n\n    $scope.edit = ->\n      # check\n      return if !$scope.isAuthor() && !$scope.isContributor()\n      # process\n      confirm = dialogs.create('partials/sequencesInformationEdit.html', 'SequencesInformationEditCtrl',\n        {sequence: $scope.sequence},\n        {size: 'lg', keyboard: false})\n      # result\n      confirm.result.then (wait) ->\n        wait.result.then ->\n          # refresh\n          $scope.refresh()\n          # fire event\n          $rootScope.$broadcast 'event:narra-sequence-updated', $routeParams.sequence\n\n    $scope.delete = ->\n      # open confirmation dialog\n      confirm = dialogs.confirm('Please Confirm',\n        'You are about to delete the sequence ' + $scope.sequence.name + ', this procedure is irreversible. Do you want to continue ?')\n\n      # result\n      confirm.result.then ->\n        # delete storage and its projects\n        apiProject.sequencesDelete {name: $routeParams.project, param: $scope.sequence.id}, ->\n          # send message\n          elzoidoMessages.send('success', 'Success!', 'Sequence ' + $scope.sequence.name + ' was successfully deleted.')\n          # redirect back to project\n          $location.url('/projects/' + $routeParams.project)\n\n    # initial data\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'SequencesInformationEditCtrl', ($scope, $filter, $modalInstance, $timeout, dialogs, apiProject, apiUser, apiGenerator, elzoidoMessages, elzoidoAuthUser, FileUploader, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.sequence = data.sequence\n  $scope.project = data.sequence.project\n  $scope.initial = angular.copy(data.sequence)\n  $scope.contributor = {}\n\n  apiProject.sequences {name: $scope.project.name}, (data) ->\n    $scope.sequences = data.sequences\n  apiUser.all (data) ->\n    $scope.users = data.users\n    $scope.filter()\n\n  $scope.addContribution = (user) ->\n    $scope.sequence.contributors.push(user)\n    $scope.contributor.selected = undefined\n    # refresh\n    $scope.filter()\n\n  $scope.removeContribution = (user) ->\n    _.pull($scope.sequence.contributors, user)\n    # refresh\n    $scope.filter()\n\n  $scope.filter = ->\n    $scope.contributors = _.filter($scope.users, (user) ->\n      !_.isEqual($scope.sequence.author.username, user.username) && !_.include(_.pluck($scope.sequence.contributors,\n        'username'), user.username)\n    )\n\n  $scope.isAuthor = ->\n    !_.isUndefined($scope.sequence) && _.isEqual($scope.sequence.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # save action\n  $scope.edit = ->\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Saving sequence ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    apiProject.sequencesUpdate({\n        name: $scope.project.name\n        sequence: $scope.sequence.id\n        title: $scope.sequence.name\n        public: $scope.sequence.public.toString()\n        author: $scope.sequence.author.username\n        description: $scope.sequence.description\n        contributors: _.pluck($scope.sequence.contributors, 'username')\n      }, (data) ->\n        # close wait dialog\n        wait.close(data.library)\n        # fire message\n        elzoidoMessages.send('success', 'Success!', 'Sequence ' + data.sequence.name + ' was successfully saved.')\n    )\n\n  $scope.validateName = (value) ->\n    !(_.contains(_.pluck($scope.visualizations, 'name'),  value))","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'UsersCtrl', ($scope, $rootScope, $q, $location, dialogs, apiUser, elzoidoPromises, elzoidoAuthUser, elzoidoAuthAPI) ->\n  # refresh function\n  $scope.refresh = ->\n    # get deffered\n    users = $q.defer()\n    # get all projects and get back to view\n    apiUser.all (data) ->\n      $scope.users = data.users\n      $scope.empty = (data.length < 1)\n      users.resolve true\n    # register promises into one queue\n    elzoidoPromises.register('users', users.promise)\n\n  $scope.edit = (user) ->\n    confirm = dialogs.create('partials/usersEdit.html', 'UsersEditCtrl', {user: user},\n      {size: 'lg', keyboard: false})\n    # result\n    confirm.result.then (wait) ->\n      wait.result.then ->\n        # fire event\n        $rootScope.$broadcast 'event:narra-user-updated'\n        # check if updating current user\n        elzoidoAuthAPI.signin() if _.isEqual(user.username, elzoidoAuthUser.get().username)\n\n  # refresh when new user is updated\n  $rootScope.$on 'event:narra-user-updated', (event, status) ->\n    $scope.refresh()\n\n  # initial data\n  $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'UsersEditCtrl', ($scope, $q, $location, $filter, $modalInstance, dialogs, apiUser, elzoidoMessages, elzoidoAuthUser, data) ->\n  # receive user through dialog data\n  $scope.user = data.user\n  $scope.username = data.user.username\n  $scope.admin = elzoidoAuthUser.get().isAdmin()\n\n  apiUser.all (data) ->\n    $scope.users = data.users\n\n  apiUser.roles (data) ->\n    $scope.roles = data.roles\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # save action\n  $scope.edit = ->\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Saving user ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    # filter username\n    username = $filter('projectname')($scope.user.username)\n\n    apiUser.update({\n        username: $scope.username\n        new_username: username\n        email: $scope.user.email\n        roles: $scope.user.roles\n      }, (data) ->\n      # close wait dialog\n      wait.close()\n      # fire message\n      elzoidoMessages.send('success', 'Success!', 'User ' + data.user.name + ' was successfully saved.')\n    )\n\n  $scope.validateUsername = (value)->\n    !_.contains(_.pluck($scope.users, 'username'),  $filter('projectname')(value))\n\n  $scope.validateRolesRequired = (value)->\n    !_.isEmpty(value)\n\n  $scope.validateRolesAdmin = (value)->\n    return true if _.contains(value, 'admin')\n    # get all admin users\n    admins = _.where($scope.users, 'roles': ['admin'])\n    # if more admins than it is fine\n    return true if admins.length > 1\n    # if currently edited user is not that admin\n    return true if _.isEmpty(_.where(admins, 'username': $scope.username))","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'VersionCtrl', ($scope, apiSystem, serviceVersion) ->\n  serviceVersion.version (data) ->\n    $scope.uiVersion = data.version\n  apiSystem.version (data) ->\n    $scope.coreVersion = data.version","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'ViewerCtrl', ($scope, $routeParams, $window, $rootScope, $q, apiProject, apiVisualization, elzoidoPromises, angularLoad) ->\n  # narra api for processing\n  $window.narra =\n    width: $window.innerWidth - 5\n    height: $window.innerHeight - 5\n    getProject: ->\n      $scope.project\n    getItems: (synthesizer, item) ->\n      if _.isUndefined(synthesizer)\n        $scope.items\n      else\n        _.reject(_.flatten(_.pluck(_.where($scope.junctions[synthesizer], {items: [{id: item}]}), 'items')), {id: item})\n    getItem: (item) ->\n      _.find($scope.items, {id: item})\n    getJunctions: (synthesizer, item) ->\n      if _.isUndefined(item)\n        $scope.junctions[synthesizer]\n      else\n        _.where($scope.junctions[synthesizer], {items: [{id: item}]})\n\n  # inicialization\n  $scope.visualization = {}\n  $scope.meta = {}\n\n  $scope.refresh = ->\n    # get deffered\n    project = $q.defer()\n    junctions = $q.defer()\n    items = $q.defer()\n    visualization = $q.defer()\n    $scope.junctions = {}\n\n    apiProject.get {name: $routeParams.project}, (data) ->\n      data.project.metadata = _.filter(data.project.metadata, (meta) ->\n        !_.isEqual(meta.name, 'public'))\n      $scope.project = data.project\n      $rootScope.project = data.project\n      project.resolve true\n\n    project.promise.then ->\n      # get junctions\n      _.forEach($scope.project.synthesizers, (synthesizer, index) ->\n        apiProject.junctions {name: $routeParams.project, param: synthesizer.identifier}, (data) ->\n          $scope.junctions[synthesizer.identifier] = data.junctions\n          if index + 1 == $scope.project.synthesizers.length\n            junctions.resolve true\n      )\n      # get visualization\n      if _.isUndefined($routeParams.visualization)\n        apiVisualization.get {id: $scope.project.visualizations[0].id }, (data) ->\n          $scope.visualization = data.visualization\n          visualization.resolve true\n      else\n        apiVisualization.get {id: $routeParams.visualization }, (data) ->\n          $scope.visualization = data.visualization\n          visualization.resolve true\n\n    apiProject.items {name: $routeParams.project}, (data) ->\n      $scope.items = data.items\n      items.resolve true\n\n    items.promise.then ->\n      visualization.promise.then ->\n        $scope.ready = true\n        if ($scope.visualization.type == 'p5js')\n          angularLoad.loadScript($scope.visualization.script).then ->\n            $scope.sketch = $window.visualization\n\n    # register promises into one queue\n    elzoidoPromises.register('viewer', [project.promise, junctions.promise, items.promise, visualization.promise])\n\n  # initial data\n  $scope.refresh()","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'VisualizationsCtrl', ($scope, $rootScope, $location, $interval, $filter, $q, dialogs, apiProject, apiVisualization, apiUser, elzoidoPromises, elzoidoAuthUser) ->\n  # initialization\n  $scope.tabs = { myVisualizations: { }, contribVisualizations: { }, publicVisualizations: { } }\n\n  elzoidoPromises.promise('authentication').then ->\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      visualizations = $q.defer()\n\n      apiVisualization.all (data) ->\n        _.forEach(data.visualizations, (visualization) ->\n          visualization.thumbnail = '/images/bars.png')\n        $scope.myVisualizations = _.filter(data.visualizations, (visualization) ->\n          _.isEqual(visualization.author.username, $scope.user.username))\n        $scope.publicVisualizations = _.filter(data.visualizations, (visualization) ->\n          visualization.public && !_.contains(_.pluck($scope.myVisualizations, 'id'), visualization.id))\n        $scope.contribVisualizations = _.filter(data.visualizations, (visualization) ->\n          _.contains(_.pluck(visualization.contributors, 'username'), $scope.user.username))\n        if $scope.myVisualizations.length == 0\n          if $scope.contribVisualizations.length == 0\n            $scope.tabs.publicVisualizations = { active: true }\n          else\n            $scope.tabs.contribVisualizations = { active: true }\n        else\n          $scope.tabs.myVisualizations = { active: true }\n        visualizations.resolve true\n\n      # register promises into one queue\n      elzoidoPromises.register('visualizations', [visualizations.promise])\n\n    # click function for detail view\n    $scope.detail = (visualization) ->\n      $location.path('/visualizations/' + visualization.id)\n\n    # refresh when new library is added\n    $rootScope.$on 'event:narra-visualization-created', (event, status) ->\n      $scope.refresh()\n\n    # initial data\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'VisualizationsAddCtrl', ($scope, $modalInstance, $timeout, dialogs, apiVisualization, apiUser, elzoidoMessages, elzoidoAuthUser, FileUploader) ->\n  # initialize\n  $scope.user = elzoidoAuthUser.get()\n  $scope.visualization = { name: '', author: $scope.user, description: '', file: undefined}\n  $scope.uploader = new FileUploader()\n\n  $scope.uploader.onAfterAddingFile = (file) ->\n    type = file._file.name.split('.')[1]\n\n    # check type\n    if _.isEqual(type, 'pde')\n      $scope.visualization.type = 'processing'\n    else if _.isEqual(type, 'js')\n      $scope.visualization.type = 'p5js'\n\n    # save file\n    $scope.visualization.file = file._file\n    $scope.visualization.name = file._file.name.split('.')[0]\n    $scope.second = true\n\n  apiUser.all (data) ->\n    $scope.users = data.users\n  apiVisualization.all (data) ->\n    $scope.visualizations = data.visualizations\n\n  $scope.select = (type) ->\n    $scope.visualization.type = type\n    $scope.second = true\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # back action\n  $scope.back = ->\n    # back to the first slide\n    $scope.second = false\n\n  # save action\n  $scope.new = ->\n    # create form data object\n    data = new FormData()\n\n    # set up\n    data.append('name', $scope.visualization.name)\n    data.append('type', $scope.visualization.type)\n    data.append('author', $scope.visualization.author.username)\n    data.append('description', $scope.visualization.description)\n\n    # push file only if imported\n    if !_.isUndefined($scope.visualization.file)\n      data.append('file', $scope.visualization.file)\n\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Registering new visualization ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    apiVisualization.new({}, data, (data) ->\n      # workaround to get sequence processed\n      $timeout( ->\n        # close wait dialog\n        wait.close($scope.visualization.name)\n        # fire message\n        elzoidoMessages.send('success', 'Success!', 'Visualization ' + $scope.visualization.name + ' was successfully created.')\n      , 1000)\n    )\n\n  $scope.validateName = (value) ->\n    !(_.contains(_.pluck($scope.visualizations, 'name'),  value))","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'VisualizationsDetailCtrl', ($scope, $sce, $timeout, $window, $rootScope, $http, $routeParams, $location, $document, $interval, $filter, $q, dialogs, apiVisualization, apiUser, apiProject, elzoidoPromises, elzoidoAuthUser, elzoidoMessages) ->\n  # initialization\n  $scope.tabs = { visualization: { active: true }, code: { } }\n  $scope.editorOption =\n    theme: 'xcode',\n    require: ['ace/ext/language_tools', 'ace/ext/static_highlight', 'ace/ext/error_marker', 'ace/ext/searchbox'],\n    advanced: {\n      enableSnippets: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: true\n    },\n    onLoad: (editor) ->\n      session = editor.getSession()\n      # resolve mode\n      if _.isEqual($scope.visualization.type, 'processing')\n        session.setMode('ace/mode/java')\n      else\n        session.setMode('ace/mode/javascript')\n      # set autoresize\n      editor.setAutoScrollEditorIntoView(true)\n      editor.setOption(\"maxLines\", 120)\n      # listen for changes\n      session.on \"change\", ->\n        $scope.newContent = session.getValue()\n\n  elzoidoPromises.promise('authentication').then ->\n    # refresh data\n    $scope.refresh = ->\n      # get current user\n      $scope.user = elzoidoAuthUser.get()\n      # get deffered\n      visualization = $q.defer()\n      projects = $q.defer()\n\n      apiVisualization.get {id: $routeParams.visualization}, (data) ->\n        # get visualization\n        $scope.visualization = data.visualization\n        $http.get($scope.visualization.script).success (data, status, headers, config) ->\n          $scope.content = data\n          $scope.ready = true\n          visualization.resolve true\n\n      apiProject.all (data) ->\n        $scope.projects = data.projects\n        projects.resolve true\n\n      # register promises into one queue\n      elzoidoPromises.register('visualization', [visualization.promise, projects.promise])\n\n    $scope.isAuthor = ->\n      !_.isUndefined($scope.visualization) && _.isEqual($scope.visualization.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n    $scope.isContributor = ->\n      !_.isUndefined($scope.visualization) && _.include(_.pluck($scope.visualization.contributors, 'username'), $scope.user.username)\n\n    $scope.preview = (project) ->\n      # save script\n      promise = $scope.save()\n      # when saved then preview\n      promise.then ->\n        $window.open('/viewer/' + project.name + '?visualization=' + $scope.visualization.id, $scope.visualization.id, '_blank')\n\n    $scope.edit = ->\n      confirm = dialogs.create('partials/visualizationsInformationEdit.html', 'VisualizationsInformationEditCtrl',\n        {visualization: $scope.visualization},\n        {size: 'lg', keyboard: false})\n      # result\n      confirm.result.then (wait) ->\n        wait.result.then ->\n          # fire event\n          $rootScope.$broadcast 'event:narra-visualization-updated', $routeParams.visualization\n\n    $scope.delete = ->\n      # open confirmation dialog\n      confirm = dialogs.confirm('Please Confirm',\n        'You are about to delete the visualization ' + $scope.visualization.name + ', this procedure is irreversible. Do you want to continue ?')\n\n      # result\n      confirm.result.then ->\n        # delete storage and its projects\n        apiVisualization.delete {id: $scope.visualization.id}, ->\n          # send message\n          elzoidoMessages.send('success', 'Success!', 'Visualization ' + $scope.visualization.name + ' was successfully deleted.')\n          # redirect back to project\n          $location.url('/visualizations')\n\n    # save action\n    $scope.save = ->\n      # get deffered\n      process = $q.defer()\n      # create form data object\n      data = new FormData()\n\n      # get file name\n      if _.isEqual($scope.visualization.type, 'processing')\n        fileName = $scope.visualization.type + '.pde'\n      else\n        fileName = $scope.visualization.type + '.js'\n\n      # create file\n      file = new File([$scope.newContent], fileName)\n\n      # set up\n      data.append('name', $scope.visualization.name)\n      data.append('author', $scope.visualization.author.username)\n      data.append('description', $scope.visualization.description)\n      data.append('public', $scope.visualization.public)\n      data.append('contributors', JSON.stringify(_.pluck($scope.visualization.contributors, 'username')))\n      data.append('file', file)\n\n      # open waiting\n      wait = dialogs.wait('Please Wait', 'Saving visualization ...')\n\n      apiVisualization.update({id: $scope.visualization.id}, data, (data) ->\n        # workaround to get sequence processed\n        $timeout( ->\n          # refresh\n          $scope.refresh();\n          # close wait dialog\n          wait.close($scope.visualization.name)\n          # resolve process\n          process.resolve true\n          # fire message\n          elzoidoMessages.send('success', 'Success!', 'Visualization ' + $scope.visualization.name + ' was successfully updated.')\n        , 1000)\n      )\n      # return promise\n      return process.promise\n\n    # refresh when new library is added\n    $scope.$on 'event:narra-visualization-updated', (event, visualization) ->\n      if !_.isUndefined($routeParams.visualization) && _.isEqual($routeParams.visualization, visualization)\n        $scope.refresh()\n\n    # initial data\n    $scope.refresh()","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').controller 'VisualizationsInformationEditCtrl', ($scope, $filter, $modalInstance, $timeout, dialogs, apiVisualization, apiUser, apiGenerator, elzoidoMessages, elzoidoAuthUser, FileUploader, data) ->\n  $scope.user = elzoidoAuthUser.get()\n  $scope.visualization = data.visualization\n  $scope.initial = angular.copy(data.visualization)\n  $scope.uploader = new FileUploader()\n  $scope.contributor = {}\n\n  apiVisualization.all (data) ->\n    $scope.visualizations = data.visualizations\n  apiUser.all (data) ->\n    $scope.users = data.users\n    $scope.filter()\n\n  $scope.uploader.onAfterAddingFile = (file) ->\n    type = file._file.name.split('.')[1]\n    # check type\n    if _.isEqual(type, 'pde')\n      # save file\n      console.log($scope.visualization.file)\n      $scope.visualization.file = file._file\n      console.log($scope.visualization.file)\n\n  $scope.addContribution = (user) ->\n    $scope.visualization.contributors.push(user)\n    $scope.contributor.selected = undefined\n    # refresh\n    $scope.filter()\n\n  $scope.removeContribution = (user) ->\n    _.pull($scope.visualization.contributors, user)\n    # refresh\n    $scope.filter()\n\n  $scope.filter = ->\n    $scope.contributors = _.filter($scope.users, (user) ->\n      !_.isEqual($scope.visualization.author.username, user.username) && !_.include(_.pluck($scope.visualization.contributors,\n        'username'), user.username)\n    )\n\n  $scope.isAuthor = ->\n    !_.isUndefined($scope.visualization) && _.isEqual($scope.visualization.author.username, $scope.user.username) || $scope.user.isAdmin()\n\n  $scope.close = ->\n    $modalInstance.dismiss('canceled')\n\n  # save action\n  $scope.edit = ->\n    # create form data object\n    data = new FormData()\n\n    # set up\n    data.append('name', $scope.visualization.name)\n    data.append('author', $scope.visualization.author.username)\n    data.append('description', $scope.visualization.description)\n    data.append('public', $scope.visualization.public)\n    data.append('contributors', JSON.stringify(_.pluck($scope.visualization.contributors, 'username')))\n    data.append('file', $scope.visualization.file) if $scope.visualization.file\n\n    # open waiting\n    wait = dialogs.wait('Please Wait', 'Saving visualization ...')\n\n    # close dialog\n    $modalInstance.close(wait)\n\n    apiVisualization.update({id: $scope.visualization.id}, data, (data) ->\n      # workaround to get sequence processed\n      $timeout( ->\n        # close wait dialog\n        wait.close($scope.visualization.name)\n        # fire message\n        elzoidoMessages.send('success', 'Success!', 'Visualization ' + $scope.visualization.name + ' was successfully updated.')\n      , 1000)\n    )\n\n  $scope.validateName = (value) ->\n    !(_.contains(_.pluck($scope.visualizations, 'name'),  value))","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'narraAdd', ->\n  restrict: 'A'\n  transclude: true\n  scope: {}\n  controller: 'AddCtrl'\n  templateUrl: 'partials/add.html'\n  replace: false","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'narraEvents', ->\n  restrict: 'A'\n  transclude: true\n  scope: {}\n  controller: 'EventsCtrl'\n  templateUrl: 'partials/events.html'\n  replace: false","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'filtervalue', ($filter) ->\n  require: '?ngModel'\n  link: (scope, elem, attrs, ctrl) ->\n    if !_.isUndefined(attrs.filtervalue)\n      ctrl.$parsers.unshift (viewValue) ->\n        # filter value\n        filtered = $filter(attrs.filtervalue)(viewValue)\n        # send to ui\n        elem.val(filtered)\n        # return to model\n        filtered","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'holder', ->\n  link: (scope, element, attrs) ->\n    Holder.run\n      images: element.get(0)\n      nocss: true","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'narraMetadata', ->\n  restrict: 'A'\n  transclude: true\n  scope:\n    api: '=narraMetadataApi'\n    data: '=narraMetadataData'\n    player: '=narraMetadataPlayer'\n    search: '=narraMetadataSearch'\n    type: '@narraMetadataType'\n    ui: '@narraMetadataUi'\n  controller: 'MetadataCtrl'\n  templateUrl: 'partials/metadata/metadata.html'\n  replace: false","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'onRenderFinished', ($timeout) ->\n  restrict: 'A'\n  link: (scope, element, attr) ->\n    if scope.$last == true\n      $timeout ->\n        scope.$emit('event:narra-render-finished')","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'p5', (p5Factory) ->\n  scope: true\n  link: (scope, element) ->\n    factory = p5Factory()\n\n    scope.$watch 'sketch', (sketch) ->\n      factory.init(sketch, element[0])\n\n    scope.$on '$destroy', ->\n      factory.destroy()","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'processing', ->\n  scope: true\n  link: (scope, element, attrs) ->\n    scope.$sketch = Processing.loadSketchFromSources(element[0], [attrs.processing])","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'narraSearch', ->\n  restrict: 'A'\n  transclude: true\n  scope: {}\n  controller: 'SearchCtrl'\n  templateUrl: 'partials/search.html'\n  replace: false","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'uiSelectRequired', ->\n  restrict: 'A',\n  require: 'ngModel',\n  link: (scope, element, attrs, ngModelCtrl) ->\n    ngModelCtrl.$isEmpty = (modelValue) ->\n      !modelValue.length","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').directive 'narraVersion', ->\n  restrict: 'A'\n  transclude: true\n  scope: {}\n  controller: 'VersionCtrl'\n  templateUrl: 'partials/version.html'\n  replace: false","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'capitalize', ->\n  (text) ->\n    text.charAt(0).toUpperCase() + text.substr(1).toLowerCase()","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'generator', ->\n  (text) ->\n    angular.uppercase(text).replace('_', ' ')","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'guest', ->\n  (user) ->\n    if !_.isUndefined(user) then user.name else 'Guest'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'metadata', ->\n  (text) ->\n    # split into separate words\n    words = text.split('_')\n    # capitalize each\n    _.forEach(words, (word, index) ->\n      words[index] = word.charAt(0).toUpperCase() + word.substr(1).toLowerCase()\n    )\n    # return\n    words.join(' ')","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'projectname', ->\n  (text) ->\n    # check whether the text is defined\n    if _.isUndefined(text) then text = ''\n    # return properly formated project name\n    angular.lowercase(text).replace(/\\W+/g, \"_\").replace(/_{2,}/g, \"_\")","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'propertyname', ->\n  (text) ->\n    # check whether the text is defined\n    if _.isUndefined(text) then text = ''\n    # return properly formated project name\n    angular.lowercase(text).replace(/_/g, \" \")","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'trimunderscore', ->\n  (text) ->\n    # check whether the text is defined\n    if _.isUndefined(text) then text = ''\n    # return properly formated project name\n    String(text).replace(/(^_+|_+$)/g, \"\")","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').filter 'unescape', ->\n  (text) ->\n    _.unescape(text)","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').config ['uiGmapGoogleMapApiProvider', (uiGmapGoogleMapApiProvider) ->\n  uiGmapGoogleMapApiProvider.configure\n    libraries: 'places'\n]","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').run ($rootScope, $window, dialogs, serviceServer) ->\n  # Set up viewer mode\n  $rootScope.$on \"$routeChangeStart\", (event, next, current) ->\n    if next.templateUrl == \"partials/viewer.html\"\n      $rootScope.viewer = true\n    else\n      $rootScope.viewer = false","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').config (cfpLoadingBarProvider) ->\n  # configuration angular loading bar\n  cfpLoadingBarProvider.includeSpinner = false","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').constant 'constantMetadata',\n  providers: [\n    {id: 'author', name: 'Author', templateAdd: 'partials/metadata/metadataAuthorAdd.html', templateEdit: 'partials/metadata/metadataAuthorEdit.html', controller: 'MetadataAuthorCtrl'}\n    {id: 'keywords', name: 'Keywords', templateAdd: 'partials/metadata/metadataKeywordsAdd.html', templateEdit: 'partials/metadata/metadataKeywordsEdit.html', controller: 'MetadataKeywordsCtrl'}\n    {id: 'people', name: 'People', templateAdd: 'partials/metadata/metadataPeopleAdd.html', templateEdit: 'partials/metadata/metadataPeopleEdit.html', controller: 'MetadataPeopleCtrl'}\n    {id: 'organizations', name: 'Organizations', templateAdd: 'partials/metadata/metadataOrganizationsAdd.html', templateEdit: 'partials/metadata/metadataOrganizationsEdit.html', controller: 'MetadataOrganizationsCtrl'}\n    {id: 'language', name: 'Language', templateAdd: 'partials/metadata/metadataLanguageAdd.html', templateEdit: 'partials/metadata/metadataLanguageEdit.html', controller: 'MetadataLanguageCtrl'}\n    {id: 'summary', name: 'Summary', templateAdd: 'partials/metadata/metadataSummaryAdd.html', templateEdit: 'partials/metadata/metadataSummaryEdit.html', controller: 'MetadataSummaryCtrl'}\n    {id: 'description', name: 'Description', templateAdd: 'partials/metadata/metadataDescriptionAdd.html', templateEdit: 'partials/metadata/metadataDescriptionEdit.html', controller: 'MetadataDescriptionCtrl'}\n    {id: 'shot_type', name: 'Shot Type', templateAdd: 'partials/metadata/metadataShotTypeAdd.html', templateEdit: 'partials/metadata/metadataShotTypeEdit.html', controller: 'MetadataShotTypeCtrl'}\n    {id: 'custom', name: 'Custom', templateAdd: 'partials/metadata/metadataCustomAdd.html', templateEdit: 'partials/metadata/metadataCustomEdit.html', controller: 'MetadataCustomCtrl'},\n    {id: 'location', name: 'Location', templateAdd: 'partials/metadata/metadataLocationAdd.html', templateEdit: 'partials/metadata/metadataLocationEdit.html', controller: 'MetadataLocationCtrl'}\n  ]","#\n# Copyright (C) 2015 CAS / FAMU\n#\n# This file is part of narra-ui.\n#\n# narra-ui is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# narra-ui is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with narra-ui. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').config (elzoidoPromisesModule) ->\n  # static configuration elzoido auth plugin\n  elzoidoPromisesModule.config.timeout = 1000","angular.module('narra.ui').factory 'p5Factory', ($injector) ->\n  p5Wrapper =\n    init: (sketch, node) ->\n      @destroy()\n      if sketch\n        if $injector.has(sketch)\n          sketch = $injector.get(sketch)\n        @instance = new p5(sketch, node)\n    destroy: ->\n      if @instance\n        @instance.remove()\n        @instance = null\n  ->\n    Object.create p5Wrapper","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').factory 'serviceServer', ->\n  url: 'http://api.narra.eu'","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').factory 'serviceThumbnail', (serviceServer) ->\n  getThumbnail = (type) ->\n    serviceServer.url + '/images/item_' + type + '.png'\n  thumbnail: (type) ->\n    getThumbnail(type)\n  text: getThumbnail('text')\n  video: getThumbnail('video')\n  audio: getThumbnail('audio')\n  image: getThumbnail('image')","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').factory 'serviceToken', ($location, $cookies) ->\n  # resolve token from cookie\n  token = $cookies.get('_narra_ui_token')\n  # resolve token from the path or from cookie\n  if !_.isUndefined($location.search().token)\n    # resolve token from path\n    token = $location.search().token\n    # put token into cookie store\n    $cookies.put('_narra_ui_token', token)\n  # return functions\n  get: ->\n    # get token\n    token\n  clean: ->\n    # clean token\n    token = null\n","#\n# Copyright (C) 2014 CAS / FAMU\n#\n# This file is part of Narra Core.\n#\n# Narra Core is free software: you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation, either version 3 of the License, or\n# (at your option) any later version.\n#\n# Narra Core is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with Narra Core. If not, see <http://www.gnu.org/licenses/>.\n#\n# Authors: Michal Mocnak <michal@marigan.net>\n#\n\nangular.module('narra.ui').factory 'serviceVersion', ($resource) ->\n  $resource \"/package.json\", {},\n    version:\n      method: 'GET'"]}