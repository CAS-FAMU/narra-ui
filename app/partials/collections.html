<!--
    Copyright (C) 2013 CAS / FAMU

    This file is part of Narra UI.

    Narra UI is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Narra UI is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Narra UI. If not, see <http://www.gnu.org/licenses/>.

    Authors: Michal Mocnak <michal@marigan.net>, Krystof Pesek <krystof.pesek@gmail.com>
-->

<div class="page-header">
    <h1>Collections
        <small>management</small>
        <span class="pull-right">
            <span class="btn btn-primary" ng-click="open()">New Collection</span>
        </span>
    </h1>
</div>

<div ng-show="empty" class="alert lead" style="text-align: center;">
    You have no collection registered
</div>

<div ng-hide="empty">
    <input type="text" ng-model="search" placeholder="Search">
    <table class="table table-hover table-striped">
        <thead>
        <tr>
            <th>name</th>
            <th>title</th>
            <th class="pull-right">owner</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="collection in collections | filter:search | orderBy:'name'"  ng-click="detail(collection)">
            <td>
                <span class="lead">{{collection.name}}</span>
            </td>
            <td style="vertical-align:middle">
                <small class="muted">{{collection.title}}</small>
            </td>
            <td style="vertical-align:middle">
                <small class="muted pull-right">{{collection.owner.name}}</small>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div modal="shouldBeOpen" close="close()" options="opts">
    <div class="modal-header">
        <h4>Create a new collection</h4>
    </div>
    <div class="modal-body">
        <div class="form-horizontal">
            <div class="control-group">
                <label class="control-label" for="collectionName">name</label>

                <div class="controls">
                    <div class="input-append">
                        <input id="collectionName" ng-model="collection.name" ng-change="change()" type="text"
                               placeholder="Enter a name here" class="width-300"/>
                    </div>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="collectionTitle">title</label>

                <div class="controls">
                    <div class="input-append">
                        <input id="collectionTitle" ng-model="collection.title" type="text"
                               placeholder="Enter a title here" class="width-300"/>
                    </div>
                </div>
            </div>
            <div ng-show="exists" class="offset2 span4">
                <div class="alert alert-error">
                    <strong>Warning!</strong><br/>
                    <small>Collection {{collection.name|filter_LowercaseNoWhite}} already exists. Please choose a different name.</small>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <span class="btn btn-inverse" ng-click="close()">Cancel</span>
        <button class="btn btn-primary" ng-disabled="!validate()"
                ng-click="new()">Create
        </button>
    </div>
</div>