<!--
    Copyright (C) 2013 CAS / FAMU

    This file is part of Narra UI.

    Narra UI is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Narra UI is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Narra UI. If not, see <http://www.gnu.org/licenses/>.

    Authors: Michal Mocnak <michal@marigan.net>, Krystof Pesek <krystof.pesek@gmail.com>
-->

<div class="page-header">
    <h1>Projects
        <small>list</small>
        <span class="pull-right">
            <span class="btn btn-primary" ng-click="open()">New Project</span>
        </span>
    </h1>
</div>

<div ng-show="empty" class="alert lead" style="text-align: center;">
    You have no project registered
</div>

<div ng-hide="empty">
    <input type="text" ng-model="search" placeholder="Search">
    <div ng-repeat="project in projects | filter:search | orderBy:'name'">
        <hr>
    <div class="container-fluid">

        <div class="row">
            <div class="span2">
                <img src="http://placehold.it/100x100"/>
            </div>
            <div class="span5">
                <span class="lead">{{ project.title }}</span>
                <p><span class="muted">by {{ project.owner.name }}</span></p>
                <p><a class="btn" href="/projects/{{project.name}}">View</a><span access="author|{{project}}" class="left-buffer-10"><a class="btn btn-primary" href="/projects/{{project.name}}/editor">Modify</a></span></p>
            </div>
            <div class="pull-right">
                <img src="http://placehold.it/100x100"/><img src="http://placehold.it/100x100"/><img src="http://placehold.it/100x100"/>
            </div>
        </div>
    </div>
    </div>
</div>

<div modal="shouldBeOpen" close="close()" options="opts">
    <div class="modal-header">
        <h4>Create a new project</h4>
    </div>
    <div class="modal-body">
        <div class="form-horizontal">
            <div class="control-group">
                <label class="control-label" for="projectName">name</label>

                <div class="controls">
                    <div class="input-append">
                        <input id="projectName" ng-model="project.name" ng-change="change()" type="text"
                               placeholder="Enter a name here" class="width-300"/>
                    </div>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="projectTitle">title</label>

                <div class="controls">
                    <div class="input-append">
                        <input id="projectTitle" ng-model="project.title" type="text"
                               placeholder="Enter a title here" class="width-300"/>
                    </div>
                </div>
            </div>
            <div ng-show="exists" class="offset2 span4">
                <div class="alert alert-error">
                    <strong>Warning!</strong><br/>
                    <small>Project {{project.name|filter_LowercaseNoWhite}} already exists. Please choose a different
                        name.
                    </small>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <span class="btn btn-inverse" ng-click="close()">Cancel</span>
        <button class="btn btn-primary" ng-disabled="!validate()"
                ng-click="new()">Create
        </button>
    </div>
</div>